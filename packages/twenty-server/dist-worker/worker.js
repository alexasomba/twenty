var kp=Object.create;var ca=Object.defineProperty;var Fp=Object.getOwnPropertyDescriptor;var Cp=Object.getOwnPropertyNames;var Pp=Object.getPrototypeOf,Mp=Object.prototype.hasOwnProperty;var Ji=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var jp=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Cp(t))!Mp.call(e,i)&&i!==n&&ca(e,i,{get:()=>t[i],enumerable:!(r=Fp(t,i))||r.enumerable});return e};var Gt=(e,t,n)=>(n=e!=null?kp(Pp(e)):{},jp(t||!e||!e.__esModule?ca(n,"default",{value:e,enumerable:!0}):n,e));var Al=Ji(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.Token=Je.QueryDocumentKeys=Je.OperationTypeNode=Je.Location=void 0;Je.isNode=qm;var Is=class{constructor(t,n,r){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}};Je.Location=Is;var Ss=class{constructor(t,n,r,i,o,s){this.kind=t,this.start=n,this.end=r,this.line=i,this.column=o,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}};Je.Token=Ss;var Rl={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};Je.QueryDocumentKeys=Rl;var Gm=new Set(Object.keys(Rl));function qm(e){let t=e?.kind;return typeof t=="string"&&Gm.has(t)}var ws;Je.OperationTypeNode=ws;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(ws||(Je.OperationTypeNode=ws={}))});var $i=Ji((VA,ge)=>{ge.exports.fetch=globalThis.fetch;ge.exports.Headers=globalThis.Headers;ge.exports.Request=globalThis.Request;ge.exports.Response=globalThis.Response;ge.exports.FormData=globalThis.FormData;ge.exports.ReadableStream=globalThis.ReadableStream;ge.exports.WritableStream=globalThis.WritableStream;ge.exports.TransformStream=globalThis.TransformStream;ge.exports.CompressionStream=globalThis.CompressionStream;ge.exports.DecompressionStream=globalThis.DecompressionStream;ge.exports.Blob=globalThis.Blob;ge.exports.File=globalThis.File;ge.exports.crypto=globalThis.crypto;ge.exports.btoa=globalThis.btoa;ge.exports.TextEncoder=globalThis.TextEncoder;ge.exports.TextDecoder=globalThis.TextDecoder;ge.exports.URLPattern=globalThis.URLPattern;ge.exports.URL=globalThis.URL;ge.exports.URLSearchParams=globalThis.URLSearchParams;ge.exports.createFetch=()=>globalThis});var Gi=Ji(($A,ye)=>{ye.exports.fetch=globalThis.fetch;ye.exports.Headers=globalThis.Headers;ye.exports.Request=globalThis.Request;ye.exports.Response=globalThis.Response;ye.exports.FormData=globalThis.FormData;ye.exports.ReadableStream=globalThis.ReadableStream;ye.exports.WritableStream=globalThis.WritableStream;ye.exports.TransformStream=globalThis.TransformStream;ye.exports.CompressionStream=globalThis.CompressionStream;ye.exports.DecompressionStream=globalThis.DecompressionStream;ye.exports.Blob=globalThis.Blob;ye.exports.File=globalThis.File;ye.exports.crypto=globalThis.crypto;ye.exports.btoa=globalThis.btoa;ye.exports.TextEncoder=globalThis.TextEncoder;ye.exports.TextDecoder=globalThis.TextDecoder;ye.exports.URLPattern=globalThis.URLPattern;ye.exports.URL=globalThis.URL;ye.exports.URLSearchParams=globalThis.URLSearchParams;ye.exports.createFetch=()=>globalThis});import{env as la}from"cloudflare:workers";var Ki={debug:0,info:1,warn:2,error:3},lt=class e{constructor(t={level:"info"}){this.minLevel=Ki[t.level],this.service=t.service||"twenty-worker"}shouldLog(t){return Ki[t]>=this.minLevel}log(t,n,r,i){if(!this.shouldLog(t))return;let o={level:t,message:n,timestamp:new Date().toISOString(),context:{service:this.service,...r}};i&&(o.error={name:i.name,message:i.message,stack:i.stack}),console.log(JSON.stringify(o))}debug(t,n){this.log("debug",t,n)}info(t,n){this.log("info",t,n)}warn(t,n){this.log("warn",t,n)}error(t,n,r){let i=n instanceof Error?n:void 0;this.log("error",t,r,i)}child(t){let n=new e({level:Object.entries(Ki).find(([i,o])=>o===this.minLevel)?.[0],service:this.service}),r=n.log.bind(n);return n.log=(i,o,s,a)=>{r(i,o,{...t,...s},a)},n}},Lg=new lt({level:la.LOG_LEVEL||"info",service:"twenty-worker"}),ua=e=>{let t=la.LOG_LEVEL||"info";return new lt({level:t,service:`twenty-worker:${e}`})};var Xi=(e,t,n)=>(r,i)=>{let o=-1;return s(0);async function s(a){if(a<=o)throw new Error("next() called multiple times");o=a;let c,l=!1,u;if(e[a]?(u=e[a][0][0],r.req.routeIndex=a):u=a===e.length&&i||void 0,u)try{c=await u(r,()=>s(a+1))}catch(f){if(f instanceof Error&&t)r.error=f,c=await t(f,r),l=!0;else throw f}else r.finalized===!1&&n&&(c=await n(r));return c&&(r.finalized===!1||l)&&(r.res=c),r}};var pa=Symbol();var fa=async(e,t=Object.create(null))=>{let{all:n=!1,dot:r=!1}=t,o=(e instanceof wr?e.raw.headers:e.headers).get("Content-Type");return o?.startsWith("multipart/form-data")||o?.startsWith("application/x-www-form-urlencoded")?Up(e,{all:n,dot:r}):{}};async function Up(e,t){let n=await e.formData();return n?Vp(n,t):{}}function Vp(e,t){let n=Object.create(null);return e.forEach((r,i)=>{t.all||i.endsWith("[]")?$p(n,i,r):n[i]=r}),t.dot&&Object.entries(n).forEach(([r,i])=>{r.includes(".")&&(Gp(n,r,i),delete n[r])}),n}var $p=(e,t,n)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(n):e[t]=[e[t],n]:t.endsWith("[]")?e[t]=[n]:e[t]=n},Gp=(e,t,n)=>{let r=e,i=t.split(".");i.forEach((o,s)=>{s===i.length-1?r[o]=n:((!r[o]||typeof r[o]!="object"||Array.isArray(r[o])||r[o]instanceof File)&&(r[o]=Object.create(null)),r=r[o])})};var eo=e=>{let t=e.split("/");return t[0]===""&&t.shift(),t},da=e=>{let{groups:t,path:n}=qp(e),r=eo(n);return Qp(r,t)},qp=e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(n,r)=>{let i=`@${r}`;return t.push([i,n]),i}),{groups:t,path:e}},Qp=(e,t)=>{for(let n=t.length-1;n>=0;n--){let[r]=t[n];for(let i=e.length-1;i>=0;i--)if(e[i].includes(r)){e[i]=e[i].replace(r,t[n][1]);break}}return e},Or={},ma=(e,t)=>{if(e==="*")return"*";let n=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(n){let r=`${e}#${t}`;return Or[r]||(n[2]?Or[r]=t&&t[0]!==":"&&t[0]!=="*"?[r,n[1],new RegExp(`^${n[2]}(?=/${t})`)]:[e,n[1],new RegExp(`^${n[2]}$`)]:Or[r]=[e,n[1],!0]),Or[r]}return null},_r=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,n=>{try{return t(n)}catch{return n}})}},Bp=e=>_r(e,decodeURI),to=e=>{let t=e.url,n=t.indexOf("/",t.indexOf(":")+4),r=n;for(;r<t.length;r++){let i=t.charCodeAt(r);if(i===37){let o=t.indexOf("?",r),s=t.slice(n,o===-1?void 0:o);return Bp(s.includes("%25")?s.replace(/%25/g,"%2525"):s)}else if(i===63)break}return t.slice(n,r)};var ha=e=>{let t=to(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},qt=(e,t,...n)=>(n.length&&(t=qt(t,...n)),`${e?.[0]==="/"?"":"/"}${e}${t==="/"?"":`${e?.at(-1)==="/"?"":"/"}${t?.[0]==="/"?t.slice(1):t}`}`),Rr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;let t=e.split("/"),n=[],r="";return t.forEach(i=>{if(i!==""&&!/\:/.test(i))r+="/"+i;else if(/\:/.test(i))if(/\?/.test(i)){n.length===0&&r===""?n.push("/"):n.push(r);let o=i.replace("?","");r+="/"+o,n.push(r)}else r+="/"+i}),n.filter((i,o,s)=>s.indexOf(i)===o)},Zi=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?_r(e,no):e):e,ga=(e,t,n)=>{let r;if(!n&&t&&!/[%+]/.test(t)){let s=e.indexOf("?",8);if(s===-1)return;for(e.startsWith(t,s+1)||(s=e.indexOf(`&${t}`,s+1));s!==-1;){let a=e.charCodeAt(s+t.length+1);if(a===61){let c=s+t.length+2,l=e.indexOf("&",c);return Zi(e.slice(c,l===-1?void 0:l))}else if(a==38||isNaN(a))return"";s=e.indexOf(`&${t}`,s+1)}if(r=/[%+]/.test(e),!r)return}let i={};r??=/[%+]/.test(e);let o=e.indexOf("?",8);for(;o!==-1;){let s=e.indexOf("&",o+1),a=e.indexOf("=",o);a>s&&s!==-1&&(a=-1);let c=e.slice(o+1,a===-1?s===-1?void 0:s:a);if(r&&(c=Zi(c)),o=s,c==="")continue;let l;a===-1?l="":(l=e.slice(a+1,s===-1?void 0:s),r&&(l=Zi(l))),n?(i[c]&&Array.isArray(i[c])||(i[c]=[]),i[c].push(l)):i[c]??=l}return t?i[t]:i},ya=ga,Ta=(e,t)=>ga(e,t,!0),no=decodeURIComponent;var Ea=e=>_r(e,no),wr=class{raw;#t;#e;routeIndex=0;path;bodyCache={};constructor(e,t="/",n=[[]]){this.raw=e,this.path=t,this.#e=n,this.#t={}}param(e){return e?this.#r(e):this.#a()}#r(e){let t=this.#e[0][this.routeIndex][1][e],n=this.#o(t);return n&&/\%/.test(n)?Ea(n):n}#a(){let e={},t=Object.keys(this.#e[0][this.routeIndex][1]);for(let n of t){let r=this.#o(this.#e[0][this.routeIndex][1][n]);r!==void 0&&(e[n]=/\%/.test(r)?Ea(r):r)}return e}#o(e){return this.#e[1]?this.#e[1][e]:e}query(e){return ya(this.url,e)}queries(e){return Ta(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;let t={};return this.raw.headers.forEach((n,r)=>{t[r]=n}),t}async parseBody(e){return this.bodyCache.parsedBody??=await fa(this,e)}#i=e=>{let{bodyCache:t,raw:n}=this,r=t[e];if(r)return r;let i=Object.keys(t)[0];return i?t[i].then(o=>(i==="json"&&(o=JSON.stringify(o)),new Response(o)[e]())):t[e]=n[e]()};json(){return this.#i("text").then(e=>JSON.parse(e))}text(){return this.#i("text")}arrayBuffer(){return this.#i("arrayBuffer")}blob(){return this.#i("blob")}formData(){return this.#i("formData")}addValidatedData(e,t){this.#t[e]=t}valid(e){return this.#t[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[pa](){return this.#e}get matchedRoutes(){return this.#e[0].map(([[,e]])=>e)}get routePath(){return this.#e[0].map(([[,e]])=>e)[this.routeIndex].path}};var va={Stringify:1,BeforeStream:2,Stream:3},Hp=(e,t)=>{let n=new String(e);return n.isEscaped=!0,n.callbacks=t,n};var ro=async(e,t,n,r,i)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let o=e.callbacks;if(!o?.length)return Promise.resolve(e);i?i[0]+=e:i=[e];let s=Promise.all(o.map(a=>a({phase:t,buffer:i,context:r}))).then(a=>Promise.all(a.filter(Boolean).map(c=>ro(c,t,!1,r,i))).then(()=>i[0]));return n?Hp(await s,o):s};var Wp="text/plain; charset=UTF-8",io=(e,t)=>({"Content-Type":e,...t}),ba=class{#t;#e;env={};#r;finalized=!1;error;#a;#o;#i;#u;#g;#l;#s;#n;#f;constructor(e,t){this.#t=e,t&&(this.#o=t.executionCtx,this.env=t.env,this.#l=t.notFoundHandler,this.#f=t.path,this.#n=t.matchResult)}get req(){return this.#e??=new wr(this.#t,this.#f,this.#n),this.#e}get event(){if(this.#o&&"respondWith"in this.#o)return this.#o;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#o)return this.#o;throw Error("This context has no ExecutionContext")}get res(){return this.#i||=new Response(null,{headers:this.#s??=new Headers})}set res(e){if(this.#i&&e){e=new Response(e.body,e);for(let[t,n]of this.#i.headers.entries())if(t!=="content-type")if(t==="set-cookie"){let r=this.#i.headers.getSetCookie();e.headers.delete("set-cookie");for(let i of r)e.headers.append("set-cookie",i)}else e.headers.set(t,n)}this.#i=e,this.finalized=!0}render=(...e)=>(this.#g??=t=>this.html(t),this.#g(...e));setLayout=e=>this.#u=e;getLayout=()=>this.#u;setRenderer=e=>{this.#g=e};header=(e,t,n)=>{this.finalized&&(this.#i=new Response(this.#i.body,this.#i));let r=this.#i?this.#i.headers:this.#s??=new Headers;t===void 0?r.delete(e):n?.append?r.append(e,t):r.set(e,t)};status=e=>{this.#a=e};set=(e,t)=>{this.#r??=new Map,this.#r.set(e,t)};get=e=>this.#r?this.#r.get(e):void 0;get var(){return this.#r?Object.fromEntries(this.#r):{}}#p(e,t,n){let r=this.#i?new Headers(this.#i.headers):this.#s??new Headers;if(typeof t=="object"&&"headers"in t){let o=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(let[s,a]of o)s.toLowerCase()==="set-cookie"?r.append(s,a):r.set(s,a)}if(n)for(let[o,s]of Object.entries(n))if(typeof s=="string")r.set(o,s);else{r.delete(o);for(let a of s)r.append(o,a)}let i=typeof t=="number"?t:t?.status??this.#a;return new Response(e,{status:i,headers:r})}newResponse=(...e)=>this.#p(...e);body=(e,t,n)=>this.#p(e,t,n);text=(e,t,n)=>!this.#s&&!this.#a&&!t&&!n&&!this.finalized?new Response(e):this.#p(e,t,io(Wp,n));json=(e,t,n)=>this.#p(JSON.stringify(e),t,io("application/json",n));html=(e,t,n)=>{let r=i=>this.#p(i,t,io("text/html; charset=UTF-8",n));return typeof e=="object"?ro(e,va.Stringify,!1,{}).then(r):r(e)};redirect=(e,t)=>{let n=String(e);return this.header("Location",/[^\x00-\xFF]/.test(n)?encodeURI(n):n),this.newResponse(null,t??302)};notFound=()=>(this.#l??=()=>new Response,this.#l(this))};var ae="ALL",Na="all",xa=["get","post","put","delete","options","patch"],Ar="Can not add a route since the matcher is already built.",Dr=class extends Error{};var Ia="__COMPOSED_HANDLER";var Yp=e=>e.text("404 Not Found",404),Sa=(e,t)=>{if("getResponse"in e){let n=e.getResponse();return t.newResponse(n.body,n)}return console.error(e),t.text("Internal Server Error",500)},wa=class Oa{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#t="/";routes=[];constructor(t={}){[...xa,Na].forEach(o=>{this[o]=(s,...a)=>(typeof s=="string"?this.#t=s:this.#a(o,this.#t,s),a.forEach(c=>{this.#a(o,this.#t,c)}),this)}),this.on=(o,s,...a)=>{for(let c of[s].flat()){this.#t=c;for(let l of[o].flat())a.map(u=>{this.#a(l.toUpperCase(),this.#t,u)})}return this},this.use=(o,...s)=>(typeof o=="string"?this.#t=o:(this.#t="*",s.unshift(o)),s.forEach(a=>{this.#a(ae,this.#t,a)}),this);let{strict:r,...i}=t;Object.assign(this,i),this.getPath=r??!0?t.getPath??to:ha}#e(){let t=new Oa({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,t.#r=this.#r,t.routes=this.routes,t}#r=Yp;errorHandler=Sa;route(t,n){let r=this.basePath(t);return n.routes.map(i=>{let o;n.errorHandler===Sa?o=i.handler:(o=async(s,a)=>(await Xi([],n.errorHandler)(s,()=>i.handler(s,a))).res,o[Ia]=i.handler),r.#a(i.method,i.path,o)}),this}basePath(t){let n=this.#e();return n._basePath=qt(this._basePath,t),n}onError=t=>(this.errorHandler=t,this);notFound=t=>(this.#r=t,this);mount(t,n,r){let i,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?i=c=>c:i=r.replaceRequest));let s=o?c=>{let l=o(c);return Array.isArray(l)?l:[l]}:c=>{let l;try{l=c.executionCtx}catch{}return[c.env,l]};i||=(()=>{let c=qt(this._basePath,t),l=c==="/"?0:c.length;return u=>{let f=new URL(u.url);return f.pathname=f.pathname.slice(l)||"/",new Request(f,u)}})();let a=async(c,l)=>{let u=await n(i(c.req.raw),...s(c));if(u)return u;await l()};return this.#a(ae,qt(t,"*"),a),this}#a(t,n,r){t=t.toUpperCase(),n=qt(this._basePath,n);let i={basePath:this._basePath,path:n,method:t,handler:r};this.router.add(t,n,[r,i]),this.routes.push(i)}#o(t,n){if(t instanceof Error)return this.errorHandler(t,n);throw t}#i(t,n,r,i){if(i==="HEAD")return(async()=>new Response(null,await this.#i(t,n,r,"GET")))();let o=this.getPath(t,{env:r}),s=this.router.match(i,o),a=new ba(t,{path:o,matchResult:s,env:r,executionCtx:n,notFoundHandler:this.#r});if(s[0].length===1){let l;try{l=s[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(u){return this.#o(u,a)}return l instanceof Promise?l.then(u=>u||(a.finalized?a.res:this.#r(a))).catch(u=>this.#o(u,a)):l??this.#r(a)}let c=Xi(s[0],this.errorHandler,this.#r);return(async()=>{try{let l=await c(a);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#o(l,a)}})()}fetch=(t,...n)=>this.#i(t,n[1],n[0],t.method);request=(t,n,r,i)=>t instanceof Request?this.fetch(n?new Request(t,n):t,r,i):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${qt("/",t)}`,n),r,i));fire=()=>{addEventListener("fetch",t=>{t.respondWith(this.#i(t.request,t,void 0,t.request.method))})}};var Lr=[];function oo(e,t){let n=this.buildAllMatchers(),r=(i,o)=>{let s=n[i]||n[ae],a=s[2][o];if(a)return a;let c=o.match(s[0]);if(!c)return[[],Lr];let l=c.indexOf("",1);return[s[1][l],c]};return this.match=r,r(e,t)}var kr="[^/]+",Gn=".*",qn="(?:|/.*)",Qt=Symbol(),zp=new Set(".\\+*[^]$()");function Jp(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Gn||e===qn?1:t===Gn||t===qn?-1:e===kr?1:t===kr?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var _a=class so{#t;#e;#r=Object.create(null);insert(t,n,r,i,o){if(t.length===0){if(this.#t!==void 0)throw Qt;if(o)return;this.#t=n;return}let[s,...a]=t,c=s==="*"?a.length===0?["","",Gn]:["","",kr]:s==="/*"?["","",qn]:s.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(c){let u=c[1],f=c[2]||kr;if(u&&c[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw Qt;if(l=this.#r[f],!l){if(Object.keys(this.#r).some(d=>d!==Gn&&d!==qn))throw Qt;if(o)return;l=this.#r[f]=new so,u!==""&&(l.#e=i.varIndex++)}!o&&u!==""&&r.push([u,l.#e])}else if(l=this.#r[s],!l){if(Object.keys(this.#r).some(u=>u.length>1&&u!==Gn&&u!==qn))throw Qt;if(o)return;l=this.#r[s]=new so}l.insert(a,n,r,i,o)}buildRegExpStr(){let n=Object.keys(this.#r).sort(Jp).map(r=>{let i=this.#r[r];return(typeof i.#e=="number"?`(${r})@${i.#e}`:zp.has(r)?`\\${r}`:r)+i.buildRegExpStr()});return typeof this.#t=="number"&&n.unshift(`#${this.#t}`),n.length===0?"":n.length===1?n[0]:"(?:"+n.join("|")+")"}};var Ra=class{#t={varIndex:0};#e=new _a;insert(e,t,n){let r=[],i=[];for(let s=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{let l=`@\\${s}`;return i[s]=[l,c],s++,a=!0,l}),!a)break}let o=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let s=i.length-1;s>=0;s--){let[a]=i[s];for(let c=o.length-1;c>=0;c--)if(o[c].indexOf(a)!==-1){o[c]=o[c].replace(a,i[s][1]);break}}return this.#e.insert(o,t,r,this.#t,n),r}buildRegExp(){let e=this.#e.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0,n=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(i,o,s)=>o!==void 0?(n[++t]=Number(o),"$()"):(s!==void 0&&(r[Number(s)]=++t),"")),[new RegExp(`^${e}`),n,r]}};var Kp=[/^$/,[],Object.create(null)],Aa=Object.create(null);function Da(e){return Aa[e]??=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,n)=>n?`\\${n}`:"(?:|/.*)")}$`)}function Xp(){Aa=Object.create(null)}function Zp(e){let t=new Ra,n=[];if(e.length===0)return Kp;let r=e.map(l=>[!/\*|\/:/.test(l[0]),...l]).sort(([l,u],[f,d])=>l?1:f?-1:u.length-d.length),i=Object.create(null);for(let l=0,u=-1,f=r.length;l<f;l++){let[d,m,h]=r[l];d?i[m]=[h.map(([I])=>[I,Object.create(null)]),Lr]:u++;let y;try{y=t.insert(m,u,d)}catch(I){throw I===Qt?new Dr(m):I}d||(n[u]=h.map(([I,T])=>{let b=Object.create(null);for(T-=1;T>=0;T--){let[x,N]=y[T];b[x]=N}return[I,b]}))}let[o,s,a]=t.buildRegExp();for(let l=0,u=n.length;l<u;l++)for(let f=0,d=n[l].length;f<d;f++){let m=n[l][f]?.[1];if(!m)continue;let h=Object.keys(m);for(let y=0,I=h.length;y<I;y++)m[h[y]]=a[m[h[y]]]}let c=[];for(let l in s)c[l]=n[s[l]];return[o,c,i]}function pn(e,t){if(e){for(let n of Object.keys(e).sort((r,i)=>i.length-r.length))if(Da(n).test(t))return[...e[n]]}}var Fr=class{name="RegExpRouter";#t;#e;constructor(){this.#t={[ae]:Object.create(null)},this.#e={[ae]:Object.create(null)}}add(e,t,n){let r=this.#t,i=this.#e;if(!r||!i)throw new Error(Ar);r[e]||[r,i].forEach(a=>{a[e]=Object.create(null),Object.keys(a[ae]).forEach(c=>{a[e][c]=[...a[ae][c]]})}),t==="/*"&&(t="*");let o=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let a=Da(t);e===ae?Object.keys(r).forEach(c=>{r[c][t]||=pn(r[c],t)||pn(r[ae],t)||[]}):r[e][t]||=pn(r[e],t)||pn(r[ae],t)||[],Object.keys(r).forEach(c=>{(e===ae||e===c)&&Object.keys(r[c]).forEach(l=>{a.test(l)&&r[c][l].push([n,o])})}),Object.keys(i).forEach(c=>{(e===ae||e===c)&&Object.keys(i[c]).forEach(l=>a.test(l)&&i[c][l].push([n,o]))});return}let s=Rr(t)||[t];for(let a=0,c=s.length;a<c;a++){let l=s[a];Object.keys(i).forEach(u=>{(e===ae||e===u)&&(i[u][l]||=[...pn(r[u],l)||pn(r[ae],l)||[]],i[u][l].push([n,o-c+a+1]))})}}match=oo;buildAllMatchers(){let e=Object.create(null);return Object.keys(this.#e).concat(Object.keys(this.#t)).forEach(t=>{e[t]||=this.#r(t)}),this.#t=this.#e=void 0,Xp(),e}#r(e){let t=[],n=e===ae;return[this.#t,this.#e].forEach(r=>{let i=r[e]?Object.keys(r[e]).map(o=>[o,r[e][o]]):[];i.length!==0?(n||=!0,t.push(...i)):e!==ae&&t.push(...Object.keys(r[ae]).map(o=>[o,r[ae][o]]))}),n?Zp(t):null}};var ao=class{name="SmartRouter";#t=[];#e=[];constructor(e){this.#t=e.routers}add(e,t,n){if(!this.#e)throw new Error(Ar);this.#e.push([e,t,n])}match(e,t){if(!this.#e)throw new Error("Fatal error");let n=this.#t,r=this.#e,i=n.length,o=0,s;for(;o<i;o++){let a=n[o];try{for(let c=0,l=r.length;c<l;c++)a.add(...r[c]);s=a.match(e,t)}catch(c){if(c instanceof Dr)continue;throw c}this.match=a.match.bind(a),this.#t=[a],this.#e=void 0;break}if(o===i)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,s}get activeRouter(){if(this.#e||this.#t.length!==1)throw new Error("No active router has been determined yet.");return this.#t[0]}};var Qn=Object.create(null),La=class ka{#t;#e;#r;#a=0;#o=Qn;constructor(t,n,r){if(this.#e=r||Object.create(null),this.#t=[],t&&n){let i=Object.create(null);i[t]={handler:n,possibleKeys:[],score:0},this.#t=[i]}this.#r=[]}insert(t,n,r){this.#a=++this.#a;let i=this,o=da(n),s=[];for(let a=0,c=o.length;a<c;a++){let l=o[a],u=o[a+1],f=ma(l,u),d=Array.isArray(f)?f[0]:l;if(d in i.#e){i=i.#e[d],f&&s.push(f[1]);continue}i.#e[d]=new ka,f&&(i.#r.push(f),s.push(f[1])),i=i.#e[d]}return i.#t.push({[t]:{handler:r,possibleKeys:s.filter((a,c,l)=>l.indexOf(a)===c),score:this.#a}}),i}#i(t,n,r,i){let o=[];for(let s=0,a=t.#t.length;s<a;s++){let c=t.#t[s],l=c[n]||c[ae],u={};if(l!==void 0&&(l.params=Object.create(null),o.push(l),r!==Qn||i&&i!==Qn))for(let f=0,d=l.possibleKeys.length;f<d;f++){let m=l.possibleKeys[f],h=u[l.score];l.params[m]=i?.[m]&&!h?i[m]:r[m]??i?.[m],u[l.score]=!0}}return o}search(t,n){let r=[];this.#o=Qn;let o=[this],s=eo(n),a=[];for(let c=0,l=s.length;c<l;c++){let u=s[c],f=c===l-1,d=[];for(let m=0,h=o.length;m<h;m++){let y=o[m],I=y.#e[u];I&&(I.#o=y.#o,f?(I.#e["*"]&&r.push(...this.#i(I.#e["*"],t,y.#o)),r.push(...this.#i(I,t,y.#o))):d.push(I));for(let T=0,b=y.#r.length;T<b;T++){let x=y.#r[T],N=y.#o===Qn?{}:{...y.#o};if(x==="*"){let R=y.#e["*"];R&&(r.push(...this.#i(R,t,y.#o)),R.#o=N,d.push(R));continue}let[O,j,w]=x;if(!u&&!(w instanceof RegExp))continue;let U=y.#e[O],B=s.slice(c).join("/");if(w instanceof RegExp){let R=w.exec(B);if(R){if(N[j]=R[0],r.push(...this.#i(U,t,y.#o,N)),Object.keys(U.#e).length){U.#o=N;let $=R[0].match(/\//)?.length??0;(a[$]||=[]).push(U)}continue}}(w===!0||w.test(u))&&(N[j]=u,f?(r.push(...this.#i(U,t,N,y.#o)),U.#e["*"]&&r.push(...this.#i(U.#e["*"],t,N,y.#o))):(U.#o=N,d.push(U)))}}o=d.concat(a.shift()??[])}return r.length>1&&r.sort((c,l)=>c.score-l.score),[r.map(({handler:c,params:l})=>[c,l])]}};var co=class{name="TrieRouter";#t;constructor(){this.#t=new La}add(e,t,n){let r=Rr(t);if(r){for(let i=0,o=r.length;i<o;i++)this.#t.insert(e,r[i],n);return}this.#t.insert(e,t,n)}match(e,t){return this.#t.search(e,t)}};var Bn=class extends wa{constructor(e={}){super(e),this.router=e.router??new ao({routers:[new Fr,new co]})}};var ef=()=>crypto.randomUUID(),Fa=async(e,t)=>{let n=e.req.header("X-Request-Id")||ef(),r=Date.now(),i=e.env.LOG_LEVEL||"info",o=new lt({level:i,service:"twenty-worker"});e.set("requestId",n),e.set("startTime",r),e.set("logger",o),e.header("X-Request-Id",n),i==="debug"&&o.debug("request_start",{requestId:n,method:e.req.method,path:e.req.path,userAgent:e.req.header("User-Agent")}),await t();let s=Date.now()-r;e.header("X-Response-Time",`${s}ms`);let a=e.get("workspaceId"),c=e.get("userId"),l=e.res.status;if(!(e.req.path==="/health"||e.req.path==="/healthz")||i==="debug"){let d={requestId:n,method:e.req.method,path:e.req.path,status:l,responseTime:s,workspaceId:a,userId:c};l>=500?o.error("request_complete",void 0,d):l>=400?o.warn("request_complete",d):o.info("request_complete",d)}},Cr=(e,t)=>{let n=new lt({level:"info",service:"twenty-worker"});return{debug:(r,i)=>{n.debug(r,{requestId:e,workspaceId:t,...i})},info:(r,i)=>{n.info(r,{requestId:e,workspaceId:t,...i})},warn:(r,i)=>{n.warn(r,{requestId:e,workspaceId:t,...i})},error:(r,i,o)=>{n.error(r,i,{requestId:e,workspaceId:t,...o})}}};var Ca=(e,t)=>{let n=Date.now();return{requestId:e,startTime:n,env:t,get logger(){return Cr(e,this.workspace?.id)}}};var Hn=Object.freeze({major:16,minor:8,patch:1,preReleaseTag:null});function W(e,t){if(!!!e)throw new Error(t)}function ke(e){return typeof e=="object"&&e!==null}function de(e,t){if(!!!e)throw new Error(t??"Unexpected invariant triggered.")}var tf=/\r\n|[\n\r]/g;function fn(e,t){let n=0,r=1;for(let i of e.body.matchAll(tf)){if(typeof i.index=="number"||de(!1),i.index>=t)break;n=i.index+i[0].length,r+=1}return{line:r,column:t+1-n}}function lo(e){return Pr(e.source,fn(e.source,e.start))}function Pr(e,t){let n=e.locationOffset.column-1,r="".padStart(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=t.line===1?n:0,c=t.column+a,l=`${e.name}:${s}:${c}
`,u=r.split(/\r\n|[\n\r]/g),f=u[i];if(f.length>120){let d=Math.floor(c/80),m=c%80,h=[];for(let y=0;y<f.length;y+=80)h.push(f.slice(y,y+80));return l+Pa([[`${s} |`,h[0]],...h.slice(1,d+1).map(y=>["|",y]),["|","^".padStart(m)],["|",h[d+1]]])}return l+Pa([[`${s-1} |`,u[i-1]],[`${s} |`,f],["|","^".padStart(c)],[`${s+1} |`,u[i+1]]])}function Pa(e){let t=e.filter(([r,i])=>i!==void 0),n=Math.max(...t.map(([r])=>r.length));return t.map(([r,i])=>r.padStart(n)+(i?" "+i:"")).join(`
`)}function nf(e){let t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}var g=class e extends Error{constructor(t,...n){var r,i,o;let{nodes:s,source:a,positions:c,path:l,originalError:u,extensions:f}=nf(n);super(t),this.name="GraphQLError",this.path=l??void 0,this.originalError=u??void 0,this.nodes=Ma(Array.isArray(s)?s:s?[s]:void 0);let d=Ma((r=this.nodes)===null||r===void 0?void 0:r.map(h=>h.loc).filter(h=>h!=null));this.source=a??(d==null||(i=d[0])===null||i===void 0?void 0:i.source),this.positions=c??d?.map(h=>h.start),this.locations=c&&a?c.map(h=>fn(a,h)):d?.map(h=>fn(h.source,h.start));let m=ke(u?.extensions)?u?.extensions:void 0;this.extensions=(o=f??m)!==null&&o!==void 0?o:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(let n of this.nodes)n.loc&&(t+=`

`+lo(n.loc));else if(this.source&&this.locations)for(let n of this.locations)t+=`

`+Pr(this.source,n);return t}toJSON(){let t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}};function Ma(e){return e===void 0||e.length===0?void 0:e}function me(e,t,n){return new g(`Syntax Error: ${n}`,{source:e,positions:[t]})}var Wn=class{constructor(t,n,r){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}},dn=class{constructor(t,n,r,i,o,s){this.kind=t,this.start=n,this.end=r,this.line=i,this.column=o,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}},uo={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},rf=new Set(Object.keys(uo));function Yn(e){let t=e?.kind;return typeof t=="string"&&rf.has(t)}var Te;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(Te||(Te={}));var P;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(P||(P={}));var p;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(p||(p={}));function Mr(e){return e===9||e===32}function mn(e){return e>=48&&e<=57}function ja(e){return e>=97&&e<=122||e>=65&&e<=90}function zn(e){return ja(e)||e===95}function jr(e){return ja(e)||mn(e)||e===95}function Ua(e){var t;let n=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let s=0;s<e.length;++s){var o;let a=e[s],c=of(a);c!==a.length&&(r=(o=r)!==null&&o!==void 0?o:s,i=s,s!==0&&c<n&&(n=c))}return e.map((s,a)=>a===0?s:s.slice(n)).slice((t=r)!==null&&t!==void 0?t:0,i+1)}function of(e){let t=0;for(;t<e.length&&Mr(e.charCodeAt(t));)++t;return t}function Va(e,t){let n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),i=r.length===1,o=r.length>1&&r.slice(1).every(m=>m.length===0||Mr(m.charCodeAt(0))),s=n.endsWith('\\"""'),a=e.endsWith('"')&&!s,c=e.endsWith("\\"),l=a||c,u=!(t!=null&&t.minimize)&&(!i||e.length>70||l||o||s),f="",d=i&&Mr(e.charCodeAt(0));return(u&&!d||o)&&(f+=`
`),f+=n,(u||l)&&(f+=`
`),'"""'+f+'"""'}var v;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(v||(v={}));var Kn=class{constructor(t){let n=new dn(v.SOF,0,0,0,0);this.source=t,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==v.EOF)do if(t.next)t=t.next;else{let n=sf(this,t.end);t.next=n,n.prev=t,t=n}while(t.kind===v.COMMENT);return t}};function Ga(e){return e===v.BANG||e===v.DOLLAR||e===v.AMP||e===v.PAREN_L||e===v.PAREN_R||e===v.SPREAD||e===v.COLON||e===v.EQUALS||e===v.AT||e===v.BRACKET_L||e===v.BRACKET_R||e===v.BRACE_L||e===v.PIPE||e===v.BRACE_R}function hn(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function Ur(e,t){return qa(e.charCodeAt(t))&&Qa(e.charCodeAt(t+1))}function qa(e){return e>=55296&&e<=56319}function Qa(e){return e>=56320&&e<=57343}function Bt(e,t){let n=e.source.body.codePointAt(t);if(n===void 0)return v.EOF;if(n>=32&&n<=126){let r=String.fromCodePoint(n);return r==='"'?`'"'`:`"${r}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function Ee(e,t,n,r,i){let o=e.line,s=1+n-e.lineStart;return new dn(t,n,r,o,s,i)}function sf(e,t){let n=e.source.body,r=n.length,i=t;for(;i<r;){let o=n.charCodeAt(i);switch(o){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:n.charCodeAt(i+1)===10?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return af(e,i);case 33:return Ee(e,v.BANG,i,i+1);case 36:return Ee(e,v.DOLLAR,i,i+1);case 38:return Ee(e,v.AMP,i,i+1);case 40:return Ee(e,v.PAREN_L,i,i+1);case 41:return Ee(e,v.PAREN_R,i,i+1);case 46:if(n.charCodeAt(i+1)===46&&n.charCodeAt(i+2)===46)return Ee(e,v.SPREAD,i,i+3);break;case 58:return Ee(e,v.COLON,i,i+1);case 61:return Ee(e,v.EQUALS,i,i+1);case 64:return Ee(e,v.AT,i,i+1);case 91:return Ee(e,v.BRACKET_L,i,i+1);case 93:return Ee(e,v.BRACKET_R,i,i+1);case 123:return Ee(e,v.BRACE_L,i,i+1);case 124:return Ee(e,v.PIPE,i,i+1);case 125:return Ee(e,v.BRACE_R,i,i+1);case 34:return n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34?df(e,i):lf(e,i)}if(mn(o)||o===45)return cf(e,i,o);if(zn(o))return mf(e,i);throw me(e.source,i,o===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:hn(o)||Ur(n,i)?`Unexpected character: ${Bt(e,i)}.`:`Invalid character: ${Bt(e,i)}.`)}return Ee(e,v.EOF,r,r)}function af(e,t){let n=e.source.body,r=n.length,i=t+1;for(;i<r;){let o=n.charCodeAt(i);if(o===10||o===13)break;if(hn(o))++i;else if(Ur(n,i))i+=2;else break}return Ee(e,v.COMMENT,t,i,n.slice(t+1,i))}function cf(e,t,n){let r=e.source.body,i=t,o=n,s=!1;if(o===45&&(o=r.charCodeAt(++i)),o===48){if(o=r.charCodeAt(++i),mn(o))throw me(e.source,i,`Invalid number, unexpected digit after 0: ${Bt(e,i)}.`)}else i=po(e,i,o),o=r.charCodeAt(i);if(o===46&&(s=!0,o=r.charCodeAt(++i),i=po(e,i,o),o=r.charCodeAt(i)),(o===69||o===101)&&(s=!0,o=r.charCodeAt(++i),(o===43||o===45)&&(o=r.charCodeAt(++i)),i=po(e,i,o),o=r.charCodeAt(i)),o===46||zn(o))throw me(e.source,i,`Invalid number, expected digit but got: ${Bt(e,i)}.`);return Ee(e,s?v.FLOAT:v.INT,t,i,r.slice(t,i))}function po(e,t,n){if(!mn(n))throw me(e.source,t,`Invalid number, expected digit but got: ${Bt(e,t)}.`);let r=e.source.body,i=t+1;for(;mn(r.charCodeAt(i));)++i;return i}function lf(e,t){let n=e.source.body,r=n.length,i=t+1,o=i,s="";for(;i<r;){let a=n.charCodeAt(i);if(a===34)return s+=n.slice(o,i),Ee(e,v.STRING,t,i+1,s);if(a===92){s+=n.slice(o,i);let c=n.charCodeAt(i+1)===117?n.charCodeAt(i+2)===123?uf(e,i):pf(e,i):ff(e,i);s+=c.value,i+=c.size,o=i;continue}if(a===10||a===13)break;if(hn(a))++i;else if(Ur(n,i))i+=2;else throw me(e.source,i,`Invalid character within String: ${Bt(e,i)}.`)}throw me(e.source,i,"Unterminated string.")}function uf(e,t){let n=e.source.body,r=0,i=3;for(;i<12;){let o=n.charCodeAt(t+i++);if(o===125){if(i<5||!hn(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|Jn(o),r<0)break}throw me(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+i)}".`)}function pf(e,t){let n=e.source.body,r=$a(n,t+2);if(hn(r))return{value:String.fromCodePoint(r),size:6};if(qa(r)&&n.charCodeAt(t+6)===92&&n.charCodeAt(t+7)===117){let i=$a(n,t+8);if(Qa(i))return{value:String.fromCodePoint(r,i),size:12}}throw me(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function $a(e,t){return Jn(e.charCodeAt(t))<<12|Jn(e.charCodeAt(t+1))<<8|Jn(e.charCodeAt(t+2))<<4|Jn(e.charCodeAt(t+3))}function Jn(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function ff(e,t){let n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw me(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function df(e,t){let n=e.source.body,r=n.length,i=e.lineStart,o=t+3,s=o,a="",c=[];for(;o<r;){let l=n.charCodeAt(o);if(l===34&&n.charCodeAt(o+1)===34&&n.charCodeAt(o+2)===34){a+=n.slice(s,o),c.push(a);let u=Ee(e,v.BLOCK_STRING,t,o+3,Ua(c).join(`
`));return e.line+=c.length-1,e.lineStart=i,u}if(l===92&&n.charCodeAt(o+1)===34&&n.charCodeAt(o+2)===34&&n.charCodeAt(o+3)===34){a+=n.slice(s,o),s=o+1,o+=4;continue}if(l===10||l===13){a+=n.slice(s,o),c.push(a),l===13&&n.charCodeAt(o+1)===10?o+=2:++o,a="",s=o,i=o;continue}if(hn(l))++o;else if(Ur(n,o))o+=2;else throw me(e.source,o,`Invalid character within String: ${Bt(e,o)}.`)}throw me(e.source,o,"Unterminated string.")}function mf(e,t){let n=e.source.body,r=n.length,i=t+1;for(;i<r;){let o=n.charCodeAt(i);if(jr(o))++i;else break}return Ee(e,v.NAME,t,i,n.slice(t,i))}function S(e){return Vr(e,[])}function Vr(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return hf(e,t);default:return String(e)}}function hf(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";let n=[...t,e];if(gf(e)){let r=e.toJSON();if(r!==e)return typeof r=="string"?r:Vr(r,n)}else if(Array.isArray(e))return Tf(e,n);return yf(e,n)}function gf(e){return typeof e.toJSON=="function"}function yf(e,t){let n=Object.entries(e);return n.length===0?"{}":t.length>2?"["+Ef(e)+"]":"{ "+n.map(([i,o])=>i+": "+Vr(o,t)).join(", ")+" }"}function Tf(e,t){if(e.length===0)return"[]";if(t.length>2)return"[Array]";let n=Math.min(10,e.length),r=e.length-n,i=[];for(let o=0;o<n;++o)i.push(Vr(e[o],t));return r===1?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}function Ef(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){let n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}var Fe=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(t,n){return t instanceof n}:function(t,n){if(t instanceof n)return!0;if(typeof t=="object"&&t!==null){var r;let i=n.prototype[Symbol.toStringTag],o=Symbol.toStringTag in t?t[Symbol.toStringTag]:(r=t.constructor)===null||r===void 0?void 0:r.name;if(i===o){let s=S(t);throw new Error(`Cannot use ${i} "${s}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};var dt=class{constructor(t,n="GraphQL request",r={line:1,column:1}){typeof t=="string"||W(!1,`Body must be a string. Received: ${S(t)}.`),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||W(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||W(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}};function Ba(e){return Fe(e,dt)}function Nt(e,t){return new fo(e,t).parseDocument()}var fo=class{constructor(t,n={}){let r=Ba(t)?t:new dt(t);this._lexer=new Kn(r),this._options=n,this._tokenCounter=0}parseName(){let t=this.expectToken(v.NAME);return this.node(t,{kind:p.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:p.DOCUMENT,definitions:this.many(v.SOF,this.parseDefinition,v.EOF)})}parseDefinition(){if(this.peek(v.BRACE_L))return this.parseOperationDefinition();let t=this.peekDescription(),n=t?this._lexer.lookahead():this._lexer.token;if(n.kind===v.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw me(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){let t=this._lexer.token;if(this.peek(v.BRACE_L))return this.node(t,{kind:p.OPERATION_DEFINITION,operation:Te.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let n=this.parseOperationType(),r;return this.peek(v.NAME)&&(r=this.parseName()),this.node(t,{kind:p.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let t=this.expectToken(v.NAME);switch(t.value){case"query":return Te.QUERY;case"mutation":return Te.MUTATION;case"subscription":return Te.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(v.PAREN_L,this.parseVariableDefinition,v.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:p.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(v.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(v.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let t=this._lexer.token;return this.expectToken(v.DOLLAR),this.node(t,{kind:p.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:p.SELECTION_SET,selections:this.many(v.BRACE_L,this.parseSelection,v.BRACE_R)})}parseSelection(){return this.peek(v.SPREAD)?this.parseFragment():this.parseField()}parseField(){let t=this._lexer.token,n=this.parseName(),r,i;return this.expectOptionalToken(v.COLON)?(r=n,i=this.parseName()):i=n,this.node(t,{kind:p.FIELD,alias:r,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(v.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){let n=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(v.PAREN_L,n,v.PAREN_R)}parseArgument(t=!1){let n=this._lexer.token,r=this.parseName();return this.expectToken(v.COLON),this.node(n,{kind:p.ARGUMENT,name:r,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let t=this._lexer.token;this.expectToken(v.SPREAD);let n=this.expectOptionalKeyword("on");return!n&&this.peek(v.NAME)?this.node(t,{kind:p.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:p.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:p.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:p.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){let n=this._lexer.token;switch(n.kind){case v.BRACKET_L:return this.parseList(t);case v.BRACE_L:return this.parseObject(t);case v.INT:return this.advanceLexer(),this.node(n,{kind:p.INT,value:n.value});case v.FLOAT:return this.advanceLexer(),this.node(n,{kind:p.FLOAT,value:n.value});case v.STRING:case v.BLOCK_STRING:return this.parseStringLiteral();case v.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:p.BOOLEAN,value:!0});case"false":return this.node(n,{kind:p.BOOLEAN,value:!1});case"null":return this.node(n,{kind:p.NULL});default:return this.node(n,{kind:p.ENUM,value:n.value})}case v.DOLLAR:if(t)if(this.expectToken(v.DOLLAR),this._lexer.token.kind===v.NAME){let r=this._lexer.token.value;throw me(this._lexer.source,n.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:p.STRING,value:t.value,block:t.kind===v.BLOCK_STRING})}parseList(t){let n=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:p.LIST,values:this.any(v.BRACKET_L,n,v.BRACKET_R)})}parseObject(t){let n=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:p.OBJECT,fields:this.any(v.BRACE_L,n,v.BRACE_R)})}parseObjectField(t){let n=this._lexer.token,r=this.parseName();return this.expectToken(v.COLON),this.node(n,{kind:p.OBJECT_FIELD,name:r,value:this.parseValueLiteral(t)})}parseDirectives(t){let n=[];for(;this.peek(v.AT);)n.push(this.parseDirective(t));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){let n=this._lexer.token;return this.expectToken(v.AT),this.node(n,{kind:p.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){let t=this._lexer.token,n;if(this.expectOptionalToken(v.BRACKET_L)){let r=this.parseTypeReference();this.expectToken(v.BRACKET_R),n=this.node(t,{kind:p.LIST_TYPE,type:r})}else n=this.parseNamedType();return this.expectOptionalToken(v.BANG)?this.node(t,{kind:p.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:p.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(v.STRING)||this.peek(v.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");let r=this.parseConstDirectives(),i=this.many(v.BRACE_L,this.parseOperationTypeDefinition,v.BRACE_R);return this.node(t,{kind:p.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:i})}parseOperationTypeDefinition(){let t=this._lexer.token,n=this.parseOperationType();this.expectToken(v.COLON);let r=this.parseNamedType();return this.node(t,{kind:p.OPERATION_TYPE_DEFINITION,operation:n,type:r})}parseScalarTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");let r=this.parseName(),i=this.parseConstDirectives();return this.node(t,{kind:p.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i})}parseObjectTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");let r=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(t,{kind:p.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(v.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(v.BRACE_L,this.parseFieldDefinition,v.BRACE_R)}parseFieldDefinition(){let t=this._lexer.token,n=this.parseDescription(),r=this.parseName(),i=this.parseArgumentDefs();this.expectToken(v.COLON);let o=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(t,{kind:p.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s})}parseArgumentDefs(){return this.optionalMany(v.PAREN_L,this.parseInputValueDef,v.PAREN_R)}parseInputValueDef(){let t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(v.COLON);let i=this.parseTypeReference(),o;this.expectOptionalToken(v.EQUALS)&&(o=this.parseConstValueLiteral());let s=this.parseConstDirectives();return this.node(t,{kind:p.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s})}parseInterfaceTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");let r=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(t,{kind:p.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s})}parseUnionTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");let r=this.parseName(),i=this.parseConstDirectives(),o=this.parseUnionMemberTypes();return this.node(t,{kind:p.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o})}parseUnionMemberTypes(){return this.expectOptionalToken(v.EQUALS)?this.delimitedMany(v.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");let r=this.parseName(),i=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();return this.node(t,{kind:p.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o})}parseEnumValuesDefinition(){return this.optionalMany(v.BRACE_L,this.parseEnumValueDefinition,v.BRACE_R)}parseEnumValueDefinition(){let t=this._lexer.token,n=this.parseDescription(),r=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(t,{kind:p.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw me(this._lexer.source,this._lexer.token.start,`${$r(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");let r=this.parseName(),i=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();return this.node(t,{kind:p.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o})}parseInputFieldsDefinition(){return this.optionalMany(v.BRACE_L,this.parseInputValueDef,v.BRACE_R)}parseTypeSystemExtension(){let t=this._lexer.lookahead();if(t.kind===v.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let n=this.parseConstDirectives(),r=this.optionalMany(v.BRACE_L,this.parseOperationTypeDefinition,v.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:p.SCHEMA_EXTENSION,directives:n,operationTypes:r})}parseScalarTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let n=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(t,{kind:p.SCALAR_TYPE_EXTENSION,name:n,directives:r})}parseObjectTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:p.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o})}parseInterfaceTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:p.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o})}parseUnionTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let n=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:p.UNION_TYPE_EXTENSION,name:n,directives:r,types:i})}parseEnumTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let n=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:p.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i})}parseInputObjectTypeExtension(){let t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let n=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:p.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i})}parseDirectiveDefinition(){let t=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(v.AT);let r=this.parseName(),i=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let s=this.parseDirectiveLocations();return this.node(t,{kind:p.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,repeatable:o,locations:s})}parseDirectiveLocations(){return this.delimitedMany(v.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let t=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(P,n.value))return n;throw this.unexpected(t)}node(t,n){return this._options.noLocation!==!0&&(n.loc=new Wn(t,this._lexer.lastToken,this._lexer.source)),n}peek(t){return this._lexer.token.kind===t}expectToken(t){let n=this._lexer.token;if(n.kind===t)return this.advanceLexer(),n;throw me(this._lexer.source,n.start,`Expected ${Ha(t)}, found ${$r(n)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){let n=this._lexer.token;if(n.kind===v.NAME&&n.value===t)this.advanceLexer();else throw me(this._lexer.source,n.start,`Expected "${t}", found ${$r(n)}.`)}expectOptionalKeyword(t){let n=this._lexer.token;return n.kind===v.NAME&&n.value===t?(this.advanceLexer(),!0):!1}unexpected(t){let n=t??this._lexer.token;return me(this._lexer.source,n.start,`Unexpected ${$r(n)}.`)}any(t,n,r){this.expectToken(t);let i=[];for(;!this.expectOptionalToken(r);)i.push(n.call(this));return i}optionalMany(t,n,r){if(this.expectOptionalToken(t)){let i=[];do i.push(n.call(this));while(!this.expectOptionalToken(r));return i}return[]}many(t,n,r){this.expectToken(t);let i=[];do i.push(n.call(this));while(!this.expectOptionalToken(r));return i}delimitedMany(t,n){this.expectOptionalToken(t);let r=[];do r.push(n.call(this));while(this.expectOptionalToken(t));return r}advanceLexer(){let{maxTokens:t}=this._options,n=this._lexer.advance();if(t!==void 0&&n.kind!==v.EOF&&(++this._tokenCounter,this._tokenCounter>t))throw me(this._lexer.source,n.start,`Document contains more that ${t} tokens. Parsing aborted.`)}};function $r(e){let t=e.value;return Ha(e.kind)+(t!=null?` "${t}"`:"")}function Ha(e){return Ga(e)?`"${e}"`:e}function Le(e,t){let[n,r]=t?[e,t]:[void 0,e],i=" Did you mean ";n&&(i+=n+" ");let o=r.map(c=>`"${c}"`);switch(o.length){case 0:return"";case 1:return i+o[0]+"?";case 2:return i+o[0]+" or "+o[1]+"?"}let s=o.slice(0,5),a=s.pop();return i+s.join(", ")+", or "+a+"?"}function mo(e){return e}function qe(e,t){let n=Object.create(null);for(let r of e)n[t(r)]=r;return n}function Xn(e,t,n){let r=Object.create(null);for(let i of e)r[t(i)]=n(i);return r}function Ze(e,t){let n=Object.create(null);for(let r of Object.keys(e))n[r]=t(e[r],r);return n}function gn(e,t){let n=0,r=0;for(;n<e.length&&r<t.length;){let i=e.charCodeAt(n),o=t.charCodeAt(r);if(Gr(i)&&Gr(o)){let s=0;do++n,s=s*10+i-ho,i=e.charCodeAt(n);while(Gr(i)&&s>0);let a=0;do++r,a=a*10+o-ho,o=t.charCodeAt(r);while(Gr(o)&&a>0);if(s<a)return-1;if(s>a)return 1}else{if(i<o)return-1;if(i>o)return 1;++n,++r}}return e.length-t.length}var ho=48,vf=57;function Gr(e){return!isNaN(e)&&ho<=e&&e<=vf}function Ce(e,t){let n=Object.create(null),r=new go(e),i=Math.floor(e.length*.4)+1;for(let o of t){let s=r.measure(o,i);s!==void 0&&(n[o]=s)}return Object.keys(n).sort((o,s)=>{let a=n[o]-n[s];return a!==0?a:gn(o,s)})}var go=class{constructor(t){this._input=t,this._inputLowerCase=t.toLowerCase(),this._inputArray=Wa(this._inputLowerCase),this._rows=[new Array(t.length+1).fill(0),new Array(t.length+1).fill(0),new Array(t.length+1).fill(0)]}measure(t,n){if(this._input===t)return 0;let r=t.toLowerCase();if(this._inputLowerCase===r)return 1;let i=Wa(r),o=this._inputArray;if(i.length<o.length){let u=i;i=o,o=u}let s=i.length,a=o.length;if(s-a>n)return;let c=this._rows;for(let u=0;u<=a;u++)c[0][u]=u;for(let u=1;u<=s;u++){let f=c[(u-1)%3],d=c[u%3],m=d[0]=u;for(let h=1;h<=a;h++){let y=i[u-1]===o[h-1]?0:1,I=Math.min(f[h]+1,d[h-1]+1,f[h-1]+y);if(u>1&&h>1&&i[u-1]===o[h-2]&&i[u-2]===o[h-1]){let T=c[(u-2)%3][h-2];I=Math.min(I,T+1)}I<m&&(m=I),d[h]=I}if(m>n)return}let l=c[s%3][a];return l<=n?l:void 0}};function Wa(e){let t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=e.charCodeAt(r);return n}function Pe(e){if(e==null)return Object.create(null);if(Object.getPrototypeOf(e)===null)return e;let t=Object.create(null);for(let[n,r]of Object.entries(e))t[n]=r;return t}function Ya(e){return`"${e.replace(bf,Nf)}"`}var bf=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Nf(e){return xf[e.charCodeAt(0)]}var xf=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var Ht=Object.freeze({});function et(e,t,n=uo){let r=new Map;for(let T of Object.values(p))r.set(T,Wt(t,T));let i,o=Array.isArray(e),s=[e],a=-1,c=[],l=e,u,f,d=[],m=[];do{a++;let T=a===s.length,b=T&&c.length!==0;if(T){if(u=m.length===0?void 0:d[d.length-1],l=f,f=m.pop(),b)if(o){l=l.slice();let N=0;for(let[O,j]of c){let w=O-N;j===null?(l.splice(w,1),N++):l[w]=j}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(let[N,O]of c)l[N]=O}a=i.index,s=i.keys,c=i.edits,o=i.inArray,i=i.prev}else if(f){if(u=o?a:s[a],l=f[u],l==null)continue;d.push(u)}let x;if(!Array.isArray(l)){var h,y;Yn(l)||W(!1,`Invalid AST Node: ${S(l)}.`);let N=T?(h=r.get(l.kind))===null||h===void 0?void 0:h.leave:(y=r.get(l.kind))===null||y===void 0?void 0:y.enter;if(x=N?.call(t,l,u,f,d,m),x===Ht)break;if(x===!1){if(!T){d.pop();continue}}else if(x!==void 0&&(c.push([u,x]),!T))if(Yn(x))l=x;else{d.pop();continue}}if(x===void 0&&b&&c.push([u,l]),T)d.pop();else{var I;i={inArray:o,index:a,keys:s,edits:c,prev:i},o=Array.isArray(l),s=o?l:(I=n[l.kind])!==null&&I!==void 0?I:[],a=-1,c=[],f&&m.push(f),f=l}}while(i!==void 0);return c.length!==0?c[c.length-1][1]:e}function Zn(e){let t=new Array(e.length).fill(null),n=Object.create(null);for(let r of Object.values(p)){let i=!1,o=new Array(e.length).fill(void 0),s=new Array(e.length).fill(void 0);for(let c=0;c<e.length;++c){let{enter:l,leave:u}=Wt(e[c],r);i||(i=l!=null||u!=null),o[c]=l,s[c]=u}if(!i)continue;let a={enter(...c){let l=c[0];for(let f=0;f<e.length;f++)if(t[f]===null){var u;let d=(u=o[f])===null||u===void 0?void 0:u.apply(e[f],c);if(d===!1)t[f]=l;else if(d===Ht)t[f]=Ht;else if(d!==void 0)return d}},leave(...c){let l=c[0];for(let f=0;f<e.length;f++)if(t[f]===null){var u;let d=(u=s[f])===null||u===void 0?void 0:u.apply(e[f],c);if(d===Ht)t[f]=Ht;else if(d!==void 0&&d!==!1)return d}else t[f]===l&&(t[f]=null)}};n[r]=a}return n}function Wt(e,t){let n=e[t];return typeof n=="object"?n:typeof n=="function"?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}function J(e){return et(e,Sf)}var If=80,Sf={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>L(e.definitions,`

`)},OperationDefinition:{leave(e){let t=Y("(",L(e.variableDefinitions,", "),")"),n=L([e.operation,L([e.name,t]),L(e.directives," ")]," ");return(n==="query"?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r})=>e+": "+t+Y(" = ",n)+Y(" ",L(r," "))},SelectionSet:{leave:({selections:e})=>tt(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:i}){let o=Y("",e,": ")+t,s=o+Y("(",L(n,", "),")");return s.length>If&&(s=o+Y(`(
`,qr(L(n,`
`)),`
)`)),L([s,L(r," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Y(" ",L(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>L(["...",Y("on ",e),L(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:i})=>`fragment ${e}${Y("(",L(n,", "),")")} on ${t} ${Y("",L(r," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?Va(e):Ya(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+L(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+L(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Y("(",L(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>Y("",e,`
`)+L(["schema",L(t," "),tt(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>Y("",e,`
`)+L(["scalar",t,L(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Y("",e,`
`)+L(["type",t,Y("implements ",L(n," & ")),L(r," "),tt(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:r,directives:i})=>Y("",e,`
`)+t+(za(n)?Y(`(
`,qr(L(n,`
`)),`
)`):Y("(",L(n,", "),")"))+": "+r+Y(" ",L(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:r,directives:i})=>Y("",e,`
`)+L([t+": "+n,Y("= ",r),L(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Y("",e,`
`)+L(["interface",t,Y("implements ",L(n," & ")),L(r," "),tt(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:r})=>Y("",e,`
`)+L(["union",t,L(n," "),Y("= ",L(r," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:r})=>Y("",e,`
`)+L(["enum",t,L(n," "),tt(r)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>Y("",e,`
`)+L([t,L(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:r})=>Y("",e,`
`)+L(["input",t,L(n," "),tt(r)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:r,locations:i})=>Y("",e,`
`)+"directive @"+t+(za(n)?Y(`(
`,qr(L(n,`
`)),`
)`):Y("(",L(n,", "),")"))+(r?" repeatable":"")+" on "+L(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>L(["extend schema",L(e," "),tt(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>L(["extend scalar",e,L(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>L(["extend type",e,Y("implements ",L(t," & ")),L(n," "),tt(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>L(["extend interface",e,Y("implements ",L(t," & ")),L(n," "),tt(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>L(["extend union",e,L(t," "),Y("= ",L(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>L(["extend enum",e,L(t," "),tt(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>L(["extend input",e,L(t," "),tt(n)]," ")}};function L(e,t=""){var n;return(n=e?.filter(r=>r).join(t))!==null&&n!==void 0?n:""}function tt(e){return Y(`{
`,qr(L(e,`
`)),`
}`)}function Y(e,t,n=""){return t!=null&&t!==""?e+t+n:""}function qr(e){return Y("  ",e.replace(/\n/g,`
  `))}function za(e){var t;return(t=e?.some(n=>n.includes(`
`)))!==null&&t!==void 0?t:!1}function er(e,t){switch(e.kind){case p.NULL:return null;case p.INT:return parseInt(e.value,10);case p.FLOAT:return parseFloat(e.value);case p.STRING:case p.ENUM:case p.BOOLEAN:return e.value;case p.LIST:return e.values.map(n=>er(n,t));case p.OBJECT:return Xn(e.fields,n=>n.name.value,n=>er(n.value,t));case p.VARIABLE:return t?.[e.name.value]}}function Ve(e){if(e!=null||W(!1,"Must provide name."),typeof e=="string"||W(!1,"Expected name to be a string."),e.length===0)throw new g("Expected name to be a non-empty string.");for(let t=1;t<e.length;++t)if(!jr(e.charCodeAt(t)))throw new g(`Names must only contain [_a-zA-Z0-9] but "${e}" does not.`);if(!zn(e.charCodeAt(0)))throw new g(`Names must start with [_a-zA-Z] but "${e}" does not.`);return e}function yo(e){if(e==="true"||e==="false"||e==="null")throw new g(`Enum values cannot be named: ${e}`);return Ve(e)}function Tn(e){return le(e)||k(e)||G(e)||Z(e)||z(e)||Q(e)||H(e)||F(e)}function le(e){return Fe(e,Ie)}function k(e){return Fe(e,ne)}function G(e){return Fe(e,_e)}function Z(e){return Fe(e,ze)}function z(e){return Fe(e,xe)}function Q(e){return Fe(e,Me)}function H(e){return Fe(e,ee)}function F(e){return Fe(e,V)}function Se(e){return le(e)||z(e)||Q(e)||tr(e)&&Se(e.ofType)}function mt(e){return le(e)||k(e)||G(e)||Z(e)||z(e)||tr(e)&&mt(e.ofType)}function re(e){return le(e)||z(e)}function Qe(e){return k(e)||G(e)||Z(e)}function Re(e){return G(e)||Z(e)}var ee=class{constructor(t){Tn(t)||W(!1,`Expected ${S(t)} to be a GraphQL type.`),this.ofType=t}get[Symbol.toStringTag](){return"GraphQLList"}toString(){return"["+String(this.ofType)+"]"}toJSON(){return this.toString()}},V=class{constructor(t){To(t)||W(!1,`Expected ${S(t)} to be a GraphQL nullable type.`),this.ofType=t}get[Symbol.toStringTag](){return"GraphQLNonNull"}toString(){return String(this.ofType)+"!"}toJSON(){return this.toString()}};function tr(e){return H(e)||F(e)}function To(e){return Tn(e)&&!F(e)}function xt(e){if(e)return F(e)?e.ofType:e}function ut(e){return le(e)||k(e)||G(e)||Z(e)||z(e)||Q(e)}function ce(e){if(e){let t=e;for(;tr(t);)t=t.ofType;return t}}function Br(e){return typeof e=="function"?e():e}function Hr(e){return typeof e=="function"?e():e}var Ie=class{constructor(t){var n,r,i,o;let s=(n=t.parseValue)!==null&&n!==void 0?n:mo;this.name=Ve(t.name),this.description=t.description,this.specifiedByURL=t.specifiedByURL,this.serialize=(r=t.serialize)!==null&&r!==void 0?r:mo,this.parseValue=s,this.parseLiteral=(i=t.parseLiteral)!==null&&i!==void 0?i:(a,c)=>s(er(a,c)),this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(o=t.extensionASTNodes)!==null&&o!==void 0?o:[],t.specifiedByURL==null||typeof t.specifiedByURL=="string"||W(!1,`${this.name} must provide "specifiedByURL" as a string, but got: ${S(t.specifiedByURL)}.`),t.serialize==null||typeof t.serialize=="function"||W(!1,`${this.name} must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.`),t.parseLiteral&&(typeof t.parseValue=="function"&&typeof t.parseLiteral=="function"||W(!1,`${this.name} must provide both "parseValue" and "parseLiteral" functions.`))}get[Symbol.toStringTag](){return"GraphQLScalarType"}toConfig(){return{name:this.name,description:this.description,specifiedByURL:this.specifiedByURL,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}},ne=class{constructor(t){var n;this.name=Ve(t.name),this.description=t.description,this.isTypeOf=t.isTypeOf,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._fields=()=>Ka(t),this._interfaces=()=>Ja(t),t.isTypeOf==null||typeof t.isTypeOf=="function"||W(!1,`${this.name} must provide "isTypeOf" as a function, but got: ${S(t.isTypeOf)}.`)}get[Symbol.toStringTag](){return"GraphQLObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:Xa(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}};function Ja(e){var t;let n=Br((t=e.interfaces)!==null&&t!==void 0?t:[]);return Array.isArray(n)||W(!1,`${e.name} interfaces must be an Array or a function which returns an Array.`),n}function Ka(e){let t=Hr(e.fields);return yn(t)||W(!1,`${e.name} fields must be an object with field names as keys or a function which returns such an object.`),Ze(t,(n,r)=>{var i;yn(n)||W(!1,`${e.name}.${r} field config must be an object.`),n.resolve==null||typeof n.resolve=="function"||W(!1,`${e.name}.${r} field resolver must be a function if provided, but got: ${S(n.resolve)}.`);let o=(i=n.args)!==null&&i!==void 0?i:{};return yn(o)||W(!1,`${e.name}.${r} args must be an object with argument names as keys.`),{name:Ve(r),description:n.description,type:n.type,args:Eo(o),resolve:n.resolve,subscribe:n.subscribe,deprecationReason:n.deprecationReason,extensions:Pe(n.extensions),astNode:n.astNode}})}function Eo(e){return Object.entries(e).map(([t,n])=>({name:Ve(t),description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:Pe(n.extensions),astNode:n.astNode}))}function yn(e){return ke(e)&&!Array.isArray(e)}function Xa(e){return Ze(e,t=>({description:t.description,type:t.type,args:vo(t.args),resolve:t.resolve,subscribe:t.subscribe,deprecationReason:t.deprecationReason,extensions:t.extensions,astNode:t.astNode}))}function vo(e){return Xn(e,t=>t.name,t=>({description:t.description,type:t.type,defaultValue:t.defaultValue,deprecationReason:t.deprecationReason,extensions:t.extensions,astNode:t.astNode}))}function ht(e){return F(e.type)&&e.defaultValue===void 0}var _e=class{constructor(t){var n;this.name=Ve(t.name),this.description=t.description,this.resolveType=t.resolveType,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._fields=Ka.bind(void 0,t),this._interfaces=Ja.bind(void 0,t),t.resolveType==null||typeof t.resolveType=="function"||W(!1,`${this.name} must provide "resolveType" as a function, but got: ${S(t.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLInterfaceType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:Xa(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}},ze=class{constructor(t){var n;this.name=Ve(t.name),this.description=t.description,this.resolveType=t.resolveType,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._types=wf.bind(void 0,t),t.resolveType==null||typeof t.resolveType=="function"||W(!1,`${this.name} must provide "resolveType" as a function, but got: ${S(t.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLUnionType"}getTypes(){return typeof this._types=="function"&&(this._types=this._types()),this._types}toConfig(){return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}};function wf(e){let t=Br(e.types);return Array.isArray(t)||W(!1,`Must provide Array of types or a function which returns such an array for Union ${e.name}.`),t}var xe=class{constructor(t){var n;this.name=Ve(t.name),this.description=t.description,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._values=Of(this.name,t.values),this._valueLookup=new Map(this._values.map(r=>[r.value,r])),this._nameLookup=qe(this._values,r=>r.name)}get[Symbol.toStringTag](){return"GraphQLEnumType"}getValues(){return this._values}getValue(t){return this._nameLookup[t]}serialize(t){let n=this._valueLookup.get(t);if(n===void 0)throw new g(`Enum "${this.name}" cannot represent value: ${S(t)}`);return n.name}parseValue(t){if(typeof t!="string"){let r=S(t);throw new g(`Enum "${this.name}" cannot represent non-string value: ${r}.`+Qr(this,r))}let n=this.getValue(t);if(n==null)throw new g(`Value "${t}" does not exist in "${this.name}" enum.`+Qr(this,t));return n.value}parseLiteral(t,n){if(t.kind!==p.ENUM){let i=J(t);throw new g(`Enum "${this.name}" cannot represent non-enum value: ${i}.`+Qr(this,i),{nodes:t})}let r=this.getValue(t.value);if(r==null){let i=J(t);throw new g(`Value "${i}" does not exist in "${this.name}" enum.`+Qr(this,i),{nodes:t})}return r.value}toConfig(){let t=Xn(this.getValues(),n=>n.name,n=>({description:n.description,value:n.value,deprecationReason:n.deprecationReason,extensions:n.extensions,astNode:n.astNode}));return{name:this.name,description:this.description,values:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}};function Qr(e,t){let n=e.getValues().map(i=>i.name),r=Ce(t,n);return Le("the enum value",r)}function Of(e,t){return yn(t)||W(!1,`${e} values must be an object with value names as keys.`),Object.entries(t).map(([n,r])=>(yn(r)||W(!1,`${e}.${n} must refer to an object with a "value" key representing an internal value but got: ${S(r)}.`),{name:yo(n),description:r.description,value:r.value!==void 0?r.value:n,deprecationReason:r.deprecationReason,extensions:Pe(r.extensions),astNode:r.astNode}))}var Me=class{constructor(t){var n;this.name=Ve(t.name),this.description=t.description,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._fields=_f.bind(void 0,t)}get[Symbol.toStringTag](){return"GraphQLInputObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}toConfig(){let t=Ze(this.getFields(),n=>({description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:n.extensions,astNode:n.astNode}));return{name:this.name,description:this.description,fields:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}};function _f(e){let t=Hr(e.fields);return yn(t)||W(!1,`${e.name} fields must be an object with field names as keys or a function which returns such an object.`),Ze(t,(n,r)=>(!("resolve"in n)||W(!1,`${e.name}.${r} field has a resolve property, but Input Types cannot define resolvers.`),{name:Ve(r),description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:Pe(n.extensions),astNode:n.astNode}))}function En(e){return F(e.type)&&e.defaultValue===void 0}function nr(e,t){return e===t?!0:F(e)&&F(t)||H(e)&&H(t)?nr(e.ofType,t.ofType):!1}function gt(e,t,n){return t===n?!0:F(n)?F(t)?gt(e,t.ofType,n.ofType):!1:F(t)?gt(e,t.ofType,n):H(n)?H(t)?gt(e,t.ofType,n.ofType):!1:H(t)?!1:Re(n)&&(G(t)||k(t))&&e.isSubType(n,t)}function Wr(e,t,n){return t===n?!0:Re(t)?Re(n)?e.getPossibleTypes(t).some(r=>e.isSubType(n,r)):e.isSubType(t,n):Re(n)?e.isSubType(n,t):!1}var rr=2147483647,ir=-2147483648,It=new Ie({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize(e){let t=or(e);if(typeof t=="boolean")return t?1:0;let n=t;if(typeof t=="string"&&t!==""&&(n=Number(t)),typeof n!="number"||!Number.isInteger(n))throw new g(`Int cannot represent non-integer value: ${S(t)}`);if(n>rr||n<ir)throw new g("Int cannot represent non 32-bit signed integer value: "+S(t));return n},parseValue(e){if(typeof e!="number"||!Number.isInteger(e))throw new g(`Int cannot represent non-integer value: ${S(e)}`);if(e>rr||e<ir)throw new g(`Int cannot represent non 32-bit signed integer value: ${e}`);return e},parseLiteral(e){if(e.kind!==p.INT)throw new g(`Int cannot represent non-integer value: ${J(e)}`,{nodes:e});let t=parseInt(e.value,10);if(t>rr||t<ir)throw new g(`Int cannot represent non 32-bit signed integer value: ${e.value}`,{nodes:e});return t}}),vn=new Ie({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize(e){let t=or(e);if(typeof t=="boolean")return t?1:0;let n=t;if(typeof t=="string"&&t!==""&&(n=Number(t)),typeof n!="number"||!Number.isFinite(n))throw new g(`Float cannot represent non numeric value: ${S(t)}`);return n},parseValue(e){if(typeof e!="number"||!Number.isFinite(e))throw new g(`Float cannot represent non numeric value: ${S(e)}`);return e},parseLiteral(e){if(e.kind!==p.FLOAT&&e.kind!==p.INT)throw new g(`Float cannot represent non numeric value: ${J(e)}`,e);return parseFloat(e.value)}}),X=new Ie({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize(e){let t=or(e);if(typeof t=="string")return t;if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"&&Number.isFinite(t))return t.toString();throw new g(`String cannot represent value: ${S(e)}`)},parseValue(e){if(typeof e!="string")throw new g(`String cannot represent a non string value: ${S(e)}`);return e},parseLiteral(e){if(e.kind!==p.STRING)throw new g(`String cannot represent a non string value: ${J(e)}`,{nodes:e});return e.value}}),pe=new Ie({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize(e){let t=or(e);if(typeof t=="boolean")return t;if(Number.isFinite(t))return t!==0;throw new g(`Boolean cannot represent a non boolean value: ${S(t)}`)},parseValue(e){if(typeof e!="boolean")throw new g(`Boolean cannot represent a non boolean value: ${S(e)}`);return e},parseLiteral(e){if(e.kind!==p.BOOLEAN)throw new g(`Boolean cannot represent a non boolean value: ${J(e)}`,{nodes:e});return e.value}}),St=new Ie({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize(e){let t=or(e);if(typeof t=="string")return t;if(Number.isInteger(t))return String(t);throw new g(`ID cannot represent value: ${S(e)}`)},parseValue(e){if(typeof e=="string")return e;if(typeof e=="number"&&Number.isInteger(e))return e.toString();throw new g(`ID cannot represent value: ${S(e)}`)},parseLiteral(e){if(e.kind!==p.STRING&&e.kind!==p.INT)throw new g("ID cannot represent a non-string and non-integer value: "+J(e),{nodes:e});return e.value}}),Yt=Object.freeze([X,It,vn,pe,St]);function nt(e){return Yt.some(({name:t})=>e.name===t)}function or(e){if(ke(e)){if(typeof e.valueOf=="function"){let t=e.valueOf();if(!ke(t))return t}if(typeof e.toJSON=="function")return e.toJSON()}return e}function bn(e){return Fe(e,Ae)}var Ae=class{constructor(t){var n,r;this.name=Ve(t.name),this.description=t.description,this.locations=t.locations,this.isRepeatable=(n=t.isRepeatable)!==null&&n!==void 0?n:!1,this.extensions=Pe(t.extensions),this.astNode=t.astNode,Array.isArray(t.locations)||W(!1,`@${t.name} locations must be an Array.`);let i=(r=t.args)!==null&&r!==void 0?r:{};ke(i)&&!Array.isArray(i)||W(!1,`@${t.name} args must be an object with argument names as keys.`),this.args=Eo(i)}get[Symbol.toStringTag](){return"GraphQLDirective"}toConfig(){return{name:this.name,description:this.description,locations:this.locations,args:vo(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}}toString(){return"@"+this.name}toJSON(){return this.toString()}},zt=new Ae({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[P.FIELD,P.FRAGMENT_SPREAD,P.INLINE_FRAGMENT],args:{if:{type:new V(pe),description:"Included when true."}}}),Jt=new Ae({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[P.FIELD,P.FRAGMENT_SPREAD,P.INLINE_FRAGMENT],args:{if:{type:new V(pe),description:"Skipped when true."}}}),bo="No longer supported",yt=new Ae({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[P.FIELD_DEFINITION,P.ARGUMENT_DEFINITION,P.INPUT_FIELD_DEFINITION,P.ENUM_VALUE],args:{reason:{type:X,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:bo}}}),sr=new Ae({name:"specifiedBy",description:"Exposes a URL that specifies the behavior of this scalar.",locations:[P.SCALAR],args:{url:{type:new V(X),description:"The URL that specifies the behavior of this scalar."}}}),je=Object.freeze([zt,Jt,yt,sr]);function Nn(e){return je.some(({name:t})=>t===e.name)}function Yr(e){return typeof e=="object"&&typeof e?.[Symbol.iterator]=="function"}function Kt(e,t){if(F(t)){let n=Kt(e,t.ofType);return n?.kind===p.NULL?null:n}if(e===null)return{kind:p.NULL};if(e===void 0)return null;if(H(t)){let n=t.ofType;if(Yr(e)){let r=[];for(let i of e){let o=Kt(i,n);o!=null&&r.push(o)}return{kind:p.LIST,values:r}}return Kt(e,n)}if(Q(t)){if(!ke(e))return null;let n=[];for(let r of Object.values(t.getFields())){let i=Kt(e[r.name],r.type);i&&n.push({kind:p.OBJECT_FIELD,name:{kind:p.NAME,value:r.name},value:i})}return{kind:p.OBJECT,fields:n}}if(re(t)){let n=t.serialize(e);if(n==null)return null;if(typeof n=="boolean")return{kind:p.BOOLEAN,value:n};if(typeof n=="number"&&Number.isFinite(n)){let r=String(n);return Za.test(r)?{kind:p.INT,value:r}:{kind:p.FLOAT,value:r}}if(typeof n=="string")return z(t)?{kind:p.ENUM,value:n}:t===St&&Za.test(n)?{kind:p.INT,value:n}:{kind:p.STRING,value:n};throw new TypeError(`Cannot convert value to AST: ${S(n)}.`)}de(!1,"Unexpected input type: "+S(t))}var Za=/^-?(?:0|[1-9][0-9]*)$/;var xn=new ne({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:()=>({description:{type:X,resolve:e=>e.description},types:{description:"A list of all types supported by this server.",type:new V(new ee(new V(Be))),resolve(e){return Object.values(e.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new V(Be),resolve:e=>e.getQueryType()},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:Be,resolve:e=>e.getMutationType()},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:Be,resolve:e=>e.getSubscriptionType()},directives:{description:"A list of all directives supported by this server.",type:new V(new ee(new V(zr))),resolve:e=>e.getDirectives()}})}),zr=new ne({name:"__Directive",description:`A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.

In some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.`,fields:()=>({name:{type:new V(X),resolve:e=>e.name},description:{type:X,resolve:e=>e.description},isRepeatable:{type:new V(pe),resolve:e=>e.isRepeatable},locations:{type:new V(new ee(new V(Jr))),resolve:e=>e.locations},args:{type:new V(new ee(new V(In))),args:{includeDeprecated:{type:pe,defaultValue:!1}},resolve(e,{includeDeprecated:t}){return t?e.args:e.args.filter(n=>n.deprecationReason==null)}}})}),Jr=new xe({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:P.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:P.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:P.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:P.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:P.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:P.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:P.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:P.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:P.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:P.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:P.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:P.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:P.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:P.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:P.UNION,description:"Location adjacent to a union definition."},ENUM:{value:P.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:P.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:P.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:P.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}}),Be=new ne({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:()=>({kind:{type:new V(Zr),resolve(e){if(le(e))return ve.SCALAR;if(k(e))return ve.OBJECT;if(G(e))return ve.INTERFACE;if(Z(e))return ve.UNION;if(z(e))return ve.ENUM;if(Q(e))return ve.INPUT_OBJECT;if(H(e))return ve.LIST;if(F(e))return ve.NON_NULL;de(!1,`Unexpected type: "${S(e)}".`)}},name:{type:X,resolve:e=>"name"in e?e.name:void 0},description:{type:X,resolve:e=>"description"in e?e.description:void 0},specifiedByURL:{type:X,resolve:e=>"specifiedByURL"in e?e.specifiedByURL:void 0},fields:{type:new ee(new V(Kr)),args:{includeDeprecated:{type:pe,defaultValue:!1}},resolve(e,{includeDeprecated:t}){if(k(e)||G(e)){let n=Object.values(e.getFields());return t?n:n.filter(r=>r.deprecationReason==null)}}},interfaces:{type:new ee(new V(Be)),resolve(e){if(k(e)||G(e))return e.getInterfaces()}},possibleTypes:{type:new ee(new V(Be)),resolve(e,t,n,{schema:r}){if(Re(e))return r.getPossibleTypes(e)}},enumValues:{type:new ee(new V(Xr)),args:{includeDeprecated:{type:pe,defaultValue:!1}},resolve(e,{includeDeprecated:t}){if(z(e)){let n=e.getValues();return t?n:n.filter(r=>r.deprecationReason==null)}}},inputFields:{type:new ee(new V(In)),args:{includeDeprecated:{type:pe,defaultValue:!1}},resolve(e,{includeDeprecated:t}){if(Q(e)){let n=Object.values(e.getFields());return t?n:n.filter(r=>r.deprecationReason==null)}}},ofType:{type:Be,resolve:e=>"ofType"in e?e.ofType:void 0}})}),Kr=new ne({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:()=>({name:{type:new V(X),resolve:e=>e.name},description:{type:X,resolve:e=>e.description},args:{type:new V(new ee(new V(In))),args:{includeDeprecated:{type:pe,defaultValue:!1}},resolve(e,{includeDeprecated:t}){return t?e.args:e.args.filter(n=>n.deprecationReason==null)}},type:{type:new V(Be),resolve:e=>e.type},isDeprecated:{type:new V(pe),resolve:e=>e.deprecationReason!=null},deprecationReason:{type:X,resolve:e=>e.deprecationReason}})}),In=new ne({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:()=>({name:{type:new V(X),resolve:e=>e.name},description:{type:X,resolve:e=>e.description},type:{type:new V(Be),resolve:e=>e.type},defaultValue:{type:X,description:"A GraphQL-formatted string representing the default value for this input value.",resolve(e){let{type:t,defaultValue:n}=e,r=Kt(n,t);return r?J(r):null}},isDeprecated:{type:new V(pe),resolve:e=>e.deprecationReason!=null},deprecationReason:{type:X,resolve:e=>e.deprecationReason}})}),Xr=new ne({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:()=>({name:{type:new V(X),resolve:e=>e.name},description:{type:X,resolve:e=>e.description},isDeprecated:{type:new V(pe),resolve:e=>e.deprecationReason!=null},deprecationReason:{type:X,resolve:e=>e.deprecationReason}})}),ve;(function(e){e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.INPUT_OBJECT="INPUT_OBJECT",e.LIST="LIST",e.NON_NULL="NON_NULL"})(ve||(ve={}));var Zr=new xe({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:ve.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:ve.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:ve.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:ve.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:ve.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:ve.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:ve.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:ve.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}}),wt={name:"__schema",type:new V(xn),description:"Access the current type schema of this server.",args:[],resolve:(e,t,n,{schema:r})=>r,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},Ot={name:"__type",type:Be,description:"Request the type information of a single type.",args:[{name:"name",description:void 0,type:new V(X),defaultValue:void 0,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0}],resolve:(e,{name:t},n,{schema:r})=>r.getType(t),deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},_t={name:"__typename",type:new V(X),description:"The name of the current Object type at runtime.",args:[],resolve:(e,t,n,{parentType:r})=>r.name,deprecationReason:void 0,extensions:Object.create(null),astNode:void 0},Xt=Object.freeze([xn,zr,Jr,Be,Kr,In,Xr,Zr]);function Rt(e){return Xt.some(({name:t})=>e.name===t)}function Tt(e){return Fe(e,it)}function ei(e){if(!Tt(e))throw new Error(`Expected ${S(e)} to be a GraphQL schema.`);return e}var it=class{constructor(t){var n,r;this.__validationErrors=t.assumeValid===!0?[]:void 0,ke(t)||W(!1,"Must provide configuration object."),!t.types||Array.isArray(t.types)||W(!1,`"types" must be Array if provided but got: ${S(t.types)}.`),!t.directives||Array.isArray(t.directives)||W(!1,`"directives" must be Array if provided but got: ${S(t.directives)}.`),this.description=t.description,this.extensions=Pe(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(n=t.extensionASTNodes)!==null&&n!==void 0?n:[],this._queryType=t.query,this._mutationType=t.mutation,this._subscriptionType=t.subscription,this._directives=(r=t.directives)!==null&&r!==void 0?r:je;let i=new Set(t.types);if(t.types!=null)for(let o of t.types)i.delete(o),rt(o,i);this._queryType!=null&&rt(this._queryType,i),this._mutationType!=null&&rt(this._mutationType,i),this._subscriptionType!=null&&rt(this._subscriptionType,i);for(let o of this._directives)if(bn(o))for(let s of o.args)rt(s.type,i);rt(xn,i),this._typeMap=Object.create(null),this._subTypeMap=Object.create(null),this._implementationsMap=Object.create(null);for(let o of i){if(o==null)continue;let s=o.name;if(s||W(!1,"One of the provided types for building the Schema is missing a name."),this._typeMap[s]!==void 0)throw new Error(`Schema must contain uniquely named types but contains multiple types named "${s}".`);if(this._typeMap[s]=o,G(o)){for(let a of o.getInterfaces())if(G(a)){let c=this._implementationsMap[a.name];c===void 0&&(c=this._implementationsMap[a.name]={objects:[],interfaces:[]}),c.interfaces.push(o)}}else if(k(o)){for(let a of o.getInterfaces())if(G(a)){let c=this._implementationsMap[a.name];c===void 0&&(c=this._implementationsMap[a.name]={objects:[],interfaces:[]}),c.objects.push(o)}}}}get[Symbol.toStringTag](){return"GraphQLSchema"}getQueryType(){return this._queryType}getMutationType(){return this._mutationType}getSubscriptionType(){return this._subscriptionType}getRootType(t){switch(t){case Te.QUERY:return this.getQueryType();case Te.MUTATION:return this.getMutationType();case Te.SUBSCRIPTION:return this.getSubscriptionType()}}getTypeMap(){return this._typeMap}getType(t){return this.getTypeMap()[t]}getPossibleTypes(t){return Z(t)?t.getTypes():this.getImplementations(t).objects}getImplementations(t){let n=this._implementationsMap[t.name];return n??{objects:[],interfaces:[]}}isSubType(t,n){let r=this._subTypeMap[t.name];if(r===void 0){if(r=Object.create(null),Z(t))for(let i of t.getTypes())r[i.name]=!0;else{let i=this.getImplementations(t);for(let o of i.objects)r[o.name]=!0;for(let o of i.interfaces)r[o.name]=!0}this._subTypeMap[t.name]=r}return r[n.name]!==void 0}getDirectives(){return this._directives}getDirective(t){return this.getDirectives().find(n=>n.name===t)}toConfig(){return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:Object.values(this.getTypeMap()),directives:this.getDirectives(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,assumeValid:this.__validationErrors!==void 0}}};function rt(e,t){let n=ce(e);if(!t.has(n)){if(t.add(n),Z(n))for(let r of n.getTypes())rt(r,t);else if(k(n)||G(n)){for(let r of n.getInterfaces())rt(r,t);for(let r of Object.values(n.getFields())){rt(r.type,t);for(let i of r.args)rt(i.type,t)}}else if(Q(n))for(let r of Object.values(n.getFields()))rt(r.type,t)}return t}function Io(e){if(ei(e),e.__validationErrors)return e.__validationErrors;let t=new xo(e);Rf(t),Af(t),Df(t);let n=t.getErrors();return e.__validationErrors=n,n}function Sn(e){let t=Io(e);if(t.length!==0)throw new Error(t.map(n=>n.message).join(`

`))}var xo=class{constructor(t){this._errors=[],this.schema=t}reportError(t,n){let r=Array.isArray(n)?n.filter(Boolean):n;this._errors.push(new g(t,{nodes:r}))}getErrors(){return this._errors}};function Rf(e){let t=e.schema,n=t.getQueryType();if(!n)e.reportError("Query root type must be provided.",t.astNode);else if(!k(n)){var r;e.reportError(`Query root type must be Object type, it cannot be ${S(n)}.`,(r=No(t,Te.QUERY))!==null&&r!==void 0?r:n.astNode)}let i=t.getMutationType();if(i&&!k(i)){var o;e.reportError(`Mutation root type must be Object type if provided, it cannot be ${S(i)}.`,(o=No(t,Te.MUTATION))!==null&&o!==void 0?o:i.astNode)}let s=t.getSubscriptionType();if(s&&!k(s)){var a;e.reportError(`Subscription root type must be Object type if provided, it cannot be ${S(s)}.`,(a=No(t,Te.SUBSCRIPTION))!==null&&a!==void 0?a:s.astNode)}}function No(e,t){var n;return(n=[e.astNode,...e.extensionASTNodes].flatMap(r=>{var i;return(i=r?.operationTypes)!==null&&i!==void 0?i:[]}).find(r=>r.operation===t))===null||n===void 0?void 0:n.type}function Af(e){for(let n of e.schema.getDirectives()){if(!bn(n)){e.reportError(`Expected directive but got: ${S(n)}.`,n?.astNode);continue}Zt(e,n);for(let r of n.args)if(Zt(e,r),Se(r.type)||e.reportError(`The type of @${n.name}(${r.name}:) must be Input Type but got: ${S(r.type)}.`,r.astNode),ht(r)&&r.deprecationReason!=null){var t;e.reportError(`Required argument @${n.name}(${r.name}:) cannot be deprecated.`,[So(r.astNode),(t=r.astNode)===null||t===void 0?void 0:t.type])}}}function Zt(e,t){t.name.startsWith("__")&&e.reportError(`Name "${t.name}" must not begin with "__", which is reserved by GraphQL introspection.`,t.astNode)}function Df(e){let t=Mf(e),n=e.schema.getTypeMap();for(let r of Object.values(n)){if(!ut(r)){e.reportError(`Expected GraphQL named type but got: ${S(r)}.`,r.astNode);continue}Rt(r)||Zt(e,r),k(r)||G(r)?(ec(e,r),tc(e,r)):Z(r)?Ff(e,r):z(r)?Cf(e,r):Q(r)&&(Pf(e,r),t(r))}}function ec(e,t){let n=Object.values(t.getFields());n.length===0&&e.reportError(`Type ${t.name} must define one or more fields.`,[t.astNode,...t.extensionASTNodes]);for(let s of n){if(Zt(e,s),!mt(s.type)){var r;e.reportError(`The type of ${t.name}.${s.name} must be Output Type but got: ${S(s.type)}.`,(r=s.astNode)===null||r===void 0?void 0:r.type)}for(let a of s.args){let c=a.name;if(Zt(e,a),!Se(a.type)){var i;e.reportError(`The type of ${t.name}.${s.name}(${c}:) must be Input Type but got: ${S(a.type)}.`,(i=a.astNode)===null||i===void 0?void 0:i.type)}if(ht(a)&&a.deprecationReason!=null){var o;e.reportError(`Required argument ${t.name}.${s.name}(${c}:) cannot be deprecated.`,[So(a.astNode),(o=a.astNode)===null||o===void 0?void 0:o.type])}}}}function tc(e,t){let n=Object.create(null);for(let r of t.getInterfaces()){if(!G(r)){e.reportError(`Type ${S(t)} must only implement Interface types, it cannot implement ${S(r)}.`,ar(t,r));continue}if(t===r){e.reportError(`Type ${t.name} cannot implement itself because it would create a circular reference.`,ar(t,r));continue}if(n[r.name]){e.reportError(`Type ${t.name} can only implement ${r.name} once.`,ar(t,r));continue}n[r.name]=!0,kf(e,t,r),Lf(e,t,r)}}function Lf(e,t,n){let r=t.getFields();for(let c of Object.values(n.getFields())){let l=c.name,u=r[l];if(!u){e.reportError(`Interface field ${n.name}.${l} expected but ${t.name} does not provide it.`,[c.astNode,t.astNode,...t.extensionASTNodes]);continue}if(!gt(e.schema,u.type,c.type)){var i,o;e.reportError(`Interface field ${n.name}.${l} expects type ${S(c.type)} but ${t.name}.${l} is type ${S(u.type)}.`,[(i=c.astNode)===null||i===void 0?void 0:i.type,(o=u.astNode)===null||o===void 0?void 0:o.type])}for(let f of c.args){let d=f.name,m=u.args.find(h=>h.name===d);if(!m){e.reportError(`Interface field argument ${n.name}.${l}(${d}:) expected but ${t.name}.${l} does not provide it.`,[f.astNode,u.astNode]);continue}if(!nr(f.type,m.type)){var s,a;e.reportError(`Interface field argument ${n.name}.${l}(${d}:) expects type ${S(f.type)} but ${t.name}.${l}(${d}:) is type ${S(m.type)}.`,[(s=f.astNode)===null||s===void 0?void 0:s.type,(a=m.astNode)===null||a===void 0?void 0:a.type])}}for(let f of u.args){let d=f.name;!c.args.find(h=>h.name===d)&&ht(f)&&e.reportError(`Object field ${t.name}.${l} includes required argument ${d} that is missing from the Interface field ${n.name}.${l}.`,[f.astNode,c.astNode])}}}function kf(e,t,n){let r=t.getInterfaces();for(let i of n.getInterfaces())r.includes(i)||e.reportError(i===t?`Type ${t.name} cannot implement ${n.name} because it would create a circular reference.`:`Type ${t.name} must implement ${i.name} because it is implemented by ${n.name}.`,[...ar(n,i),...ar(t,n)])}function Ff(e,t){let n=t.getTypes();n.length===0&&e.reportError(`Union type ${t.name} must define one or more member types.`,[t.astNode,...t.extensionASTNodes]);let r=Object.create(null);for(let i of n){if(r[i.name]){e.reportError(`Union type ${t.name} can only include type ${i.name} once.`,nc(t,i.name));continue}r[i.name]=!0,k(i)||e.reportError(`Union type ${t.name} can only include Object types, it cannot include ${S(i)}.`,nc(t,String(i)))}}function Cf(e,t){let n=t.getValues();n.length===0&&e.reportError(`Enum type ${t.name} must define one or more values.`,[t.astNode,...t.extensionASTNodes]);for(let r of n)Zt(e,r)}function Pf(e,t){let n=Object.values(t.getFields());n.length===0&&e.reportError(`Input Object type ${t.name} must define one or more fields.`,[t.astNode,...t.extensionASTNodes]);for(let o of n){if(Zt(e,o),!Se(o.type)){var r;e.reportError(`The type of ${t.name}.${o.name} must be Input Type but got: ${S(o.type)}.`,(r=o.astNode)===null||r===void 0?void 0:r.type)}if(En(o)&&o.deprecationReason!=null){var i;e.reportError(`Required input field ${t.name}.${o.name} cannot be deprecated.`,[So(o.astNode),(i=o.astNode)===null||i===void 0?void 0:i.type])}}}function Mf(e){let t=Object.create(null),n=[],r=Object.create(null);return i;function i(o){if(t[o.name])return;t[o.name]=!0,r[o.name]=n.length;let s=Object.values(o.getFields());for(let a of s)if(F(a.type)&&Q(a.type.ofType)){let c=a.type.ofType,l=r[c.name];if(n.push(a),l===void 0)i(c);else{let u=n.slice(l),f=u.map(d=>d.name).join(".");e.reportError(`Cannot reference Input Object "${c.name}" within itself through a series of non-null fields: "${f}".`,u.map(d=>d.astNode))}n.pop()}r[o.name]=void 0}}function ar(e,t){let{astNode:n,extensionASTNodes:r}=e;return(n!=null?[n,...r]:r).flatMap(o=>{var s;return(s=o.interfaces)!==null&&s!==void 0?s:[]}).filter(o=>o.name.value===t.name)}function nc(e,t){let{astNode:n,extensionASTNodes:r}=e;return(n!=null?[n,...r]:r).flatMap(o=>{var s;return(s=o.types)!==null&&s!==void 0?s:[]}).filter(o=>o.name.value===t)}function So(e){var t;return e==null||(t=e.directives)===null||t===void 0?void 0:t.find(n=>n.name.value===yt.name)}function oe(e,t){switch(t.kind){case p.LIST_TYPE:{let n=oe(e,t.type);return n&&new ee(n)}case p.NON_NULL_TYPE:{let n=oe(e,t.type);return n&&new V(n)}case p.NAMED_TYPE:return e.getType(t.name.value)}}var en=class{constructor(t,n,r){this._schema=t,this._typeStack=[],this._parentTypeStack=[],this._inputTypeStack=[],this._fieldDefStack=[],this._defaultValueStack=[],this._directive=null,this._argument=null,this._enumValue=null,this._getFieldDef=r??jf,n&&(Se(n)&&this._inputTypeStack.push(n),Qe(n)&&this._parentTypeStack.push(n),mt(n)&&this._typeStack.push(n))}get[Symbol.toStringTag](){return"TypeInfo"}getType(){if(this._typeStack.length>0)return this._typeStack[this._typeStack.length-1]}getParentType(){if(this._parentTypeStack.length>0)return this._parentTypeStack[this._parentTypeStack.length-1]}getInputType(){if(this._inputTypeStack.length>0)return this._inputTypeStack[this._inputTypeStack.length-1]}getParentInputType(){if(this._inputTypeStack.length>1)return this._inputTypeStack[this._inputTypeStack.length-2]}getFieldDef(){if(this._fieldDefStack.length>0)return this._fieldDefStack[this._fieldDefStack.length-1]}getDefaultValue(){if(this._defaultValueStack.length>0)return this._defaultValueStack[this._defaultValueStack.length-1]}getDirective(){return this._directive}getArgument(){return this._argument}getEnumValue(){return this._enumValue}enter(t){let n=this._schema;switch(t.kind){case p.SELECTION_SET:{let i=ce(this.getType());this._parentTypeStack.push(Qe(i)?i:void 0);break}case p.FIELD:{let i=this.getParentType(),o,s;i&&(o=this._getFieldDef(n,i,t),o&&(s=o.type)),this._fieldDefStack.push(o),this._typeStack.push(mt(s)?s:void 0);break}case p.DIRECTIVE:this._directive=n.getDirective(t.name.value);break;case p.OPERATION_DEFINITION:{let i=n.getRootType(t.operation);this._typeStack.push(k(i)?i:void 0);break}case p.INLINE_FRAGMENT:case p.FRAGMENT_DEFINITION:{let i=t.typeCondition,o=i?oe(n,i):ce(this.getType());this._typeStack.push(mt(o)?o:void 0);break}case p.VARIABLE_DEFINITION:{let i=oe(n,t.type);this._inputTypeStack.push(Se(i)?i:void 0);break}case p.ARGUMENT:{var r;let i,o,s=(r=this.getDirective())!==null&&r!==void 0?r:this.getFieldDef();s&&(i=s.args.find(a=>a.name===t.name.value),i&&(o=i.type)),this._argument=i,this._defaultValueStack.push(i?i.defaultValue:void 0),this._inputTypeStack.push(Se(o)?o:void 0);break}case p.LIST:{let i=xt(this.getInputType()),o=H(i)?i.ofType:i;this._defaultValueStack.push(void 0),this._inputTypeStack.push(Se(o)?o:void 0);break}case p.OBJECT_FIELD:{let i=ce(this.getInputType()),o,s;Q(i)&&(s=i.getFields()[t.name.value],s&&(o=s.type)),this._defaultValueStack.push(s?s.defaultValue:void 0),this._inputTypeStack.push(Se(o)?o:void 0);break}case p.ENUM:{let i=ce(this.getInputType()),o;z(i)&&(o=i.getValue(t.value)),this._enumValue=o;break}default:}}leave(t){switch(t.kind){case p.SELECTION_SET:this._parentTypeStack.pop();break;case p.FIELD:this._fieldDefStack.pop(),this._typeStack.pop();break;case p.DIRECTIVE:this._directive=null;break;case p.OPERATION_DEFINITION:case p.INLINE_FRAGMENT:case p.FRAGMENT_DEFINITION:this._typeStack.pop();break;case p.VARIABLE_DEFINITION:this._inputTypeStack.pop();break;case p.ARGUMENT:this._argument=null,this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case p.LIST:case p.OBJECT_FIELD:this._defaultValueStack.pop(),this._inputTypeStack.pop();break;case p.ENUM:this._enumValue=null;break;default:}}};function jf(e,t,n){let r=n.name.value;if(r===wt.name&&e.getQueryType()===t)return wt;if(r===Ot.name&&e.getQueryType()===t)return Ot;if(r===_t.name&&Qe(t))return _t;if(k(t)||G(t))return t.getFields()[r]}function cr(e,t){return{enter(...n){let r=n[0];e.enter(r);let i=Wt(t,r.kind).enter;if(i){let o=i.apply(t,n);return o!==void 0&&(e.leave(r),Yn(o)&&e.enter(o)),o}},leave(...n){let r=n[0],i=Wt(t,r.kind).leave,o;return i&&(o=i.apply(t,n)),e.leave(r),o}}}function ti(e){return lr(e)||ur(e)||pr(e)}function lr(e){return e.kind===p.OPERATION_DEFINITION||e.kind===p.FRAGMENT_DEFINITION}function ur(e){return e.kind===p.SCHEMA_DEFINITION||ot(e)||e.kind===p.DIRECTIVE_DEFINITION}function ot(e){return e.kind===p.SCALAR_TYPE_DEFINITION||e.kind===p.OBJECT_TYPE_DEFINITION||e.kind===p.INTERFACE_TYPE_DEFINITION||e.kind===p.UNION_TYPE_DEFINITION||e.kind===p.ENUM_TYPE_DEFINITION||e.kind===p.INPUT_OBJECT_TYPE_DEFINITION}function pr(e){return e.kind===p.SCHEMA_EXTENSION||tn(e)}function tn(e){return e.kind===p.SCALAR_TYPE_EXTENSION||e.kind===p.OBJECT_TYPE_EXTENSION||e.kind===p.INTERFACE_TYPE_EXTENSION||e.kind===p.UNION_TYPE_EXTENSION||e.kind===p.ENUM_TYPE_EXTENSION||e.kind===p.INPUT_OBJECT_TYPE_EXTENSION}function wo(e){return{Document(t){for(let n of t.definitions)if(!lr(n)){let r=n.kind===p.SCHEMA_DEFINITION||n.kind===p.SCHEMA_EXTENSION?"schema":'"'+n.name.value+'"';e.reportError(new g(`The ${r} definition is not executable.`,{nodes:n}))}return!1}}}function Oo(e){return{Field(t){let n=e.getParentType();if(n&&!e.getFieldDef()){let i=e.getSchema(),o=t.name.value,s=Le("to use an inline fragment on",Uf(i,n,o));s===""&&(s=Le(Vf(n,o))),e.reportError(new g(`Cannot query field "${o}" on type "${n.name}".`+s,{nodes:t}))}}}}function Uf(e,t,n){if(!Re(t))return[];let r=new Set,i=Object.create(null);for(let s of e.getPossibleTypes(t))if(s.getFields()[n]){r.add(s),i[s.name]=1;for(let a of s.getInterfaces()){var o;a.getFields()[n]&&(r.add(a),i[a.name]=((o=i[a.name])!==null&&o!==void 0?o:0)+1)}}return[...r].sort((s,a)=>{let c=i[a.name]-i[s.name];return c!==0?c:G(s)&&e.isSubType(s,a)?-1:G(a)&&e.isSubType(a,s)?1:gn(s.name,a.name)}).map(s=>s.name)}function Vf(e,t){if(k(e)||G(e)){let n=Object.keys(e.getFields());return Ce(t,n)}return[]}function _o(e){return{InlineFragment(t){let n=t.typeCondition;if(n){let r=oe(e.getSchema(),n);if(r&&!Qe(r)){let i=J(n);e.reportError(new g(`Fragment cannot condition on non composite type "${i}".`,{nodes:n}))}}},FragmentDefinition(t){let n=oe(e.getSchema(),t.typeCondition);if(n&&!Qe(n)){let r=J(t.typeCondition);e.reportError(new g(`Fragment "${t.name.value}" cannot condition on non composite type "${r}".`,{nodes:t.typeCondition}))}}}}function Ro(e){return{...Ao(e),Argument(t){let n=e.getArgument(),r=e.getFieldDef(),i=e.getParentType();if(!n&&r&&i){let o=t.name.value,s=r.args.map(c=>c.name),a=Ce(o,s);e.reportError(new g(`Unknown argument "${o}" on field "${i.name}.${r.name}".`+Le(a),{nodes:t}))}}}}function Ao(e){let t=Object.create(null),n=e.getSchema(),r=n?n.getDirectives():je;for(let s of r)t[s.name]=s.args.map(a=>a.name);let i=e.getDocument().definitions;for(let s of i)if(s.kind===p.DIRECTIVE_DEFINITION){var o;let a=(o=s.arguments)!==null&&o!==void 0?o:[];t[s.name.value]=a.map(c=>c.name.value)}return{Directive(s){let a=s.name.value,c=t[a];if(s.arguments&&c)for(let l of s.arguments){let u=l.name.value;if(!c.includes(u)){let f=Ce(u,c);e.reportError(new g(`Unknown argument "${u}" on directive "@${a}".`+Le(f),{nodes:l}))}}return!1}}}function ni(e){let t=Object.create(null),n=e.getSchema(),r=n?n.getDirectives():je;for(let o of r)t[o.name]=o.locations;let i=e.getDocument().definitions;for(let o of i)o.kind===p.DIRECTIVE_DEFINITION&&(t[o.name.value]=o.locations.map(s=>s.value));return{Directive(o,s,a,c,l){let u=o.name.value,f=t[u];if(!f){e.reportError(new g(`Unknown directive "@${u}".`,{nodes:o}));return}let d=$f(l);d&&!f.includes(d)&&e.reportError(new g(`Directive "@${u}" may not be used on ${d}.`,{nodes:o}))}}}function $f(e){let t=e[e.length-1];switch("kind"in t||de(!1),t.kind){case p.OPERATION_DEFINITION:return Gf(t.operation);case p.FIELD:return P.FIELD;case p.FRAGMENT_SPREAD:return P.FRAGMENT_SPREAD;case p.INLINE_FRAGMENT:return P.INLINE_FRAGMENT;case p.FRAGMENT_DEFINITION:return P.FRAGMENT_DEFINITION;case p.VARIABLE_DEFINITION:return P.VARIABLE_DEFINITION;case p.SCHEMA_DEFINITION:case p.SCHEMA_EXTENSION:return P.SCHEMA;case p.SCALAR_TYPE_DEFINITION:case p.SCALAR_TYPE_EXTENSION:return P.SCALAR;case p.OBJECT_TYPE_DEFINITION:case p.OBJECT_TYPE_EXTENSION:return P.OBJECT;case p.FIELD_DEFINITION:return P.FIELD_DEFINITION;case p.INTERFACE_TYPE_DEFINITION:case p.INTERFACE_TYPE_EXTENSION:return P.INTERFACE;case p.UNION_TYPE_DEFINITION:case p.UNION_TYPE_EXTENSION:return P.UNION;case p.ENUM_TYPE_DEFINITION:case p.ENUM_TYPE_EXTENSION:return P.ENUM;case p.ENUM_VALUE_DEFINITION:return P.ENUM_VALUE;case p.INPUT_OBJECT_TYPE_DEFINITION:case p.INPUT_OBJECT_TYPE_EXTENSION:return P.INPUT_OBJECT;case p.INPUT_VALUE_DEFINITION:{let n=e[e.length-3];return"kind"in n||de(!1),n.kind===p.INPUT_OBJECT_TYPE_DEFINITION?P.INPUT_FIELD_DEFINITION:P.ARGUMENT_DEFINITION}default:de(!1,"Unexpected kind: "+S(t.kind))}}function Gf(e){switch(e){case Te.QUERY:return P.QUERY;case Te.MUTATION:return P.MUTATION;case Te.SUBSCRIPTION:return P.SUBSCRIPTION}}function Do(e){return{FragmentSpread(t){let n=t.name.value;e.getFragment(n)||e.reportError(new g(`Unknown fragment "${n}".`,{nodes:t.name}))}}}function ri(e){let t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),r=Object.create(null);for(let o of e.getDocument().definitions)ot(o)&&(r[o.name.value]=!0);let i=[...Object.keys(n),...Object.keys(r)];return{NamedType(o,s,a,c,l){let u=o.name.value;if(!n[u]&&!r[u]){var f;let d=(f=l[2])!==null&&f!==void 0?f:a,m=d!=null&&qf(d);if(m&&rc.includes(u))return;let h=Ce(u,m?rc.concat(i):i);e.reportError(new g(`Unknown type "${u}".`+Le(h),{nodes:o}))}}}}var rc=[...Yt,...Xt].map(e=>e.name);function qf(e){return"kind"in e&&(ur(e)||pr(e))}function Lo(e){let t=0;return{Document(n){t=n.definitions.filter(r=>r.kind===p.OPERATION_DEFINITION).length},OperationDefinition(n){!n.name&&t>1&&e.reportError(new g("This anonymous operation must be the only defined operation.",{nodes:n}))}}}function ko(e){var t,n,r;let i=e.getSchema(),o=(t=(n=(r=i?.astNode)!==null&&r!==void 0?r:i?.getQueryType())!==null&&n!==void 0?n:i?.getMutationType())!==null&&t!==void 0?t:i?.getSubscriptionType(),s=0;return{SchemaDefinition(a){if(o){e.reportError(new g("Cannot define a new schema within a schema extension.",{nodes:a}));return}s>0&&e.reportError(new g("Must provide only one schema definition.",{nodes:a})),++s}}}function Fo(e){let t=Object.create(null),n=[],r=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(o){return i(o),!1}};function i(o){if(t[o.name.value])return;let s=o.name.value;t[s]=!0;let a=e.getFragmentSpreads(o.selectionSet);if(a.length!==0){r[s]=n.length;for(let c of a){let l=c.name.value,u=r[l];if(n.push(c),u===void 0){let f=e.getFragment(l);f&&i(f)}else{let f=n.slice(u),d=f.slice(0,-1).map(m=>'"'+m.name.value+'"').join(", ");e.reportError(new g(`Cannot spread fragment "${l}" within itself`+(d!==""?` via ${d}.`:"."),{nodes:f}))}n.pop()}r[s]=void 0}}}function Co(e){let t=Object.create(null);return{OperationDefinition:{enter(){t=Object.create(null)},leave(n){let r=e.getRecursiveVariableUsages(n);for(let{node:i}of r){let o=i.name.value;t[o]!==!0&&e.reportError(new g(n.name?`Variable "$${o}" is not defined by operation "${n.name.value}".`:`Variable "$${o}" is not defined.`,{nodes:[i,n]}))}}},VariableDefinition(n){t[n.variable.name.value]=!0}}}function Po(e){let t=[],n=[];return{OperationDefinition(r){return t.push(r),!1},FragmentDefinition(r){return n.push(r),!1},Document:{leave(){let r=Object.create(null);for(let i of t)for(let o of e.getRecursivelyReferencedFragments(i))r[o.name.value]=!0;for(let i of n){let o=i.name.value;r[o]!==!0&&e.reportError(new g(`Fragment "${o}" is never used.`,{nodes:i}))}}}}}function Mo(e){let t=[];return{OperationDefinition:{enter(){t=[]},leave(n){let r=Object.create(null),i=e.getRecursiveVariableUsages(n);for(let{node:o}of i)r[o.name.value]=!0;for(let o of t){let s=o.variable.name.value;r[s]!==!0&&e.reportError(new g(n.name?`Variable "$${s}" is never used in operation "${n.name.value}".`:`Variable "$${s}" is never used.`,{nodes:o}))}}},VariableDefinition(n){t.push(n)}}}function ii(e){switch(e.kind){case p.OBJECT:return{...e,fields:Qf(e.fields)};case p.LIST:return{...e,values:e.values.map(ii)};case p.INT:case p.FLOAT:case p.STRING:case p.BOOLEAN:case p.NULL:case p.ENUM:case p.VARIABLE:return e}}function Qf(e){return e.map(t=>({...t,value:ii(t.value)})).sort((t,n)=>gn(t.name.value,n.name.value))}function oc(e){return Array.isArray(e)?e.map(([t,n])=>`subfields "${t}" conflict because `+oc(n)).join(" and "):e}function $o(e){let t=new Vo,n=new Map;return{SelectionSet(r){let i=Bf(e,n,t,e.getParentType(),r);for(let[[o,s],a,c]of i){let l=oc(s);e.reportError(new g(`Fields "${o}" conflict because ${l}. Use different aliases on the fields to fetch both if this was intentional.`,{nodes:a.concat(c)}))}}}}function Bf(e,t,n,r,i){let o=[],[s,a]=ai(e,t,r,i);if(Wf(e,o,t,n,s),a.length!==0)for(let c=0;c<a.length;c++){oi(e,o,t,n,!1,s,a[c]);for(let l=c+1;l<a.length;l++)si(e,o,t,n,!1,a[c],a[l])}return o}function oi(e,t,n,r,i,o,s){let a=e.getFragment(s);if(!a)return;let[c,l]=Uo(e,n,a);if(o!==c){Go(e,t,n,r,i,o,c);for(let u of l)r.has(u,s,i)||(r.add(u,s,i),oi(e,t,n,r,i,o,u))}}function si(e,t,n,r,i,o,s){if(o===s||r.has(o,s,i))return;r.add(o,s,i);let a=e.getFragment(o),c=e.getFragment(s);if(!a||!c)return;let[l,u]=Uo(e,n,a),[f,d]=Uo(e,n,c);Go(e,t,n,r,i,l,f);for(let m of d)si(e,t,n,r,i,o,m);for(let m of u)si(e,t,n,r,i,m,s)}function Hf(e,t,n,r,i,o,s,a){let c=[],[l,u]=ai(e,t,i,o),[f,d]=ai(e,t,s,a);Go(e,c,t,n,r,l,f);for(let m of d)oi(e,c,t,n,r,l,m);for(let m of u)oi(e,c,t,n,r,f,m);for(let m of u)for(let h of d)si(e,c,t,n,r,m,h);return c}function Wf(e,t,n,r,i){for(let[o,s]of Object.entries(i))if(s.length>1)for(let a=0;a<s.length;a++)for(let c=a+1;c<s.length;c++){let l=sc(e,n,r,!1,o,s[a],s[c]);l&&t.push(l)}}function Go(e,t,n,r,i,o,s){for(let[a,c]of Object.entries(o)){let l=s[a];if(l)for(let u of c)for(let f of l){let d=sc(e,n,r,i,a,u,f);d&&t.push(d)}}}function sc(e,t,n,r,i,o,s){let[a,c,l]=o,[u,f,d]=s,m=r||a!==u&&k(a)&&k(u);if(!m){let b=c.name.value,x=f.name.value;if(b!==x)return[[i,`"${b}" and "${x}" are different fields`],[c],[f]];if(!Yf(c,f))return[[i,"they have differing arguments"],[c],[f]]}let h=l?.type,y=d?.type;if(h&&y&&jo(h,y))return[[i,`they return conflicting types "${S(h)}" and "${S(y)}"`],[c],[f]];let I=c.selectionSet,T=f.selectionSet;if(I&&T){let b=Hf(e,t,n,m,ce(h),I,ce(y),T);return zf(b,i,c,f)}}function Yf(e,t){let n=e.arguments,r=t.arguments;if(n===void 0||n.length===0)return r===void 0||r.length===0;if(r===void 0||r.length===0||n.length!==r.length)return!1;let i=new Map(r.map(({name:o,value:s})=>[o.value,s]));return n.every(o=>{let s=o.value,a=i.get(o.name.value);return a===void 0?!1:ic(s)===ic(a)})}function ic(e){return J(ii(e))}function jo(e,t){return H(e)?H(t)?jo(e.ofType,t.ofType):!0:H(t)?!0:F(e)?F(t)?jo(e.ofType,t.ofType):!0:F(t)?!0:re(e)||re(t)?e!==t:!1}function ai(e,t,n,r){let i=t.get(r);if(i)return i;let o=Object.create(null),s=Object.create(null);ac(e,n,r,o,s);let a=[o,Object.keys(s)];return t.set(r,a),a}function Uo(e,t,n){let r=t.get(n.selectionSet);if(r)return r;let i=oe(e.getSchema(),n.typeCondition);return ai(e,t,i,n.selectionSet)}function ac(e,t,n,r,i){for(let o of n.selections)switch(o.kind){case p.FIELD:{let s=o.name.value,a;(k(t)||G(t))&&(a=t.getFields()[s]);let c=o.alias?o.alias.value:s;r[c]||(r[c]=[]),r[c].push([t,o,a]);break}case p.FRAGMENT_SPREAD:i[o.name.value]=!0;break;case p.INLINE_FRAGMENT:{let s=o.typeCondition,a=s?oe(e.getSchema(),s):t;ac(e,a,o.selectionSet,r,i);break}}}function zf(e,t,n,r){if(e.length>0)return[[t,e.map(([i])=>i)],[n,...e.map(([,i])=>i).flat()],[r,...e.map(([,,i])=>i).flat()]]}var Vo=class{constructor(){this._data=new Map}has(t,n,r){var i;let[o,s]=t<n?[t,n]:[n,t],a=(i=this._data.get(o))===null||i===void 0?void 0:i.get(s);return a===void 0?!1:r?!0:r===a}add(t,n,r){let[i,o]=t<n?[t,n]:[n,t],s=this._data.get(i);s===void 0?this._data.set(i,new Map([[o,r]])):s.set(o,r)}};function qo(e){return{InlineFragment(t){let n=e.getType(),r=e.getParentType();if(Qe(n)&&Qe(r)&&!Wr(e.getSchema(),n,r)){let i=S(r),o=S(n);e.reportError(new g(`Fragment cannot be spread here as objects of type "${i}" can never be of type "${o}".`,{nodes:t}))}},FragmentSpread(t){let n=t.name.value,r=Jf(e,n),i=e.getParentType();if(r&&i&&!Wr(e.getSchema(),r,i)){let o=S(i),s=S(r);e.reportError(new g(`Fragment "${n}" cannot be spread here as objects of type "${o}" can never be of type "${s}".`,{nodes:t}))}}}}function Jf(e,t){let n=e.getFragment(t);if(n){let r=oe(e.getSchema(),n.typeCondition);if(Qe(r))return r}}function Qo(e){let t=e.getSchema(),n=Object.create(null);for(let i of e.getDocument().definitions)ot(i)&&(n[i.name.value]=i);return{ScalarTypeExtension:r,ObjectTypeExtension:r,InterfaceTypeExtension:r,UnionTypeExtension:r,EnumTypeExtension:r,InputObjectTypeExtension:r};function r(i){let o=i.name.value,s=n[o],a=t?.getType(o),c;if(s?c=Kf[s.kind]:a&&(c=Xf(a)),c){if(c!==i.kind){let l=Zf(i.kind);e.reportError(new g(`Cannot extend non-${l} type "${o}".`,{nodes:s?[s,i]:i}))}}else{let l=Object.keys({...n,...t?.getTypeMap()}),u=Ce(o,l);e.reportError(new g(`Cannot extend type "${o}" because it is not defined.`+Le(u),{nodes:i.name}))}}}var Kf={[p.SCALAR_TYPE_DEFINITION]:p.SCALAR_TYPE_EXTENSION,[p.OBJECT_TYPE_DEFINITION]:p.OBJECT_TYPE_EXTENSION,[p.INTERFACE_TYPE_DEFINITION]:p.INTERFACE_TYPE_EXTENSION,[p.UNION_TYPE_DEFINITION]:p.UNION_TYPE_EXTENSION,[p.ENUM_TYPE_DEFINITION]:p.ENUM_TYPE_EXTENSION,[p.INPUT_OBJECT_TYPE_DEFINITION]:p.INPUT_OBJECT_TYPE_EXTENSION};function Xf(e){if(le(e))return p.SCALAR_TYPE_EXTENSION;if(k(e))return p.OBJECT_TYPE_EXTENSION;if(G(e))return p.INTERFACE_TYPE_EXTENSION;if(Z(e))return p.UNION_TYPE_EXTENSION;if(z(e))return p.ENUM_TYPE_EXTENSION;if(Q(e))return p.INPUT_OBJECT_TYPE_EXTENSION;de(!1,"Unexpected type: "+S(e))}function Zf(e){switch(e){case p.SCALAR_TYPE_EXTENSION:return"scalar";case p.OBJECT_TYPE_EXTENSION:return"object";case p.INTERFACE_TYPE_EXTENSION:return"interface";case p.UNION_TYPE_EXTENSION:return"union";case p.ENUM_TYPE_EXTENSION:return"enum";case p.INPUT_OBJECT_TYPE_EXTENSION:return"input object";default:de(!1,"Unexpected kind: "+S(e))}}function Bo(e){return{...Ho(e),Field:{leave(t){var n;let r=e.getFieldDef();if(!r)return!1;let i=new Set((n=t.arguments)===null||n===void 0?void 0:n.map(o=>o.name.value));for(let o of r.args)if(!i.has(o.name)&&ht(o)){let s=S(o.type);e.reportError(new g(`Field "${r.name}" argument "${o.name}" of type "${s}" is required, but it was not provided.`,{nodes:t}))}}}}}function Ho(e){var t;let n=Object.create(null),r=e.getSchema(),i=(t=r?.getDirectives())!==null&&t!==void 0?t:je;for(let a of i)n[a.name]=qe(a.args.filter(ht),c=>c.name);let o=e.getDocument().definitions;for(let a of o)if(a.kind===p.DIRECTIVE_DEFINITION){var s;let c=(s=a.arguments)!==null&&s!==void 0?s:[];n[a.name.value]=qe(c.filter(ed),l=>l.name.value)}return{Directive:{leave(a){let c=a.name.value,l=n[c];if(l){var u;let f=(u=a.arguments)!==null&&u!==void 0?u:[],d=new Set(f.map(m=>m.name.value));for(let[m,h]of Object.entries(l))if(!d.has(m)){let y=Tn(h.type)?S(h.type):J(h.type);e.reportError(new g(`Directive "@${c}" argument "${m}" of type "${y}" is required, but it was not provided.`,{nodes:a}))}}}}}}function ed(e){return e.type.kind===p.NON_NULL_TYPE&&e.defaultValue==null}function Wo(e){return{Field(t){let n=e.getType(),r=t.selectionSet;if(n){if(re(ce(n))){if(r){let i=t.name.value,o=S(n);e.reportError(new g(`Field "${i}" must not have a selection since type "${o}" has no subfields.`,{nodes:r}))}}else if(!r){let i=t.name.value,o=S(n);e.reportError(new g(`Field "${i}" of type "${o}" must have a selection of subfields. Did you mean "${i} { ... }"?`,{nodes:t}))}}}}}function cc(e){return e.map(t=>typeof t=="number"?"["+t.toString()+"]":"."+t).join("")}function Yo(e,t,n){return{prev:e,key:t,typename:n}}function Et(e){let t=[],n=e;for(;n;)t.push(n.key),n=n.prev;return t.reverse()}function ci(e,t,n=td){return fr(e,t,n,void 0)}function td(e,t,n){let r="Invalid value "+S(t);throw e.length>0&&(r+=` at "value${cc(e)}"`),n.message=r+": "+n.message,n}function fr(e,t,n,r){if(F(t)){if(e!=null)return fr(e,t.ofType,n,r);n(Et(r),e,new g(`Expected non-nullable type "${S(t)}" not to be null.`));return}if(e==null)return null;if(H(t)){let i=t.ofType;return Yr(e)?Array.from(e,(o,s)=>{let a=Yo(r,s,void 0);return fr(o,i,n,a)}):[fr(e,i,n,r)]}if(Q(t)){if(!ke(e)){n(Et(r),e,new g(`Expected type "${t.name}" to be an object.`));return}let i={},o=t.getFields();for(let s of Object.values(o)){let a=e[s.name];if(a===void 0){if(s.defaultValue!==void 0)i[s.name]=s.defaultValue;else if(F(s.type)){let c=S(s.type);n(Et(r),e,new g(`Field "${s.name}" of required type "${c}" was not provided.`))}continue}i[s.name]=fr(a,s.type,n,Yo(r,s.name,t.name))}for(let s of Object.keys(e))if(!o[s]){let a=Ce(s,Object.keys(t.getFields()));n(Et(r),e,new g(`Field "${s}" is not defined by type "${t.name}".`+Le(a)))}return i}if(re(t)){let i;try{i=t.parseValue(e)}catch(o){o instanceof g?n(Et(r),e,o):n(Et(r),e,new g(`Expected type "${t.name}". `+o.message,{originalError:o}));return}return i===void 0&&n(Et(r),e,new g(`Expected type "${t.name}".`)),i}de(!1,"Unexpected input type: "+S(t))}function Ue(e,t,n){if(e){if(e.kind===p.VARIABLE){let r=e.name.value;if(n==null||n[r]===void 0)return;let i=n[r];return i===null&&F(t)?void 0:i}if(F(t))return e.kind===p.NULL?void 0:Ue(e,t.ofType,n);if(e.kind===p.NULL)return null;if(H(t)){let r=t.ofType;if(e.kind===p.LIST){let o=[];for(let s of e.values)if(lc(s,n)){if(F(r))return;o.push(null)}else{let a=Ue(s,r,n);if(a===void 0)return;o.push(a)}return o}let i=Ue(e,r,n);return i===void 0?void 0:[i]}if(Q(t)){if(e.kind!==p.OBJECT)return;let r=Object.create(null),i=qe(e.fields,o=>o.name.value);for(let o of Object.values(t.getFields())){let s=i[o.name];if(!s||lc(s.value,n)){if(o.defaultValue!==void 0)r[o.name]=o.defaultValue;else if(F(o.type))return;continue}let a=Ue(s.value,o.type,n);if(a===void 0)return;r[o.name]=a}return r}if(re(t)){let r;try{r=t.parseLiteral(e,n)}catch{return}return r===void 0?void 0:r}de(!1,"Unexpected input type: "+S(t))}}function lc(e,t){return e.kind===p.VARIABLE&&(t==null||t[e.name.value]===void 0)}function zo(e,t,n){var r;let i={},o=(r=t.arguments)!==null&&r!==void 0?r:[],s=qe(o,a=>a.name.value);for(let a of e.args){let c=a.name,l=a.type,u=s[c];if(!u){if(a.defaultValue!==void 0)i[c]=a.defaultValue;else if(F(l))throw new g(`Argument "${c}" of required type "${S(l)}" was not provided.`,{nodes:t});continue}let f=u.value,d=f.kind===p.NULL;if(f.kind===p.VARIABLE){let h=f.name.value;if(n==null||!nd(n,h)){if(a.defaultValue!==void 0)i[c]=a.defaultValue;else if(F(l))throw new g(`Argument "${c}" of required type "${S(l)}" was provided the variable "$${h}" which was not provided a runtime value.`,{nodes:f});continue}d=n[h]==null}if(d&&F(l))throw new g(`Argument "${c}" of non-null type "${S(l)}" must not be null.`,{nodes:f});let m=Ue(f,l,n);if(m===void 0)throw new g(`Argument "${c}" has invalid value ${J(f)}.`,{nodes:f});i[c]=m}return i}function $e(e,t,n){var r;let i=(r=t.directives)===null||r===void 0?void 0:r.find(o=>o.name.value===e.name);if(i)return zo(e,i,n)}function nd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pc(e,t,n,r,i){let o=new Map;return Ko(e,t,n,r,i,o,new Set),o}function Ko(e,t,n,r,i,o,s){for(let a of i.selections)switch(a.kind){case p.FIELD:{if(!Jo(n,a))continue;let c=rd(a),l=o.get(c);l!==void 0?l.push(a):o.set(c,[a]);break}case p.INLINE_FRAGMENT:{if(!Jo(n,a)||!uc(e,a,r))continue;Ko(e,t,n,r,a.selectionSet,o,s);break}case p.FRAGMENT_SPREAD:{let c=a.name.value;if(s.has(c)||!Jo(n,a))continue;s.add(c);let l=t[c];if(!l||!uc(e,l,r))continue;Ko(e,t,n,r,l.selectionSet,o,s);break}}}function Jo(e,t){let n=$e(Jt,t,e);if(n?.if===!0)return!1;let r=$e(zt,t,e);return r?.if!==!1}function uc(e,t,n){let r=t.typeCondition;if(!r)return!0;let i=oe(e,r);return i===n?!0:Re(i)?e.isSubType(i,n):!1}function rd(e){return e.alias?e.alias.value:e.name.value}function Xo(e){return{OperationDefinition(t){if(t.operation==="subscription"){let n=e.getSchema(),r=n.getSubscriptionType();if(r){let i=t.name?t.name.value:null,o=Object.create(null),s=e.getDocument(),a=Object.create(null);for(let l of s.definitions)l.kind===p.FRAGMENT_DEFINITION&&(a[l.name.value]=l);let c=pc(n,a,o,r,t.selectionSet);if(c.size>1){let f=[...c.values()].slice(1).flat();e.reportError(new g(i!=null?`Subscription "${i}" must select only one top level field.`:"Anonymous Subscription must select only one top level field.",{nodes:f}))}for(let l of c.values())l[0].name.value.startsWith("__")&&e.reportError(new g(i!=null?`Subscription "${i}" must not select an introspection top level field.`:"Anonymous Subscription must not select an introspection top level field.",{nodes:l}))}}}}}function wn(e,t){let n=new Map;for(let r of e){let i=t(r),o=n.get(i);o===void 0?n.set(i,[r]):o.push(r)}return n}function Zo(e){return{DirectiveDefinition(r){var i;let o=(i=r.arguments)!==null&&i!==void 0?i:[];return n(`@${r.name.value}`,o)},InterfaceTypeDefinition:t,InterfaceTypeExtension:t,ObjectTypeDefinition:t,ObjectTypeExtension:t};function t(r){var i;let o=r.name.value,s=(i=r.fields)!==null&&i!==void 0?i:[];for(let c of s){var a;let l=c.name.value,u=(a=c.arguments)!==null&&a!==void 0?a:[];n(`${o}.${l}`,u)}return!1}function n(r,i){let o=wn(i,s=>s.name.value);for(let[s,a]of o)a.length>1&&e.reportError(new g(`Argument "${r}(${s}:)" can only be defined once.`,{nodes:a.map(c=>c.name)}));return!1}}function li(e){return{Field:t,Directive:t};function t(n){var r;let i=(r=n.arguments)!==null&&r!==void 0?r:[],o=wn(i,s=>s.name.value);for(let[s,a]of o)a.length>1&&e.reportError(new g(`There can be only one argument named "${s}".`,{nodes:a.map(c=>c.name)}))}}function es(e){let t=Object.create(null),n=e.getSchema();return{DirectiveDefinition(r){let i=r.name.value;if(n!=null&&n.getDirective(i)){e.reportError(new g(`Directive "@${i}" already exists in the schema. It cannot be redefined.`,{nodes:r.name}));return}return t[i]?e.reportError(new g(`There can be only one directive named "@${i}".`,{nodes:[t[i],r.name]})):t[i]=r.name,!1}}}function ui(e){let t=Object.create(null),n=e.getSchema(),r=n?n.getDirectives():je;for(let a of r)t[a.name]=!a.isRepeatable;let i=e.getDocument().definitions;for(let a of i)a.kind===p.DIRECTIVE_DEFINITION&&(t[a.name.value]=!a.repeatable);let o=Object.create(null),s=Object.create(null);return{enter(a){if(!("directives"in a)||!a.directives)return;let c;if(a.kind===p.SCHEMA_DEFINITION||a.kind===p.SCHEMA_EXTENSION)c=o;else if(ot(a)||tn(a)){let l=a.name.value;c=s[l],c===void 0&&(s[l]=c=Object.create(null))}else c=Object.create(null);for(let l of a.directives){let u=l.name.value;t[u]&&(c[u]?e.reportError(new g(`The directive "@${u}" can only be used once at this location.`,{nodes:[c[u],l]})):c[u]=l)}}}}function ts(e){let t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),r=Object.create(null);return{EnumTypeDefinition:i,EnumTypeExtension:i};function i(o){var s;let a=o.name.value;r[a]||(r[a]=Object.create(null));let c=(s=o.values)!==null&&s!==void 0?s:[],l=r[a];for(let u of c){let f=u.name.value,d=n[a];z(d)&&d.getValue(f)?e.reportError(new g(`Enum value "${a}.${f}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:u.name})):l[f]?e.reportError(new g(`Enum value "${a}.${f}" can only be defined once.`,{nodes:[l[f],u.name]})):l[f]=u.name}return!1}}function ns(e){let t=e.getSchema(),n=t?t.getTypeMap():Object.create(null),r=Object.create(null);return{InputObjectTypeDefinition:i,InputObjectTypeExtension:i,InterfaceTypeDefinition:i,InterfaceTypeExtension:i,ObjectTypeDefinition:i,ObjectTypeExtension:i};function i(o){var s;let a=o.name.value;r[a]||(r[a]=Object.create(null));let c=(s=o.fields)!==null&&s!==void 0?s:[],l=r[a];for(let u of c){let f=u.name.value;id(n[a],f)?e.reportError(new g(`Field "${a}.${f}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:u.name})):l[f]?e.reportError(new g(`Field "${a}.${f}" can only be defined once.`,{nodes:[l[f],u.name]})):l[f]=u.name}return!1}}function id(e,t){return k(e)||G(e)||Q(e)?e.getFields()[t]!=null:!1}function rs(e){let t=Object.create(null);return{OperationDefinition:()=>!1,FragmentDefinition(n){let r=n.name.value;return t[r]?e.reportError(new g(`There can be only one fragment named "${r}".`,{nodes:[t[r],n.name]})):t[r]=n.name,!1}}}function pi(e){let t=[],n=Object.create(null);return{ObjectValue:{enter(){t.push(n),n=Object.create(null)},leave(){let r=t.pop();r||de(!1),n=r}},ObjectField(r){let i=r.name.value;n[i]?e.reportError(new g(`There can be only one input field named "${i}".`,{nodes:[n[i],r.name]})):n[i]=r.name}}}function is(e){let t=Object.create(null);return{OperationDefinition(n){let r=n.name;return r&&(t[r.value]?e.reportError(new g(`There can be only one operation named "${r.value}".`,{nodes:[t[r.value],r]})):t[r.value]=r),!1},FragmentDefinition:()=>!1}}function os(e){let t=e.getSchema(),n=Object.create(null),r=t?{query:t.getQueryType(),mutation:t.getMutationType(),subscription:t.getSubscriptionType()}:{};return{SchemaDefinition:i,SchemaExtension:i};function i(o){var s;let a=(s=o.operationTypes)!==null&&s!==void 0?s:[];for(let c of a){let l=c.operation,u=n[l];r[l]?e.reportError(new g(`Type for ${l} already defined in the schema. It cannot be redefined.`,{nodes:c})):u?e.reportError(new g(`There can be only one ${l} type in schema.`,{nodes:[u,c]})):n[l]=c}return!1}}function ss(e){let t=Object.create(null),n=e.getSchema();return{ScalarTypeDefinition:r,ObjectTypeDefinition:r,InterfaceTypeDefinition:r,UnionTypeDefinition:r,EnumTypeDefinition:r,InputObjectTypeDefinition:r};function r(i){let o=i.name.value;if(n!=null&&n.getType(o)){e.reportError(new g(`Type "${o}" already exists in the schema. It cannot also be defined in this type definition.`,{nodes:i.name}));return}return t[o]?e.reportError(new g(`There can be only one type named "${o}".`,{nodes:[t[o],i.name]})):t[o]=i.name,!1}}function as(e){return{OperationDefinition(t){var n;let r=(n=t.variableDefinitions)!==null&&n!==void 0?n:[],i=wn(r,o=>o.variable.name.value);for(let[o,s]of i)s.length>1&&e.reportError(new g(`There can be only one variable named "$${o}".`,{nodes:s.map(a=>a.variable.name)}))}}}function cs(e){return{ListValue(t){let n=xt(e.getParentInputType());if(!H(n))return nn(e,t),!1},ObjectValue(t){let n=ce(e.getInputType());if(!Q(n))return nn(e,t),!1;let r=qe(t.fields,i=>i.name.value);for(let i of Object.values(n.getFields()))if(!r[i.name]&&En(i)){let s=S(i.type);e.reportError(new g(`Field "${n.name}.${i.name}" of required type "${s}" was not provided.`,{nodes:t}))}},ObjectField(t){let n=ce(e.getParentInputType());if(!e.getInputType()&&Q(n)){let i=Ce(t.name.value,Object.keys(n.getFields()));e.reportError(new g(`Field "${t.name.value}" is not defined by type "${n.name}".`+Le(i),{nodes:t}))}},NullValue(t){let n=e.getInputType();F(n)&&e.reportError(new g(`Expected value of type "${S(n)}", found ${J(t)}.`,{nodes:t}))},EnumValue:t=>nn(e,t),IntValue:t=>nn(e,t),FloatValue:t=>nn(e,t),StringValue:t=>nn(e,t),BooleanValue:t=>nn(e,t)}}function nn(e,t){let n=e.getInputType();if(!n)return;let r=ce(n);if(!re(r)){let i=S(n);e.reportError(new g(`Expected value of type "${i}", found ${J(t)}.`,{nodes:t}));return}try{if(r.parseLiteral(t,void 0)===void 0){let o=S(n);e.reportError(new g(`Expected value of type "${o}", found ${J(t)}.`,{nodes:t}))}}catch(i){let o=S(n);i instanceof g?e.reportError(i):e.reportError(new g(`Expected value of type "${o}", found ${J(t)}; `+i.message,{nodes:t,originalError:i}))}}function ls(e){return{VariableDefinition(t){let n=oe(e.getSchema(),t.type);if(n!==void 0&&!Se(n)){let r=t.variable.name.value,i=J(t.type);e.reportError(new g(`Variable "$${r}" cannot be non-input type "${i}".`,{nodes:t.type}))}}}}function us(e){let t=Object.create(null);return{OperationDefinition:{enter(){t=Object.create(null)},leave(n){let r=e.getRecursiveVariableUsages(n);for(let{node:i,type:o,defaultValue:s}of r){let a=i.name.value,c=t[a];if(c&&o){let l=e.getSchema(),u=oe(l,c.type);if(u&&!od(l,u,c.defaultValue,o,s)){let f=S(u),d=S(o);e.reportError(new g(`Variable "$${a}" of type "${f}" used in position expecting type "${d}".`,{nodes:[c,i]}))}}}}},VariableDefinition(n){t[n.variable.name.value]=n}}}function od(e,t,n,r,i){if(F(r)&&!F(t)){if(!(n!=null&&n.kind!==p.NULL)&&!(i!==void 0))return!1;let a=r.ofType;return gt(e,t,a)}return gt(e,t,r)}var On=Object.freeze([wo,is,Lo,Xo,ri,_o,ls,Wo,Oo,rs,Do,Po,qo,Fo,as,Co,Mo,ni,ui,Ro,li,cs,Bo,us,$o,pi]),fc=Object.freeze([ko,os,ss,ts,ns,Zo,es,ri,ni,ui,Qo,Ao,li,pi,Ho]);var fi=class{constructor(t,n){this._ast=t,this._fragments=void 0,this._fragmentSpreads=new Map,this._recursivelyReferencedFragments=new Map,this._onError=n}get[Symbol.toStringTag](){return"ASTValidationContext"}reportError(t){this._onError(t)}getDocument(){return this._ast}getFragment(t){let n;if(this._fragments)n=this._fragments;else{n=Object.create(null);for(let r of this.getDocument().definitions)r.kind===p.FRAGMENT_DEFINITION&&(n[r.name.value]=r);this._fragments=n}return n[t]}getFragmentSpreads(t){let n=this._fragmentSpreads.get(t);if(!n){n=[];let r=[t],i;for(;i=r.pop();)for(let o of i.selections)o.kind===p.FRAGMENT_SPREAD?n.push(o):o.selectionSet&&r.push(o.selectionSet);this._fragmentSpreads.set(t,n)}return n}getRecursivelyReferencedFragments(t){let n=this._recursivelyReferencedFragments.get(t);if(!n){n=[];let r=Object.create(null),i=[t.selectionSet],o;for(;o=i.pop();)for(let s of this.getFragmentSpreads(o)){let a=s.name.value;if(r[a]!==!0){r[a]=!0;let c=this.getFragment(a);c&&(n.push(c),i.push(c.selectionSet))}}this._recursivelyReferencedFragments.set(t,n)}return n}},di=class extends fi{constructor(t,n,r){super(t,r),this._schema=n}get[Symbol.toStringTag](){return"SDLValidationContext"}getSchema(){return this._schema}},dr=class extends fi{constructor(t,n,r,i){super(n,i),this._schema=t,this._typeInfo=r,this._variableUsages=new Map,this._recursiveVariableUsages=new Map}get[Symbol.toStringTag](){return"ValidationContext"}getSchema(){return this._schema}getVariableUsages(t){let n=this._variableUsages.get(t);if(!n){let r=[],i=new en(this._schema);et(t,cr(i,{VariableDefinition:()=>!1,Variable(o){r.push({node:o,type:i.getInputType(),defaultValue:i.getDefaultValue()})}})),n=r,this._variableUsages.set(t,n)}return n}getRecursiveVariableUsages(t){let n=this._recursiveVariableUsages.get(t);if(!n){n=this.getVariableUsages(t);for(let r of this.getRecursivelyReferencedFragments(t))n=n.concat(this.getVariableUsages(r));this._recursiveVariableUsages.set(t,n)}return n}getType(){return this._typeInfo.getType()}getParentType(){return this._typeInfo.getParentType()}getInputType(){return this._typeInfo.getInputType()}getParentInputType(){return this._typeInfo.getParentInputType()}getFieldDef(){return this._typeInfo.getFieldDef()}getDirective(){return this._typeInfo.getDirective()}getArgument(){return this._typeInfo.getArgument()}getEnumValue(){return this._typeInfo.getEnumValue()}};function mi(e,t,n=On,r,i=new en(e)){var o;let s=(o=r?.maxErrors)!==null&&o!==void 0?o:100;t||W(!1,"Must provide document."),Sn(e);let a=Object.freeze({}),c=[],l=new dr(e,t,i,f=>{if(c.length>=s)throw c.push(new g("Too many validation errors, error limit reached. Validation aborted.")),a;c.push(f)}),u=Zn(n.map(f=>f(l)));try{et(t,cr(i,u))}catch(f){if(f!==a)throw f}return c}function sd(e,t,n=fc){let r=[],i=new di(e,t,s=>{r.push(s)}),o=n.map(s=>s(i));return et(e,Zn(o)),r}function dc(e){let t=sd(e);if(t.length!==0)throw new Error(t.map(n=>n.message).join(`

`))}function mc(e){return e instanceof Error?e:new ps(e)}var ps=class extends Error{constructor(t){super("Unexpected error value: "+S(t)),this.name="NonErrorThrown",this.thrownValue=t}};function De(e,t,n){var r;let i=mc(e);return ad(i)?i:new g(i.message,{nodes:(r=i.nodes)!==null&&r!==void 0?r:t,source:i.source,positions:i.positions,path:n,originalError:i})}function ad(e){return Array.isArray(e.path)}function At(e,t){let n=null;for(let i of e.definitions)if(i.kind===p.OPERATION_DEFINITION){var r;if(t==null){if(n)return null;n=i}else if(((r=i.name)===null||r===void 0?void 0:r.value)===t)return i}return n}function yc(e,t,n){var r,i,o,s;let a=[],c=Object.create(null),l=[],u,f=[];for(let E of t.definitions)if(E.kind===p.SCHEMA_DEFINITION)u=E;else if(E.kind===p.SCHEMA_EXTENSION)f.push(E);else if(ot(E))a.push(E);else if(tn(E)){let C=E.name.value,_=c[C];c[C]=_?_.concat([E]):[E]}else E.kind===p.DIRECTIVE_DEFINITION&&l.push(E);if(Object.keys(c).length===0&&a.length===0&&l.length===0&&f.length===0&&u==null)return e;let d=Object.create(null);for(let E of e.types)d[E.name]=b(E);for(let E of a){var m;let C=E.name.value;d[C]=(m=hc[C])!==null&&m!==void 0?m:Lp(E)}let h={query:e.query&&I(e.query),mutation:e.mutation&&I(e.mutation),subscription:e.subscription&&I(e.subscription),...u&&$([u]),...$(f)};return{description:(r=u)===null||r===void 0||(i=r.description)===null||i===void 0?void 0:i.value,...h,types:Object.values(d),directives:[...e.directives.map(T),...l.map(te)],extensions:Object.create(null),astNode:(o=u)!==null&&o!==void 0?o:e.astNode,extensionASTNodes:e.extensionASTNodes.concat(f),assumeValid:(s=n?.assumeValid)!==null&&s!==void 0?s:!1};function y(E){return H(E)?new ee(y(E.ofType)):F(E)?new V(y(E.ofType)):I(E)}function I(E){return d[E.name]}function T(E){let C=E.toConfig();return new Ae({...C,args:Ze(C.args,R)})}function b(E){if(Rt(E)||nt(E))return E;if(le(E))return O(E);if(k(E))return j(E);if(G(E))return w(E);if(Z(E))return U(E);if(z(E))return N(E);if(Q(E))return x(E);de(!1,"Unexpected type: "+S(E))}function x(E){var C;let _=E.toConfig(),M=(C=c[_.name])!==null&&C!==void 0?C:[];return new Me({..._,fields:()=>({...Ze(_.fields,ie=>({...ie,type:y(ie.type)})),...oa(M)}),extensionASTNodes:_.extensionASTNodes.concat(M)})}function N(E){var C;let _=E.toConfig(),M=(C=c[E.name])!==null&&C!==void 0?C:[];return new xe({..._,values:{..._.values,...sa(M)},extensionASTNodes:_.extensionASTNodes.concat(M)})}function O(E){var C;let _=E.toConfig(),M=(C=c[_.name])!==null&&C!==void 0?C:[],ie=_.specifiedByURL;for(let se of M){var Ne;ie=(Ne=gc(se))!==null&&Ne!==void 0?Ne:ie}return new Ie({..._,specifiedByURL:ie,extensionASTNodes:_.extensionASTNodes.concat(M)})}function j(E){var C;let _=E.toConfig(),M=(C=c[_.name])!==null&&C!==void 0?C:[];return new ne({..._,interfaces:()=>[...E.getInterfaces().map(I),...Sr(M)],fields:()=>({...Ze(_.fields,B),...Ge(M)}),extensionASTNodes:_.extensionASTNodes.concat(M)})}function w(E){var C;let _=E.toConfig(),M=(C=c[_.name])!==null&&C!==void 0?C:[];return new _e({..._,interfaces:()=>[...E.getInterfaces().map(I),...Sr(M)],fields:()=>({...Ze(_.fields,B),...Ge(M)}),extensionASTNodes:_.extensionASTNodes.concat(M)})}function U(E){var C;let _=E.toConfig(),M=(C=c[_.name])!==null&&C!==void 0?C:[];return new ze({..._,types:()=>[...E.getTypes().map(I),...aa(M)],extensionASTNodes:_.extensionASTNodes.concat(M)})}function B(E){return{...E,type:y(E.type),args:E.args&&Ze(E.args,R)}}function R(E){return{...E,type:y(E.type)}}function $(E){let C={};for(let M of E){var _;let ie=(_=M.operationTypes)!==null&&_!==void 0?_:[];for(let Ne of ie)C[Ne.operation]=K(Ne.type)}return C}function K(E){var C;let _=E.name.value,M=(C=hc[_])!==null&&C!==void 0?C:d[_];if(M===void 0)throw new Error(`Unknown type: "${_}".`);return M}function be(E){return E.kind===p.LIST_TYPE?new ee(be(E.type)):E.kind===p.NON_NULL_TYPE?new V(be(E.type)):K(E)}function te(E){var C;return new Ae({name:E.name.value,description:(C=E.description)===null||C===void 0?void 0:C.value,locations:E.locations.map(({value:_})=>_),isRepeatable:E.repeatable,args:ct(E.arguments),astNode:E})}function Ge(E){let C=Object.create(null);for(let ie of E){var _;let Ne=(_=ie.fields)!==null&&_!==void 0?_:[];for(let se of Ne){var M;C[se.name.value]={type:be(se.type),description:(M=se.description)===null||M===void 0?void 0:M.value,args:ct(se.arguments),deprecationReason:hi(se),astNode:se}}}return C}function ct(E){let C=E??[],_=Object.create(null);for(let ie of C){var M;let Ne=be(ie.type);_[ie.name.value]={type:Ne,description:(M=ie.description)===null||M===void 0?void 0:M.value,defaultValue:Ue(ie.defaultValue,Ne),deprecationReason:hi(ie),astNode:ie}}return _}function oa(E){let C=Object.create(null);for(let ie of E){var _;let Ne=(_=ie.fields)!==null&&_!==void 0?_:[];for(let se of Ne){var M;let un=be(se.type);C[se.name.value]={type:un,description:(M=se.description)===null||M===void 0?void 0:M.value,defaultValue:Ue(se.defaultValue,un),deprecationReason:hi(se),astNode:se}}}return C}function sa(E){let C=Object.create(null);for(let ie of E){var _;let Ne=(_=ie.values)!==null&&_!==void 0?_:[];for(let se of Ne){var M;C[se.name.value]={description:(M=se.description)===null||M===void 0?void 0:M.value,deprecationReason:hi(se),astNode:se}}}return C}function Sr(E){return E.flatMap(C=>{var _,M;return(_=(M=C.interfaces)===null||M===void 0?void 0:M.map(K))!==null&&_!==void 0?_:[]})}function aa(E){return E.flatMap(C=>{var _,M;return(_=(M=C.types)===null||M===void 0?void 0:M.map(K))!==null&&_!==void 0?_:[]})}function Lp(E){var C;let _=E.name.value,M=(C=c[_])!==null&&C!==void 0?C:[];switch(E.kind){case p.OBJECT_TYPE_DEFINITION:{var ie;let Xe=[E,...M];return new ne({name:_,description:(ie=E.description)===null||ie===void 0?void 0:ie.value,interfaces:()=>Sr(Xe),fields:()=>Ge(Xe),astNode:E,extensionASTNodes:M})}case p.INTERFACE_TYPE_DEFINITION:{var Ne;let Xe=[E,...M];return new _e({name:_,description:(Ne=E.description)===null||Ne===void 0?void 0:Ne.value,interfaces:()=>Sr(Xe),fields:()=>Ge(Xe),astNode:E,extensionASTNodes:M})}case p.ENUM_TYPE_DEFINITION:{var se;let Xe=[E,...M];return new xe({name:_,description:(se=E.description)===null||se===void 0?void 0:se.value,values:sa(Xe),astNode:E,extensionASTNodes:M})}case p.UNION_TYPE_DEFINITION:{var un;let Xe=[E,...M];return new ze({name:_,description:(un=E.description)===null||un===void 0?void 0:un.value,types:()=>aa(Xe),astNode:E,extensionASTNodes:M})}case p.SCALAR_TYPE_DEFINITION:{var Yi;return new Ie({name:_,description:(Yi=E.description)===null||Yi===void 0?void 0:Yi.value,specifiedByURL:gc(E),astNode:E,extensionASTNodes:M})}case p.INPUT_OBJECT_TYPE_DEFINITION:{var zi;let Xe=[E,...M];return new Me({name:_,description:(zi=E.description)===null||zi===void 0?void 0:zi.value,fields:()=>oa(Xe),astNode:E,extensionASTNodes:M})}}}}var hc=qe([...Yt,...Xt],e=>e.name);function hi(e){let t=$e(yt,e);return t?.reason}function gc(e){let t=$e(sr,e);return t?.url}function mr(e,t){e!=null&&e.kind===p.DOCUMENT||W(!1,"Must provide valid Document AST."),t?.assumeValid!==!0&&t?.assumeValidSDL!==!0&&dc(e);let r=yc({description:void 0,types:[],directives:[],extensions:Object.create(null),extensionASTNodes:[],assumeValid:!1},e,t);if(r.astNode==null)for(let o of r.types)switch(o.name){case"Query":r.query=o;break;case"Mutation":r.mutation=o;break;case"Subscription":r.subscription=o;break}let i=[...r.directives,...je.filter(o=>r.directives.every(s=>s.name!==o.name))];return new it({...r,directives:i})}function gi(e,t){let n=Nt(e,{noLocation:t?.noLocation,allowLegacyFragmentVariables:t?.allowLegacyFragmentVariables});return mr(n,{assumeValidSDL:t?.assumeValidSDL,assumeValid:t?.assumeValid})}function fe(e){return yi(e,[])}function yi(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return Md(e,t);default:return String(e)}}function Tc(e){return(e.name="GraphQLError")?e.toString():`${e.name}: ${e.message};
 ${e.stack}`}function Md(e,t){if(e===null)return"null";if(e instanceof Error)return e.name==="AggregateError"?Tc(e)+`
`+Ec(e.errors,t):Tc(e);if(t.includes(e))return"[Circular]";let n=[...t,e];if(jd(e)){let r=e.toJSON();if(r!==e)return typeof r=="string"?r:yi(r,n)}else if(Array.isArray(e))return Ec(e,n);return Ud(e,n)}function jd(e){return typeof e.toJSON=="function"}function Ud(e,t){let n=Object.entries(e);return n.length===0?"{}":t.length>3?"["+Vd(e)+"]":"{ "+n.map(([i,o])=>i+": "+yi(o,t)).join(", ")+" }"}function Ec(e,t){if(e.length===0)return"[]";if(t.length>3)return"[Array]";let n=e.length,r=[];for(let i=0;i<n;++i)r.push(yi(e[i],t));return"["+r.join(", ")+"]"}function Vd(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){let n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}var $d=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions"];function Gd(e){return e!=null&&typeof e=="object"&&Object.keys(e).every(t=>$d.includes(t))}function A(e,t){return t?.originalError&&!(t.originalError instanceof Error)&&Gd(t.originalError)&&(t.originalError=A(t.originalError.message,t.originalError)),Hn.major>=17?new g(e,t):new g(e,t?.nodes,t?.source,t?.positions,t?.path,t?.originalError,t?.extensions)}function vc(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e}function fs(e){return typeof e=="object"&&e!==null}function he(e){return e?.then!=null}function bc(e,t,n){let r=n;for(let i of e)r=he(r)?r.then(o=>t(o,i)):t(r,i);return r}function Ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ds(e,t,n={}){let r={},o=(t.arguments??[]).reduce((s,a)=>({...s,[a.name.value]:a}),{});for(let{name:s,type:a,defaultValue:c}of e.args){let l=o[s];if(!l){if(c!==void 0)r[s]=c;else if(F(a))throw A(`Argument "${s}" of required type "${fe(a)}" was not provided.`,{nodes:[t]});continue}let u=l.value,f=u.kind===p.NULL;if(u.kind===p.VARIABLE){let m=u.name.value;if(n==null||!Ti(n,m)){if(c!==void 0)r[s]=c;else if(F(a))throw A(`Argument "${s}" of required type "${fe(a)}" was provided the variable "$${m}" which was not provided a runtime value.`,{nodes:[u]});continue}f=n[m]==null}if(f&&F(a))throw A(`Argument "${s}" of non-null type "${fe(a)}" must not be null.`,{nodes:[u]});let d=Ue(u,a,n);if(d===void 0)throw A(`Argument "${s}" has invalid value ${J(u)}.`,{nodes:[u]});r[s]=d}return r}function _n(e){let t=new WeakMap;return function(r){let i=t.get(r);if(i===void 0){let o=e(r);return t.set(r,o),o}return i}}function Nc(e){let t=new WeakMap;return function(r,i,o){let s=t.get(r);if(!s){s=new WeakMap,t.set(r,s);let l=new WeakMap;s.set(i,l);let u=e(r,i,o);return l.set(o,u),u}let a=s.get(i);if(!a){a=new WeakMap,s.set(i,a);let l=e(r,i,o);return a.set(o,l),l}let c=a.get(o);if(c===void 0){let l=e(r,i,o);return a.set(o,l),l}return c}}function xc(e){let t=new WeakMap;return function(r,i,o,s,a){let c=t.get(r);if(!c){c=new WeakMap,t.set(r,c);let m=new WeakMap;c.set(i,m);let h=new WeakMap;m.set(o,h);let y=new WeakMap;h.set(s,y);let I=e(r,i,o,s,a);return y.set(a,I),I}let l=c.get(i);if(!l){l=new WeakMap,c.set(i,l);let m=new WeakMap;l.set(o,m);let h=new WeakMap;m.set(s,h);let y=e(r,i,o,s,a);return h.set(a,y),y}let u=l.get(o);if(!u){u=new WeakMap,l.set(o,u);let m=new WeakMap;u.set(s,m);let h=e(r,i,o,s,a);return m.set(a,h),h}let f=u.get(s);if(!f){f=new WeakMap,u.set(s,f);let m=e(r,i,o,s,a);return f.set(a,m),m}let d=f.get(a);if(d===void 0){let m=e(r,i,o,s,a);return f.set(a,m),m}return d}}function Ic(e,t,n){let i=Sc(e).get(t);if(i==null)throw A(`Schema is not configured to execute ${t} operation.`,{nodes:n});return i}var Zw=_n(function(t){let n=qd(t);return new Set([...n].map(r=>r.name))}),qd=_n(function(t){let n=Sc(t);return new Set(n.values())}),Sc=_n(function(t){let n=new Map,r=t.getQueryType();r&&n.set("query",r);let i=t.getMutationType();i&&n.set("mutation",i);let o=t.getSubscriptionType();return o&&n.set("subscription",o),n});function _c(e,t,n,r){Symbol.asyncIterator in e&&(e=e[Symbol.asyncIterator]());let i,o,s;r&&(s=l=>{let u=r();return he(u)?u.then(()=>l):l}),typeof e.return=="function"&&(i=e.return,o=l=>{let u=()=>Promise.reject(l);return i.call(e).then(u,u)});function a(l){return l.done?s?s(l):l:wc(l.value,t).then(Oc,o)}let c;if(n){let l=n;c=u=>wc(u,l).then(Oc,o)}return{next(){return e.next().then(a,c)},return(){let l=i?i.call(e).then(a,c):Promise.resolve({value:void 0,done:!0});return s?l.then(s):l},throw(l){return typeof e.throw=="function"?e.throw(l).then(a,c):Promise.reject(l).catch(o)},[Symbol.asyncIterator](){return this}}}function wc(e,t){return new Promise(n=>n(t(e)))}function Oc(e){return{value:e,done:!1}}var rn=class extends Map{get[Symbol.toStringTag](){return"AccumulatorMap"}add(t,n){let r=this.get(t);r===void 0?this.set(t,[n]):r.push(n)}};var Rc=new Ae({name:"defer",description:"Directs the executor to defer this fragment when the `if` argument is true or undefined.",locations:[P.FRAGMENT_SPREAD,P.INLINE_FRAGMENT],args:{if:{type:new V(pe),description:"Deferred when true or undefined.",defaultValue:!0},label:{type:X,description:"Unique name"}}}),Ac=new Ae({name:"stream",description:"Directs the executor to stream plural fields when the `if` argument is true or undefined.",locations:[P.FIELD],args:{if:{type:new V(pe),description:"Stream when true or undefined.",defaultValue:!0},label:{type:X,description:"Unique name"},initialCount:{defaultValue:0,type:It,description:"Number of items to return immediately"}}});function Rn(e,t,n,r,i,o,s,a){for(let c of i.selections)switch(c.kind){case p.FIELD:{if(!ms(n,c))continue;o.add(Qd(c),c);break}case p.INLINE_FRAGMENT:{if(!ms(n,c)||!Dc(e,c,r))continue;let l=Lc(n,c);if(l){let u=new rn;Rn(e,t,n,r,c.selectionSet,u,s,a),s.push({label:l.label,fields:u})}else Rn(e,t,n,r,c.selectionSet,o,s,a);break}case p.FRAGMENT_SPREAD:{let l=c.name.value;if(!ms(n,c))continue;let u=Lc(n,c);if(a.has(l)&&!u)continue;let f=t[l];if(!f||!Dc(e,f,r))continue;if(u||a.add(l),u){let d=new rn;Rn(e,t,n,r,f.selectionSet,d,s,a),s.push({label:u.label,fields:d})}else Rn(e,t,n,r,f.selectionSet,o,s,a);break}}}function hs(e,t,n,r,i){let o=new rn,s=[];return Rn(e,t,n,r,i,o,s,new Set),{fields:o,patches:s}}function ms(e,t){return!($e(Jt,t,e)?.if===!0||$e(zt,t,e)?.if===!1)}function Dc(e,t,n){let r=t.typeCondition;if(!r)return!0;let i=oe(e,r);return i===n?!0:Re(i)?e.getPossibleTypes(i).includes(n):!1}function Qd(e){return e.alias?e.alias.value:e.name.value}function Lc(e,t){let n=$e(Rc,t,e);if(n&&n.if!==!1)return{label:typeof n.label=="string"?n.label:void 0}}var kc=xc(function(t,n,r,i,o){let s=new rn,a=new Set,c=[],l={fields:s,patches:c};for(let u of o)u.selectionSet&&Rn(t,n,r,i,u.selectionSet,s,c,a);return l});function An(e){return e?.[Symbol.asyncIterator]!=null}function on(e,t,n){return{prev:e,key:t,typename:n}}function we(e){let t=[],n=e;for(;n;)t.push(n.key),n=n.prev;return t.reverse()}function Fc(e){return e.map(t=>typeof t=="number"?"["+t.toString()+"]":"."+t).join("")}function Bd(e){return e!=null&&typeof e=="object"&&"errors"in e}function Hd(e){return e!=null&&typeof e.toString=="function"}function vt(e){return e instanceof g}function Cc(e){return e instanceof g?e.originalError!=null?Cc(e.originalError):!0:!1}function Ei(e,t,n){let r=new Set;if(Bd(e))for(let i of e.errors){let o=Ei(i,t,n);for(let s of o)r.add(s)}else if(t){let i=t.maskError(e,t.errorMessage,t.isDev);i!==e&&n.error(e),r.add(vt(i)?i:A(i.message,{originalError:i}))}else vt(e)?r.add(e):e instanceof Error?r.add(A(e.message,{originalError:e})):typeof e=="string"?r.add(A(e,{extensions:{unexpected:!0}})):Hd(e)?r.add(A(e.toString(),{extensions:{unexpected:!0}})):(n.error(e),r.add(A("Unexpected error.",{extensions:{http:{unexpected:!0}}})));return Array.from(r)}function Dn(e,t={},n=!1){let r,i=!1;if("extensions"in e&&e.extensions?.http&&(e.extensions.http.headers&&Object.assign(t,e.extensions.http.headers),e.extensions.http.status&&(r=e.extensions.http.status)),"errors"in e&&e.errors?.length)for(let o of e.errors)if(o.extensions?.http){if(o.extensions.http.headers&&Object.assign(t,o.extensions.http.headers),n&&o.extensions.http.spec)continue;o.extensions.http.status&&(!r||o.extensions.http.status>r)&&(r=o.extensions.http.status)}else(!Cc(o)||o.extensions?.unexpected)&&(i=!0);else r||=200;return r||(i&&!("data"in e)?r=500:r=200),{status:r,headers:t}}function Pc(e){return Array.isArray(e)&&e.length>0&&e.some(vt)}var Dt={red:"\x1B[31m",yellow:"\x1B[33m",magenta:"\x1B[35m",cyan:"\x1B[36m",reset:"\x1B[0m"},Mc=Dt.yellow+"WARN"+Dt.reset,jc=Dt.cyan+"INFO"+Dt.reset,Uc=Dt.red+"ERR"+Dt.reset,Vc=Dt.magenta+"DEBUG"+Dt.reset,hr={debug:0,info:1,warn:2,error:3,silent:4},vi=()=>{},bi=e=>(...t)=>console.log(e,...t),Wd=console.debug?(...e)=>console.debug(Vc,...e):bi(Vc),Yd=console.info?(...e)=>console.info(jc,...e):bi(jc),zd=console.warn?(...e)=>console.warn(Mc,...e):bi(Mc),Jd=console.error?(...e)=>console.error(Uc,...e):bi(Uc),Ni=(e=globalThis.process?.env.DEBUG==="1"?"debug":"info")=>{let t=hr[e];return{debug:t>hr.debug?vi:Wd,info:t>hr.info?vi:Yd,warn:t>hr.warn?vi:zd,error:t>hr.error?vi:Jd}};var $c='<!doctype html><html lang=en><head><meta charset=utf-8><title>__TITLE__</title><link rel=icon href=https://raw.githubusercontent.com/dotansimha/graphql-yoga/main/website/public/favicon.ico><link rel=stylesheet href=https://unpkg.com/@graphql-yoga/graphiql@4.1.1/dist/style.css></head><body id=body class=no-focus-outline><noscript>You need to enable JavaScript to run this app.</noscript><div id=root></div><script type=module>import{renderYogaGraphiQL}from"https://unpkg.com/@graphql-yoga/graphiql@4.1.1/dist/yoga-graphiql.es.js";renderYogaGraphiQL(root,__OPTS__)<\/script></body></html>';function Kd({headers:e,method:t}){return t==="GET"&&!!e?.get("accept")?.includes("text/html")}var Xd=e=>$c.replace("__TITLE__",e?.title||"Yoga GraphiQL").replace("__OPTS__",JSON.stringify(e??{}));function Gc(e){let t=e.logger??console,n;typeof e?.options=="function"?n=e?.options:typeof e?.options=="object"?n=()=>e?.options:e?.options===!1?n=()=>!1:n=()=>({});let r=e?.render??Xd,i,o=({URLPattern:s})=>(i||=new s({pathname:e.graphqlEndpoint}),i);return{async onRequest({request:s,serverContext:a,fetchAPI:c,endResponse:l,url:u}){if(Kd(s)&&(s.url.endsWith(e.graphqlEndpoint)||u.pathname===e.graphqlEndpoint||o(c).test(u))){t.debug("Rendering GraphiQL");let f=await n(s,a);if(f){let d=await r({...f===!0?{}:f}),m=new c.Response(d,{headers:{"Content-Type":"text/html"},status:200});l(m)}}}}}var qc=e=>{if(e==null)return{};if(Tt(e))return{onPluginInit({setSchema:n}){n(e)}};if("then"in e){let n;return{onRequestParse(){return{async onRequestParseDone(){n||=await e}}},onEnveloped({setSchema:r}){if(!n)throw new Error("You provide a promise of a schema but it hasn't been resolved yet. Make sure you use this plugin with GraphQL Yoga.");r(n)}}}let t=new WeakMap;return{onRequestParse({request:n,serverContext:r}){return{async onRequestParseDone(){let i=await e({...r,request:n});t.set(n,i)}}},onEnveloped({setSchema:n,context:r}){if(r?.request==null)throw new Error("Request object is not available in the context. Make sure you use this plugin with GraphQL Yoga.");let i=t.get(r.request);if(i==null)throw new Error("No schema found for this request. Make sure you use this plugin with GraphQL Yoga.");n(i)}}};var xi=e=>Array.isArray(e)?e:e?[e]:[];function Zd(e,t){return String(e)<String(t)?-1:String(e)>String(t)?1:0}function Qc(e){let t;return"alias"in e&&(t=e.alias?.value),t==null&&"name"in e&&(t=e.name?.value),t==null&&(t=e.kind),t}function Lt(e,t,n){let r=Qc(e),i=Qc(t);return typeof n=="function"?n(r,i):Zd(r,i)}function kt(e){return e!=null}function Bc(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e}function Hc(e){return typeof e=="object"&&e!==null}function Ii(e,t=["directives"]){return t.reduce((n,r)=>n==null?n:n[r],e?.extensions)}function pt(e){if(F(e)){let t=pt(e.ofType);if(t.kind===p.NON_NULL_TYPE)throw new Error(`Invalid type node ${fe(e)}. Inner type of non-null type cannot be a non-null type.`);return{kind:p.NON_NULL_TYPE,type:t}}else if(H(e))return{kind:p.LIST_TYPE,type:pt(e.ofType)};return{kind:p.NAMED_TYPE,name:{kind:p.NAME,value:e.name}}}function sn(e){if(e===null)return{kind:p.NULL};if(e===void 0)return null;if(Array.isArray(e)){let t=[];for(let n of e){let r=sn(n);r!=null&&t.push(r)}return{kind:p.LIST,values:t}}if(typeof e=="object"){if(e?.toJSON)return sn(e.toJSON());let t=[];for(let n in e){let r=e[n],i=sn(r);i&&t.push({kind:p.OBJECT_FIELD,name:{kind:p.NAME,value:n},value:i})}return{kind:p.OBJECT,fields:t}}if(typeof e=="boolean")return{kind:p.BOOLEAN,value:e};if(typeof e=="bigint")return{kind:p.INT,value:String(e)};if(typeof e=="number"&&isFinite(e)){let t=String(e);return em.test(t)?{kind:p.INT,value:t}:{kind:p.FLOAT,value:t}}if(typeof e=="string")return{kind:p.STRING,value:e};throw new TypeError(`Cannot convert value to AST: ${e}.`)}var em=/^-?(?:0|[1-9][0-9]*)$/;function Ft(e,t){if(F(t)){let n=Ft(e,t.ofType);return n?.kind===p.NULL?null:n}if(e===null)return{kind:p.NULL};if(e===void 0)return null;if(H(t)){let n=t.ofType;if(Bc(e)){let r=[];for(let i of e){let o=Ft(i,n);o!=null&&r.push(o)}return{kind:p.LIST,values:r}}return Ft(e,n)}if(Q(t)){if(!Hc(e))return null;let n=[];for(let r of Object.values(t.getFields())){let i=Ft(e[r.name],r.type);i&&n.push({kind:p.OBJECT_FIELD,name:{kind:p.NAME,value:r.name},value:i})}return{kind:p.OBJECT,fields:n}}if(re(t)){let n=t.serialize(e);return n==null?null:z(t)?{kind:p.ENUM,value:n}:t.name==="ID"&&typeof n=="string"&&tm.test(n)?{kind:p.INT,value:n}:sn(n)}console.assert(!1,"Unexpected input type: "+fe(t))}var tm=/^-?(?:0|[1-9][0-9]*)$/;function He(e){if(e.astNode?.description)return{...e.astNode.description,block:!0};if(e.description)return{kind:p.STRING,value:e.description,block:!0}}function Si(e){let t=new WeakMap;return function(r){let i=t.get(r);if(i===void 0){let o=e(r);return t.set(r,o),o}return i}}var GO=Si(function(t){let n=nm(t);return new Set([...n].map(r=>r.name))}),nm=Si(function(t){let n=gs(t);return new Set(n.values())}),gs=Si(function(t){let n=new Map,r=t.getQueryType();r&&n.set("query",r);let i=t.getMutationType();i&&n.set("mutation",i);let o=t.getSubscriptionType();return o&&n.set("subscription",o),n});function Wc(e,t={}){let n=t.pathToDirectivesInExtensions,r=e.getTypeMap(),i=rm(e,n),o=i!=null?[i]:[],s=e.getDirectives();for(let a of s)Nn(a)||o.push(im(a,e,n));for(let a in r){let c=r[a],l=nt(c),u=Rt(c);if(!(l||u))if(k(c))o.push(om(c,e,n));else if(G(c))o.push(sm(c,e,n));else if(Z(c))o.push(am(c,e,n));else if(Q(c))o.push(cm(c,e,n));else if(z(c))o.push(lm(c,e,n));else if(le(c))o.push(um(c,e,n));else throw new Error(`Unknown type ${c}.`)}return{kind:p.DOCUMENT,definitions:o}}function rm(e,t){let n=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),r=[];if(e.astNode!=null&&r.push(e.astNode),e.extensionASTNodes!=null)for(let l of e.extensionASTNodes)r.push(l);for(let l of r)if(l.operationTypes)for(let u of l.operationTypes)n.set(u.operation,u);let i=gs(e);for(let[l,u]of n){let f=i.get(l);if(f!=null){let d=pt(f);u!=null?u.type=d:n.set(l,{kind:p.OPERATION_TYPE_DEFINITION,operation:l,type:d})}}let o=[...n.values()].filter(kt),s=Ln(e,e,t);if(!o.length&&!s.length)return null;let a={kind:o!=null?p.SCHEMA_DEFINITION:p.SCHEMA_EXTENSION,operationTypes:o,directives:s},c=He(e);return c&&(a.description=c),a}function im(e,t,n){return{kind:p.DIRECTIVE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},arguments:e.args?.map(r=>Yc(r,t,n)),repeatable:e.isRepeatable,locations:e.locations?.map(r=>({kind:p.NAME,value:r}))||[]}}function Ln(e,t,n){let r=Ii(e,n),i=[];e.astNode!=null&&i.push(e.astNode),"extensionASTNodes"in e&&e.extensionASTNodes!=null&&(i=i.concat(e.extensionASTNodes));let o;if(r!=null)o=ys(t,r);else{o=[];for(let s of i)s.directives&&o.push(...s.directives)}return o}function Oi(e,t,n){let r=[],i=null,o=Ii(e,n),s;return o!=null?s=ys(t,o):s=e.astNode?.directives,s!=null&&(r=s.filter(a=>a.name.value!=="deprecated"),e.deprecationReason!=null&&(i=s.filter(a=>a.name.value==="deprecated")?.[0])),e.deprecationReason!=null&&i==null&&(i=dm(e.deprecationReason)),i==null?r:[i].concat(r)}function Yc(e,t,n){return{kind:p.INPUT_VALUE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},type:pt(e.type),defaultValue:e.defaultValue!==void 0?Ft(e.defaultValue,e.type)??void 0:void 0,directives:Oi(e,t,n)}}function om(e,t,n){return{kind:p.OBJECT_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},fields:Object.values(e.getFields()).map(r=>zc(r,t,n)),interfaces:Object.values(e.getInterfaces()).map(r=>pt(r)),directives:Ln(e,t,n)}}function sm(e,t,n){let r={kind:p.INTERFACE_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},fields:Object.values(e.getFields()).map(i=>zc(i,t,n)),directives:Ln(e,t,n)};return"getInterfaces"in e&&(r.interfaces=Object.values(e.getInterfaces()).map(i=>pt(i))),r}function am(e,t,n){return{kind:p.UNION_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},directives:Ln(e,t,n),types:e.getTypes().map(r=>pt(r))}}function cm(e,t,n){return{kind:p.INPUT_OBJECT_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},fields:Object.values(e.getFields()).map(r=>pm(r,t,n)),directives:Ln(e,t,n)}}function lm(e,t,n){return{kind:p.ENUM_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},values:Object.values(e.getValues()).map(r=>fm(r,t,n)),directives:Ln(e,t,n)}}function um(e,t,n){let r=Ii(e,n),i=r?ys(t,r):e.astNode?.directives||[],o=e.specifiedByUrl||e.specifiedByURL;if(o&&!i.some(s=>s.name.value==="specifiedBy")){let s={url:o};i.push(wi("specifiedBy",s))}return{kind:p.SCALAR_TYPE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},directives:i}}function zc(e,t,n){return{kind:p.FIELD_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},arguments:e.args.map(r=>Yc(r,t,n)),type:pt(e.type),directives:Oi(e,t,n)}}function pm(e,t,n){return{kind:p.INPUT_VALUE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},type:pt(e.type),directives:Oi(e,t,n),defaultValue:Ft(e.defaultValue,e.type)??void 0}}function fm(e,t,n){return{kind:p.ENUM_VALUE_DEFINITION,description:He(e),name:{kind:p.NAME,value:e.name},directives:Oi(e,t,n)}}function dm(e){return wi("deprecated",{reason:e},yt)}function wi(e,t,n){let r=[];if(n!=null)for(let i of n.args){let o=i.name,s=t[o];if(s!==void 0){let a=Ft(s,i.type);a&&r.push({kind:p.ARGUMENT,name:{kind:p.NAME,value:o},value:a})}}else for(let i in t){let o=t[i],s=sn(o);s&&r.push({kind:p.ARGUMENT,name:{kind:p.NAME,value:i},value:s})}return{kind:p.DIRECTIVE,name:{kind:p.NAME,value:e},arguments:r}}function ys(e,t){let n=[];for(let r in t){let i=t[r],o=e?.getDirective(r);if(Array.isArray(i))for(let s of i)n.push(wi(r,s,o));else n.push(wi(r,i,o))}return n}var mm=80,kn={};function Ri(){kn={}}function Zc(e){let t=e.name?.value;if(t!=null)switch(_i(e,t),e.kind){case"EnumTypeDefinition":if(e.values)for(let n of e.values)_i(n,t,n.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(let n of e.fields)if(_i(n,t,n.name.value),Em(n)&&n.arguments)for(let r of n.arguments)_i(r,t,n.name.value,r.name.value)}break}}function _i(e,t,n,r){let i=vm(e);if(typeof i!="string"||i.length===0)return;let o=[t];n&&(o.push(n),r&&o.push(r));let s=o.join(".");kn[s]||(kn[s]=[]),kn[s].push(i)}function hm(e){return`
# `+e.replace(/\n/g,`
# `)}function D(e,t){return e?e.filter(n=>n).join(t||""):""}function Jc(e){return e?.some(t=>t.includes(`
`))??!1}function gm(e){return(t,n,r,i,o)=>{let s=[],a=i.reduce((u,f)=>(["fields","arguments","values"].includes(f)&&u.name&&s.push(u.name.value),u[f]),o[0]),c=[...s,a?.name?.value].filter(Boolean).join("."),l=[];return t.kind.includes("Definition")&&kn[c]&&l.push(...kn[c]),D([...l.map(hm),t.description,e(t,n,r,i,o)],`
`)}}function gr(e){return e&&`  ${e.replace(/\n/g,`
  `)}`}function st(e){return e&&e.length!==0?`{
${gr(D(e,`
`))}
}`:""}function ue(e,t,n){return t?e+t+(n||""):""}function ym(e,t=!1){let n=e.replace(/"""/g,'\\"""');return(e[0]===" "||e[0]==="	")&&e.indexOf(`
`)===-1?`"""${n.replace(/"$/,`"
`)}"""`:`"""
${t?n:gr(n)}
"""`}var Kc={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>D(e.definitions,`

`)},OperationDefinition:{leave:e=>{let t=ue("(",D(e.variableDefinitions,", "),")");return D([e.operation,D([e.name,t]),D(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r})=>e+": "+t+ue(" = ",n)+ue(" ",D(r," "))},SelectionSet:{leave:({selections:e})=>st(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:i}){let o=ue("",e,": ")+t,s=o+ue("(",D(n,", "),")");return s.length>mm&&(s=o+ue(`(
`,gr(D(n,`
`)),`
)`)),D([s,D(r," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+ue(" ",D(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>D(["...",ue("on ",e),D(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:i})=>`fragment ${e}${ue("(",D(n,", "),")")} on ${t} ${ue("",D(r," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?ym(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+D(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+D(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+ue("(",D(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:t})=>D(["schema",D(e," "),st(t)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({name:e,directives:t})=>D(["scalar",e,D(t," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:t,directives:n,fields:r})=>D(["type",e,ue("implements ",D(t," & ")),D(n," "),st(r)]," ")},FieldDefinition:{leave:({name:e,arguments:t,type:n,directives:r})=>e+(Jc(t)?ue(`(
`,gr(D(t,`
`)),`
)`):ue("(",D(t,", "),")"))+": "+n+ue(" ",D(r," "))},InputValueDefinition:{leave:({name:e,type:t,defaultValue:n,directives:r})=>D([e+": "+t,ue("= ",n),D(r," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:t,directives:n,fields:r})=>D(["interface",e,ue("implements ",D(t," & ")),D(n," "),st(r)]," ")},UnionTypeDefinition:{leave:({name:e,directives:t,types:n})=>D(["union",e,D(t," "),ue("= ",D(n," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:t,values:n})=>D(["enum",e,D(t," "),st(n)]," ")},EnumValueDefinition:{leave:({name:e,directives:t})=>D([e,D(t," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:t,fields:n})=>D(["input",e,D(t," "),st(n)]," ")},DirectiveDefinition:{leave:({name:e,arguments:t,repeatable:n,locations:r})=>"directive @"+e+(Jc(t)?ue(`(
`,gr(D(t,`
`)),`
)`):ue("(",D(t,", "),")"))+(n?" repeatable":"")+" on "+D(r," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>D(["extend schema",D(e," "),st(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>D(["extend scalar",e,D(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>D(["extend type",e,ue("implements ",D(t," & ")),D(n," "),st(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>D(["extend interface",e,ue("implements ",D(t," & ")),D(n," "),st(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>D(["extend union",e,D(t," "),ue("= ",D(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>D(["extend enum",e,D(t," "),st(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>D(["extend input",e,D(t," "),st(n)]," ")}},Tm=Object.keys(Kc).reduce((e,t)=>({...e,[t]:{leave:gm(Kc[t].leave)}}),{});function el(e){return et(e,Tm)}function Em(e){return e.kind==="FieldDefinition"}function vm(e){let t=bm(e);if(t!==void 0)return Nm(`
${t}`)}function bm(e){let t=e.loc;if(!t)return;let n=[],r=t.startToken.prev;for(;r!=null&&r.kind===v.COMMENT&&r.next!=null&&r.prev!=null&&r.line+1===r.next.line&&r.line!==r.prev.line;){let i=String(r.value);n.push(i),r=r.prev}return n.length>0?n.reverse().join(`
`):void 0}function Nm(e){let t=e.split(/\r\n|[\n\r]/g),n=xm(t);if(n!==0)for(let r=1;r<t.length;r++)t[r]=t[r].slice(n);for(;t.length>0&&Xc(t[0]);)t.shift();for(;t.length>0&&Xc(t[t.length-1]);)t.pop();return t.join(`
`)}function xm(e){let t=null;for(let n=1;n<e.length;n++){let r=e[n],i=tl(r);if(i!==r.length&&(t===null||i<t)&&(t=i,t===0))break}return t===null?0:t}function tl(e){let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	");)t++;return t}function Xc(e){return tl(e)===e.length}var q;(function(e){e.TYPE="MapperKind.TYPE",e.SCALAR_TYPE="MapperKind.SCALAR_TYPE",e.ENUM_TYPE="MapperKind.ENUM_TYPE",e.COMPOSITE_TYPE="MapperKind.COMPOSITE_TYPE",e.OBJECT_TYPE="MapperKind.OBJECT_TYPE",e.INPUT_OBJECT_TYPE="MapperKind.INPUT_OBJECT_TYPE",e.ABSTRACT_TYPE="MapperKind.ABSTRACT_TYPE",e.UNION_TYPE="MapperKind.UNION_TYPE",e.INTERFACE_TYPE="MapperKind.INTERFACE_TYPE",e.ROOT_OBJECT="MapperKind.ROOT_OBJECT",e.QUERY="MapperKind.QUERY",e.MUTATION="MapperKind.MUTATION",e.SUBSCRIPTION="MapperKind.SUBSCRIPTION",e.DIRECTIVE="MapperKind.DIRECTIVE",e.FIELD="MapperKind.FIELD",e.COMPOSITE_FIELD="MapperKind.COMPOSITE_FIELD",e.OBJECT_FIELD="MapperKind.OBJECT_FIELD",e.ROOT_FIELD="MapperKind.ROOT_FIELD",e.QUERY_ROOT_FIELD="MapperKind.QUERY_ROOT_FIELD",e.MUTATION_ROOT_FIELD="MapperKind.MUTATION_ROOT_FIELD",e.SUBSCRIPTION_ROOT_FIELD="MapperKind.SUBSCRIPTION_ROOT_FIELD",e.INTERFACE_FIELD="MapperKind.INTERFACE_FIELD",e.INPUT_OBJECT_FIELD="MapperKind.INPUT_OBJECT_FIELD",e.ARGUMENT="MapperKind.ARGUMENT",e.ENUM_VALUE="MapperKind.ENUM_VALUE"})(q||(q={}));function an(e,t){if(t){let n=e[t.name];if(k(n))return n}}function nl(e){if("getFields"in e){let t=e.getFields();for(let n in t)return t[n].name==="_fake"}return!1}function rl(e){switch(e.name){case It.name:return It;case vn.name:return vn;case X.name:return X;case pe.name:return pe;case St.name:return St;default:return e}}function il(e,t){let n=Object.create(null);for(let d in e)n[d]=e[d];let r=Object.create(null);for(let d in n){let m=n[d];if(m==null||d.startsWith("__"))continue;let h=m.name;if(!h.startsWith("__")){if(r[h]!=null){console.warn(`Duplicate schema type name ${h} found; keeping the existing one found in the schema`);continue}r[h]=m}}for(let d in r)r[d]=a(r[d]);let i=t.map(d=>o(d));return{typeMap:r,directives:i};function o(d){if(Nn(d))return d;let m=d.toConfig();return m.args=s(m.args),new Ae(m)}function s(d){let m={};for(let h in d){let y=d[h],I=f(y.type);I!=null&&(y.type=I,m[h]=y)}return m}function a(d){if(k(d)){let m=d.toConfig(),h={...m,fields:()=>c(m.fields),interfaces:()=>u(m.interfaces)};return new ne(h)}else if(G(d)){let m=d.toConfig(),h={...m,fields:()=>c(m.fields)};return"interfaces"in h&&(h.interfaces=()=>u(m.interfaces)),new _e(h)}else if(Z(d)){let m=d.toConfig(),h={...m,types:()=>u(m.types)};return new ze(h)}else if(Q(d)){let m=d.toConfig(),h={...m,fields:()=>l(m.fields)};return new Me(h)}else if(z(d)){let m=d.toConfig();return new xe(m)}else if(le(d)){if(nt(d))return d;let m=d.toConfig();return new Ie(m)}throw new Error(`Unexpected schema type: ${d}`)}function c(d){let m={};for(let h in d){let y=d[h],I=f(y.type);I!=null&&y.args&&(y.type=I,y.args=s(y.args),m[h]=y)}return m}function l(d){let m={};for(let h in d){let y=d[h],I=f(y.type);I!=null&&(y.type=I,m[h]=y)}return m}function u(d){let m=[];for(let h of d){let y=f(h);y!=null&&m.push(y)}return m}function f(d){if(H(d)){let m=f(d.ofType);return m!=null?new ee(m):null}else if(F(d)){let m=f(d.ofType);return m!=null?new V(m):null}else if(ut(d)){let m=n[d.name];return m===void 0&&(m=nl(d)?rl(d):a(d),r[m.name]=n[d.name]=m),m!=null?r[m.name]:null}return null}}function Ai(e,t,n=null,r=null){if(t==null)return t;let i=xt(e);if(re(i))return n!=null?n(i,t):t;if(H(i))return xi(t).map(o=>Ai(i.ofType,o,n,r));if(Q(i)){let o=i.getFields(),s={};for(let a in t){let c=o[a];c!=null&&(s[a]=Ai(c.type,t[a],n,r))}return r!=null?r(i,s):s}}function Di(e,t){return Ai(e,t,(n,r)=>{try{return n.serialize(r)}catch{return r}})}function Li(e,t){return Ai(e,t,(n,r)=>{try{return n.parseValue(r)}catch{return r}})}function yr(e,t={}){let n=al(sl(Ts(ol(Im(Ts(ol(e.getTypeMap(),e,Di),e,t,a=>re(a)),e,t),e,Li),e,t,a=>!re(a)),e,t),e,t),r=e.getDirectives(),i=Sm(r,e,t),{typeMap:o,directives:s}=il(n,i);return new it({...e.toConfig(),query:an(o,an(n,e.getQueryType())),mutation:an(o,an(n,e.getMutationType())),subscription:an(o,an(n,e.getSubscriptionType())),types:Object.values(o),directives:s})}function Ts(e,t,n,r=()=>!0){let i={};for(let o in e)if(!o.startsWith("__")){let s=e[o];if(s==null||!r(s)){i[o]=s;continue}let a=Om(t,n,o);if(a==null){i[o]=s;continue}let c=a(s,t);if(c===void 0){i[o]=s;continue}i[o]=c}return i}function Im(e,t,n){let r=Lm(n);return r?Ts(e,t,{[q.ENUM_TYPE]:i=>{let o=i.toConfig(),s=o.values,a={};for(let c in s){let l=s[c],u=r(l,i.name,t,c);if(u===void 0)a[c]=l;else if(Array.isArray(u)){let[f,d]=u;a[f]=d===void 0?l:d}else u!==null&&(a[c]=u)}return ki(new xe({...o,values:a}))}},i=>z(i)):e}function ol(e,t,n){let r=al(e,t,{[q.ARGUMENT]:i=>{if(i.defaultValue===void 0)return i;let o=Fi(e,i.type);if(o!=null)return{...i,defaultValue:n(o,i.defaultValue)}}});return sl(r,t,{[q.INPUT_OBJECT_FIELD]:i=>{if(i.defaultValue===void 0)return i;let o=Fi(r,i.type);if(o!=null)return{...i,defaultValue:n(o,i.defaultValue)}}})}function Fi(e,t){if(H(t)){let n=Fi(e,t.ofType);return n!=null?new ee(n):null}else if(F(t)){let n=Fi(e,t.ofType);return n!=null?new V(n):null}else if(ut(t)){let n=e[t.name];return n??null}return null}function sl(e,t,n){let r={};for(let i in e)if(!i.startsWith("__")){let o=e[i];if(!k(o)&&!G(o)&&!Q(o)){r[i]=o;continue}let s=Rm(t,n,i);if(s==null){r[i]=o;continue}let a=o.toConfig(),c=a.fields,l={};for(let u in c){let f=c[u],d=s(f,u,i,t);if(d===void 0)l[u]=f;else if(Array.isArray(d)){let[m,h]=d;h.astNode!=null&&(h.astNode={...h.astNode,name:{...h.astNode.name,value:m}}),l[m]=h===void 0?f:h}else d!==null&&(l[u]=d)}k(o)?r[i]=ki(new ne({...a,fields:l})):G(o)?r[i]=ki(new _e({...a,fields:l})):r[i]=ki(new Me({...a,fields:l}))}return r}function al(e,t,n){let r={};for(let i in e)if(!i.startsWith("__")){let o=e[i];if(!k(o)&&!G(o)){r[i]=o;continue}let s=Am(n);if(s==null){r[i]=o;continue}let a=o.toConfig(),c=a.fields,l={};for(let u in c){let f=c[u],d=f.args;if(d==null){l[u]=f;continue}let m=Object.keys(d);if(!m.length){l[u]=f;continue}let h={};for(let y of m){let I=d[y],T=s(I,u,i,t);if(T===void 0)h[y]=I;else if(Array.isArray(T)){let[b,x]=T;h[b]=x}else T!==null&&(h[y]=T)}l[u]={...f,args:h}}k(o)?r[i]=new ne({...a,fields:l}):G(o)?r[i]=new _e({...a,fields:l}):r[i]=new Me({...a,fields:l})}return r}function Sm(e,t,n){let r=Dm(n);if(r==null)return e.slice();let i=[];for(let o of e){let s=r(o,t);s===void 0?i.push(o):s!==null&&i.push(s)}return i}function wm(e,t){let n=e.getType(t),r=[q.TYPE];return k(n)?(r.push(q.COMPOSITE_TYPE,q.OBJECT_TYPE),t===e.getQueryType()?.name?r.push(q.ROOT_OBJECT,q.QUERY):t===e.getMutationType()?.name?r.push(q.ROOT_OBJECT,q.MUTATION):t===e.getSubscriptionType()?.name&&r.push(q.ROOT_OBJECT,q.SUBSCRIPTION)):Q(n)?r.push(q.INPUT_OBJECT_TYPE):G(n)?r.push(q.COMPOSITE_TYPE,q.ABSTRACT_TYPE,q.INTERFACE_TYPE):Z(n)?r.push(q.COMPOSITE_TYPE,q.ABSTRACT_TYPE,q.UNION_TYPE):z(n)?r.push(q.ENUM_TYPE):le(n)&&r.push(q.SCALAR_TYPE),r}function Om(e,t,n){let r=wm(e,n),i,o=[...r];for(;!i&&o.length>0;){let s=o.pop();i=t[s]}return i??null}function _m(e,t){let n=e.getType(t),r=[q.FIELD];return k(n)?(r.push(q.COMPOSITE_FIELD,q.OBJECT_FIELD),t===e.getQueryType()?.name?r.push(q.ROOT_FIELD,q.QUERY_ROOT_FIELD):t===e.getMutationType()?.name?r.push(q.ROOT_FIELD,q.MUTATION_ROOT_FIELD):t===e.getSubscriptionType()?.name&&r.push(q.ROOT_FIELD,q.SUBSCRIPTION_ROOT_FIELD)):G(n)?r.push(q.COMPOSITE_FIELD,q.INTERFACE_FIELD):Q(n)&&r.push(q.INPUT_OBJECT_FIELD),r}function Rm(e,t,n){let r=_m(e,n),i,o=[...r];for(;!i&&o.length>0;){let s=o.pop();i=t[s]}return i??null}function Am(e){let t=e[q.ARGUMENT];return t??null}function Dm(e){let t=e[q.DIRECTIVE];return t??null}function Lm(e){let t=e[q.ENUM_VALUE];return t??null}function ki(e){if(k(e)){let t=e.toConfig();if(t.astNode!=null){let n=[];for(let r in t.fields){let i=t.fields[r];i.astNode!=null&&n.push(i.astNode)}t.astNode={...t.astNode,kind:p.OBJECT_TYPE_DEFINITION,fields:n}}return t.extensionASTNodes!=null&&(t.extensionASTNodes=t.extensionASTNodes.map(n=>({...n,kind:p.OBJECT_TYPE_EXTENSION,fields:void 0}))),new ne(t)}else if(G(e)){let t=e.toConfig();if(t.astNode!=null){let n=[];for(let r in t.fields){let i=t.fields[r];i.astNode!=null&&n.push(i.astNode)}t.astNode={...t.astNode,kind:p.INTERFACE_TYPE_DEFINITION,fields:n}}return t.extensionASTNodes!=null&&(t.extensionASTNodes=t.extensionASTNodes.map(n=>({...n,kind:p.INTERFACE_TYPE_EXTENSION,fields:void 0}))),new _e(t)}else if(Q(e)){let t=e.toConfig();if(t.astNode!=null){let n=[];for(let r in t.fields){let i=t.fields[r];i.astNode!=null&&n.push(i.astNode)}t.astNode={...t.astNode,kind:p.INPUT_OBJECT_TYPE_DEFINITION,fields:n}}return t.extensionASTNodes!=null&&(t.extensionASTNodes=t.extensionASTNodes.map(n=>({...n,kind:p.INPUT_OBJECT_TYPE_EXTENSION,fields:void 0}))),new Me(t)}else if(z(e)){let t=e.toConfig();if(t.astNode!=null){let n=[];for(let r in t.values){let i=t.values[r];i.astNode!=null&&n.push(i.astNode)}t.astNode={...t.astNode,values:n}}return t.extensionASTNodes!=null&&(t.extensionASTNodes=t.extensionASTNodes.map(n=>({...n,values:void 0}))),new xe(t)}else return e}function cl(e){return km(e.getTypeMap(),e.getDirectives()),e}function km(e,t){let n=Object.create(null);for(let l in e){let u=e[l];if(u==null||l.startsWith("__"))continue;let f=u.name;if(!f.startsWith("__")){if(n[f]!=null){console.warn(`Duplicate schema type name ${f} found; keeping the existing one found in the schema`);continue}n[f]=u}}for(let l in n){let u=n[l];e[l]=u}for(let l of t)l.args=l.args.filter(u=>(u.type=c(u.type),u.type!==null));for(let l in e){let u=e[l];!l.startsWith("__")&&l in n&&u!=null&&r(u)}for(let l in e)!l.startsWith("__")&&!(l in n)&&delete e[l];function r(l){if(k(l)){i(l),o(l);return}else if(G(l)){i(l),"getInterfaces"in l&&o(l);return}else if(Z(l)){a(l);return}else if(Q(l)){s(l);return}else if(re(l))return;throw new Error(`Unexpected schema type: ${l}`)}function i(l){let u=l.getFields();for(let[f,d]of Object.entries(u))d.args.map(m=>(m.type=c(m.type),m.type===null?null:m)).filter(Boolean),d.type=c(d.type),d.type===null&&delete u[f]}function o(l){if("getInterfaces"in l){let u=l.getInterfaces();u.push(...u.splice(0).map(f=>c(f)).filter(Boolean))}}function s(l){let u=l.getFields();for(let[f,d]of Object.entries(u))d.type=c(d.type),d.type===null&&delete u[f]}function a(l){let u=l.getTypes();u.push(...u.splice(0).map(f=>c(f)).filter(Boolean))}function c(l){if(H(l)){let u=c(l.ofType);return u!=null?new ee(u):null}else if(F(l)){let u=c(l.ofType);return u!=null?new V(u):null}else if(ut(l)){let u=e[l.name];if(u&&l!==u)return u}return l}}function Ci(e,t){let n=e.getTypeMap();for(let r in n){let i=n[r];if(!ce(i).name.startsWith("__")&&k(i)){let o=i.getFields();for(let s in o){let a=o[s];t(a,r,s)}}}}function Es(e,t){let n=e.getTypeMap();for(let r in n){let i=n[r];if(!ce(i).name.startsWith("__")){if(k(i)){let o=i.getFields();for(let s in o){let a=o[s];for(let c of a.args)c.defaultValue=t(c.type,c.defaultValue)}}else if(Q(i)){let o=i.getFields();for(let s in o){let a=o[s];a.defaultValue=t(a.type,a.defaultValue)}}}}}function Ct(e,t=!1,n=!1,r=!1){if(n&&r){let o;if(e.every(a=>{if(Array.isArray(a)){if(o===void 0)return o=a.length,!0;if(o===a.length)return!0}return!1}))return new Array(o).fill(null).map((a,c)=>Ct(e.map(l=>l[c]),t,n,r))}let i={};t&&Object.setPrototypeOf(i,Object.create(Object.getPrototypeOf(e[0])));for(let o of e)if(ll(o)){if(t){let s=Object.getPrototypeOf(i),a=Object.getPrototypeOf(o);if(a)for(let c of Object.getOwnPropertyNames(a)){let l=Object.getOwnPropertyDescriptor(a,c);kt(l)&&Object.defineProperty(s,c,l)}}for(let s in o)ll(o[s])?s in i?i[s]=Ct([i[s],o[s]],t,n,r):Object.assign(i,{[s]:o[s]}):n&&Array.isArray(i[s])?Array.isArray(o[s])?r&&i[s].length===o[s].length?i[s]=Ct([i[s],o[s]],t,n,r):i[s].push(...o[s]):i[s].push(o[s]):Object.assign(i,{[s]:o[s]})}return i}function ll(e){return e&&typeof e=="object"&&!Array.isArray(e)}function ul(e){return e&&typeof e=="object"&&"kind"in e&&e.kind===p.DOCUMENT}function pl(e,t={}){let{requireResolversForArgs:n,requireResolversForNonScalar:r,requireResolversForAllFields:i}=t;if(i&&(n||r))throw new TypeError("requireResolversForAllFields takes precedence over the more specific assertions. Please configure either requireResolversForAllFields or requireResolversForArgs / requireResolversForNonScalar, but not a combination of them.");Ci(e,(o,s,a)=>{i&&vs("requireResolversForAllFields",i,o,s,a),n&&o.args.length>0&&vs("requireResolversForArgs",n,o,s,a),r!=="ignore"&&!le(ce(o.type))&&vs("requireResolversForNonScalar",r,o,s,a)})}function vs(e,t,n,r,i){if(!n.resolve){let o=`Resolver missing for "${r}.${i}".
To disable this validator, use:
  resolverValidationOptions: {
    ${e}: 'ignore'
  }`;if(t==="error")throw new Error(o);t==="warn"&&console.warn(o);return}if(typeof n.resolve!="function")throw new Error(`Resolver "${r}.${i}" must be a function`)}function fl(e,t){yr(e,{[q.ABSTRACT_TYPE]:n=>{if(!n.resolveType){let r=`Type "${n.name}" is missing a "__resolveType" resolver. Pass 'ignore' into "resolverValidationOptions.requireResolversForResolveType" to disable this error.`;if(t==="error")throw new Error(r);t==="warn"&&console.warn(r)}}})}function dl(e,t){let n={},r=e.getTypeMap();for(let i in r){let o=r[i];if("getInterfaces"in o){n[i]={};for(let a of o.getInterfaces())if(t[a.name])for(let c in t[a.name])(c==="__isTypeOf"||!c.startsWith("__"))&&(n[i][c]=t[a.name][c]);let s=t[i];n[i]={...n[i],...s}}else{let s=t[i];s!=null&&(n[i]=s)}}return n}function ml({schema:e,resolvers:t,defaultFieldResolver:n,resolverValidationOptions:r={},inheritResolversFromInterfaces:i=!1,updateResolversInPlace:o=!1}){let{requireResolversToMatchSchema:s="error",requireResolversForResolveType:a}=r,c=i?dl(e,t):t;for(let l in c){let u=c[l];if(typeof u!=="object")throw new Error(`"${l}" defined in resolvers, but has invalid value "${u}". The resolver's value must be of type object.`);let d=e.getType(l);if(d==null){let m=`"${l}" defined in resolvers, but not in schema`;if(s&&s!=="error"){s==="warn"&&console.warn(m);continue}throw new Error(m)}else if(nt(d))for(let m in u)m.startsWith("__")?d[m.substring(2)]=u[m]:d[m]=u[m];else if(z(d)){let m=d.getValues();for(let h in u)if(!h.startsWith("__")&&!m.some(y=>y.name===h)&&s&&s!=="ignore"){let y=`${d.name}.${h} was defined in resolvers, but not present within ${d.name}`;if(s==="error")throw new Error(y);console.warn(y)}}else if(Z(d)){for(let m in u)if(!m.startsWith("__")&&s&&s!=="ignore"){let h=`${d.name}.${m} was defined in resolvers, but ${d.name} is not an object or interface type`;if(s==="error")throw new Error(h);console.warn(h)}}else if(k(d)||G(d)){for(let m in u)if(!m.startsWith("__"))if(d.getFields()[m]==null){if(s&&s!=="ignore"){let I=`${l}.${m} defined in resolvers, but not in schema`;if(s==="error")throw new Error(I);console.error(I)}}else{let I=u[m];if(typeof I!="function"&&typeof I!="object")throw new Error(`Resolver ${l}.${m} must be object or function`)}}}return e=o?Fm(e,c,n):Cm(e,c,n),a&&a!=="ignore"&&fl(e,a),e}function Fm(e,t,n){let r=e.getTypeMap();for(let i in t){let o=e.getType(i),s=t[i];if(le(o))for(let a in s)a.startsWith("__")?o[a.substring(2)]=s[a]:a==="astNode"&&o.astNode!=null?o.astNode={...o.astNode,description:s?.astNode?.description??o.astNode.description,directives:(o.astNode.directives??[]).concat(s?.astNode?.directives??[])}:a==="extensionASTNodes"&&o.extensionASTNodes!=null?o.extensionASTNodes=o.extensionASTNodes.concat(s?.extensionASTNodes??[]):a==="extensions"&&o.extensions!=null&&s.extensions!=null?o.extensions=Object.assign(Object.create(null),o.extensions,s.extensions):o[a]=s[a];else if(z(o)){let a=o.toConfig(),c=a.values;for(let l in s)l.startsWith("__")?a[l.substring(2)]=s[l]:l==="astNode"&&a.astNode!=null?a.astNode={...a.astNode,description:s?.astNode?.description??a.astNode.description,directives:(a.astNode.directives??[]).concat(s?.astNode?.directives??[])}:l==="extensionASTNodes"&&a.extensionASTNodes!=null?a.extensionASTNodes=a.extensionASTNodes.concat(s?.extensionASTNodes??[]):l==="extensions"&&o.extensions!=null&&s.extensions!=null?o.extensions=Object.assign(Object.create(null),o.extensions,s.extensions):c[l]&&(c[l].value=s[l]);r[i]=new xe(a)}else if(Z(o))for(let a in s)a.startsWith("__")&&(o[a.substring(2)]=s[a]);else if(k(o)||G(o))for(let a in s){if(a.startsWith("__")){o[a.substring(2)]=s[a];continue}let l=o.getFields()[a];if(l!=null){let u=s[a];typeof u=="function"?l.resolve=u.bind(s):hl(l,u)}}}return Es(e,Di),cl(e),Es(e,Li),n!=null&&Ci(e,i=>{i.resolve||(i.resolve=n)}),e}function Cm(e,t,n){return e=yr(e,{[q.SCALAR_TYPE]:r=>{let i=r.toConfig(),o=t[r.name];if(!nt(r)&&o!=null){for(let s in o)s.startsWith("__")?i[s.substring(2)]=o[s]:s==="astNode"&&i.astNode!=null?i.astNode={...i.astNode,description:o?.astNode?.description??i.astNode.description,directives:(i.astNode.directives??[]).concat(o?.astNode?.directives??[])}:s==="extensionASTNodes"&&i.extensionASTNodes!=null?i.extensionASTNodes=i.extensionASTNodes.concat(o?.extensionASTNodes??[]):s==="extensions"&&i.extensions!=null&&o.extensions!=null?i.extensions=Object.assign(Object.create(null),r.extensions,o.extensions):i[s]=o[s];return new Ie(i)}},[q.ENUM_TYPE]:r=>{let i=t[r.name],o=r.toConfig(),s=o.values;if(i!=null){for(let a in i)a.startsWith("__")?o[a.substring(2)]=i[a]:a==="astNode"&&o.astNode!=null?o.astNode={...o.astNode,description:i?.astNode?.description??o.astNode.description,directives:(o.astNode.directives??[]).concat(i?.astNode?.directives??[])}:a==="extensionASTNodes"&&o.extensionASTNodes!=null?o.extensionASTNodes=o.extensionASTNodes.concat(i?.extensionASTNodes??[]):a==="extensions"&&o.extensions!=null&&i.extensions!=null?o.extensions=Object.assign(Object.create(null),r.extensions,i.extensions):s[a]&&(s[a].value=i[a]);return new xe(o)}},[q.UNION_TYPE]:r=>{let i=t[r.name];if(i!=null){let o=r.toConfig();return i.__resolveType&&(o.resolveType=i.__resolveType),new ze(o)}},[q.OBJECT_TYPE]:r=>{let i=t[r.name];if(i!=null){let o=r.toConfig();return i.__isTypeOf&&(o.isTypeOf=i.__isTypeOf),new ne(o)}},[q.INTERFACE_TYPE]:r=>{let i=t[r.name];if(i!=null){let o=r.toConfig();return i.__resolveType&&(o.resolveType=i.__resolveType),new _e(o)}},[q.COMPOSITE_FIELD]:(r,i,o)=>{let s=t[o];if(s!=null){let a=s[i];if(a!=null){let c={...r};return typeof a=="function"?c.resolve=a.bind(s):hl(c,a),c}}}}),n!=null&&(e=yr(e,{[q.OBJECT_FIELD]:r=>({...r,resolve:r.resolve!=null?r.resolve:n})})),e}function hl(e,t){for(let n in t)e[n]=t[n]}function bs(e,t){if(!e||Array.isArray(e)&&e.length===0)return{};if(!Array.isArray(e))return e;if(e.length===1)return e[0]||{};let n=new Array;for(let i of e)Array.isArray(i)&&(i=bs(i)),typeof i=="object"&&i&&n.push(i);let r=Ct(n,!0);if(t?.exclusions)for(let i of t.exclusions){let[o,s]=i.split(".");!s||s==="*"?delete r[o]:r[o]&&delete r[o][s]}return r}function gl(e,t,n){let r=Pm([...t,...e].filter(kt),n);return n&&n.sort&&r.sort(Lt),r}function Pm(e,t){return e.reduce((n,r)=>{let i=n.findIndex(o=>o.name.value===r.name.value);return i===-1?n.concat([r]):(t?.reverseArguments||(n[i]=r),n)},[])}function Mm(e,t){return!!e.find(n=>n.name.value===t.name.value)}function Tl(e,t){return!!t?.[e.name.value]?.repeatable}function yl(e,t){return t.some(({value:n})=>n===e.value)}function El(e,t){let n=[...t];for(let r of e){let i=n.findIndex(o=>o.name.value===r.name.value);if(i>-1){let o=n[i];if(o.value.kind==="ListValue"){let s=o.value.values,a=r.value.values;o.value.values=bl(s,a,(c,l)=>{let u=c.value;return!u||!l.some(f=>f.value===u)})}else o.value=r.value}else n.push(r)}return n}function jm(e,t){return e.map((n,r,i)=>{let o=i.findIndex(s=>s.name.value===n.name.value);if(o!==r&&!Tl(n,t)){let s=i[o];return n.arguments=El(n.arguments,s.arguments),null}return n}).filter(kt)}function Oe(e=[],t=[],n,r){let i=n&&n.reverseDirectives,o=i?e:t,s=i?t:e,a=jm([...o],r);for(let c of s)if(Mm(a,c)&&!Tl(c,r)){let l=a.findIndex(f=>f.name.value===c.name.value),u=a[l];a[l].arguments=El(c.arguments||[],u.arguments||[])}else a.push(c);return a}function vl(e,t){return t?{...e,arguments:bl(t.arguments||[],e.arguments||[],(n,r)=>!yl(n.name,r.map(i=>i.name))),locations:[...t.locations,...e.locations.filter(n=>!yl(n,t.locations))]}:e}function bl(e,t,n){return e.concat(t.filter(r=>n(r,e)))}function Nl(e,t,n,r){if(n?.consistentEnumMerge){let s=[];e&&s.push(...e),e=t,t=s}let i=new Map;if(e)for(let s of e)i.set(s.name.value,s);if(t)for(let s of t){let a=s.name.value;if(i.has(a)){let c=i.get(a);c.description=s.description||c.description,c.directives=Oe(s.directives,c.directives,r)}else i.set(a,s)}let o=[...i.values()];return n&&n.sort&&o.sort(Lt),o}function xl(e,t,n,r){return t?{name:e.name,description:e.description||t.description,kind:n?.convertExtensions||e.kind==="EnumTypeDefinition"||t.kind==="EnumTypeDefinition"?"EnumTypeDefinition":"EnumTypeExtension",loc:e.loc,directives:Oe(e.directives,t.directives,n,r),values:Nl(e.values,t.values,n)}:n?.convertExtensions?{...e,kind:p.ENUM_TYPE_DEFINITION}:e}function Il(e){return typeof e=="string"}function Sl(e){return e instanceof dt}function Ns(e){let t=e;for(;t.kind===p.LIST_TYPE||t.kind==="NonNullType";)t=t.type;return t}function xs(e){return e.kind!==p.NAMED_TYPE}function Pi(e){return e.kind===p.LIST_TYPE}function Mt(e){return e.kind===p.NON_NULL_TYPE}function Tr(e){return Pi(e)?`[${Tr(e.type)}]`:Mt(e)?`${Tr(e.type)}!`:e.name.value}var Pt;(function(e){e[e.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",e[e.A_EQUALS_B=0]="A_EQUALS_B",e[e.A_GREATER_THAN_B=1]="A_GREATER_THAN_B"})(Pt||(Pt={}));function wl(e,t){return e==null&&t==null?Pt.A_EQUALS_B:e==null?Pt.A_SMALLER_THAN_B:t==null?Pt.A_GREATER_THAN_B:e<t?Pt.A_SMALLER_THAN_B:e>t?Pt.A_GREATER_THAN_B:Pt.A_EQUALS_B}function Um(e,t){let n=e.findIndex(r=>r.name.value===t.name.value);return[n>-1?e[n]:null,n]}function Fn(e,t,n,r,i){let o=[];if(n!=null&&o.push(...n),t!=null)for(let s of t){let[a,c]=Um(o,s);if(a&&!r?.ignoreFieldConflicts){let l=r?.onFieldTypeConflict&&r.onFieldTypeConflict(a,s,e,r?.throwOnConflict)||Vm(e,a,s,r?.throwOnConflict);l.arguments=gl(s.arguments||[],a.arguments||[],r),l.directives=Oe(s.directives,a.directives,r,i),l.description=s.description||a.description,o[c]=l}else o.push(s)}if(r&&r.sort&&o.sort(Lt),r&&r.exclusions){let s=r.exclusions;return o.filter(a=>!s.includes(`${e.name.value}.${a.name.value}`))}return o}function Vm(e,t,n,r=!1){let i=Tr(t.type),o=Tr(n.type);if(i!==o){let s=Ns(t.type),a=Ns(n.type);if(s.name.value!==a.name.value)throw new Error(`Field "${n.name.value}" already defined with a different type. Declared as "${s.name.value}", but you tried to override with "${a.name.value}"`);if(!Er(t.type,n.type,!r))throw new Error(`Field '${e.name.value}.${t.name.value}' changed type from '${i}' to '${o}'`)}return Mt(n.type)&&!Mt(t.type)&&(t.type=n.type),t}function Er(e,t,n=!1){if(!xs(e)&&!xs(t))return e.toString()===t.toString();if(Mt(t)){let r=Mt(e)?e.type:e;return Er(r,t.type)}return Mt(e)?Er(t,e,n):Pi(e)?Pi(t)&&Er(e.type,t.type)||Mt(t)&&Er(e,t.type):!1}function Ol(e,t,n,r){if(t)try{return{name:e.name,description:e.description||t.description,kind:n?.convertExtensions||e.kind==="InputObjectTypeDefinition"||t.kind==="InputObjectTypeDefinition"?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:Fn(e,e.fields,t.fields,n),directives:Oe(e.directives,t.directives,n,r)}}catch(i){throw new Error(`Unable to merge GraphQL input type "${e.name.value}": ${i.message}`)}return n?.convertExtensions?{...e,kind:p.INPUT_OBJECT_TYPE_DEFINITION}:e}function $m(e,t){return!!e.find(n=>n.name.value===t.name.value)}function Cn(e=[],t=[],n={}){let r=[...t,...e.filter(i=>!$m(t,i))];return n&&n.sort&&r.sort(Lt),r}function _l(e,t,n,r){if(t)try{return{name:e.name,description:e.description||t.description,kind:n?.convertExtensions||e.kind==="InterfaceTypeDefinition"||t.kind==="InterfaceTypeDefinition"?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:Fn(e,e.fields,t.fields,n),directives:Oe(e.directives,t.directives,n,r),interfaces:e.interfaces?Cn(e.interfaces,t.interfaces,n):void 0}}catch(i){throw new Error(`Unable to merge GraphQL interface "${e.name.value}": ${i.message}`)}return n?.convertExtensions?{...e,kind:p.INTERFACE_TYPE_DEFINITION}:e}var Cl=Gt(Al(),1);function Dl(e,t,n,r){return t?{name:e.name,description:e.description||t.description,kind:n?.convertExtensions||e.kind==="ScalarTypeDefinition"||t.kind==="ScalarTypeDefinition"?"ScalarTypeDefinition":"ScalarTypeExtension",loc:e.loc,directives:Oe(e.directives,t.directives,n,r)}:n?.convertExtensions?{...e,kind:p.SCALAR_TYPE_DEFINITION}:e}var Mi={query:"Query",mutation:"Mutation",subscription:"Subscription"};function Qm(e=[],t=[]){let n=[];for(let r in Mi){let i=e.find(o=>o.operation===r)||t.find(o=>o.operation===r);i&&n.push(i)}return n}function Ll(e,t,n,r){return t?{kind:e.kind===p.SCHEMA_DEFINITION||t.kind===p.SCHEMA_DEFINITION?p.SCHEMA_DEFINITION:p.SCHEMA_EXTENSION,description:e.description||t.description,directives:Oe(e.directives,t.directives,n,r),operationTypes:Qm(e.operationTypes,t.operationTypes)}:n?.convertExtensions?{...e,kind:p.SCHEMA_DEFINITION}:e}function kl(e,t,n,r){if(t)try{return{name:e.name,description:e.description||t.description,kind:n?.convertExtensions||e.kind==="ObjectTypeDefinition"||t.kind==="ObjectTypeDefinition"?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:Fn(e,e.fields,t.fields,n),directives:Oe(e.directives,t.directives,n,r),interfaces:Cn(e.interfaces,t.interfaces,n)}}catch(i){throw new Error(`Unable to merge GraphQL type "${e.name.value}": ${i.message}`)}return n?.convertExtensions?{...e,kind:p.OBJECT_TYPE_DEFINITION}:e}function Fl(e,t,n,r){return t?{name:e.name,description:e.description||t.description,directives:Oe(e.directives,t.directives,n,r),kind:n?.convertExtensions||e.kind==="UnionTypeDefinition"||t.kind==="UnionTypeDefinition"?p.UNION_TYPE_DEFINITION:p.UNION_TYPE_EXTENSION,loc:e.loc,types:Cn(e.types,t.types,n)}:n?.convertExtensions?{...e,kind:p.UNION_TYPE_DEFINITION}:e}var cn="SCHEMA_DEF_SYMBOL";function Bm(e){return"name"in e}function Os(e,t,n={}){let r=n;for(let i of e)if(Bm(i)){let o=i.name?.value;if(t?.commentDescriptions&&Zc(i),o==null)continue;if(t?.exclusions?.includes(o+".*")||t?.exclusions?.includes(o))delete r[o];else switch(i.kind){case p.OBJECT_TYPE_DEFINITION:case p.OBJECT_TYPE_EXTENSION:r[o]=kl(i,r[o],t,n);break;case p.ENUM_TYPE_DEFINITION:case p.ENUM_TYPE_EXTENSION:r[o]=xl(i,r[o],t,n);break;case p.UNION_TYPE_DEFINITION:case p.UNION_TYPE_EXTENSION:r[o]=Fl(i,r[o],t,n);break;case p.SCALAR_TYPE_DEFINITION:case p.SCALAR_TYPE_EXTENSION:r[o]=Dl(i,r[o],t,n);break;case p.INPUT_OBJECT_TYPE_DEFINITION:case p.INPUT_OBJECT_TYPE_EXTENSION:r[o]=Ol(i,r[o],t,n);break;case p.INTERFACE_TYPE_DEFINITION:case p.INTERFACE_TYPE_EXTENSION:r[o]=_l(i,r[o],t,n);break;case p.DIRECTIVE_DEFINITION:r[o]&&o in{}&&((0,Cl.isNode)(r[o])||(r[o]=void 0)),r[o]=vl(i,r[o]);break}}else(i.kind===p.SCHEMA_DEFINITION||i.kind===p.SCHEMA_EXTENSION)&&(r[cn]=Ll(i,r[cn],t));return r}function _s(e,t){Ri();let n={kind:p.DOCUMENT,definitions:Hm(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...t})},r;return t?.commentDescriptions?r=el(n):r=n,Ri(),r}function Pn(e,t,n=[],r=[],i=new Set){if(e&&!i.has(e))if(i.add(e),typeof e=="function")Pn(e(),t,n,r,i);else if(Array.isArray(e))for(let o of e)Pn(o,t,n,r,i);else if(Tt(e)){let o=Wc(e,t);Pn(o.definitions,t,n,r,i)}else if(Il(e)||Sl(e)){let o=Nt(e,t);Pn(o.definitions,t,n,r,i)}else if(typeof e=="object"&&ti(e))e.kind===p.DIRECTIVE_DEFINITION?n.push(e):r.push(e);else if(ul(e))Pn(e.definitions,t,n,r,i);else throw new Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof e}`);return{allDirectives:n,allNodes:r}}function Hm(e,t){Ri();let{allDirectives:n,allNodes:r}=Pn(e,t),i=Os(n,t),o=Os(r,t,i);if(t?.useSchemaDefinition){let a=o[cn]||{kind:p.SCHEMA_DEFINITION,operationTypes:[]},c=a.operationTypes;for(let l in Mi)if(!c.find(f=>f.operation===l)){let f=Mi[l],d=o[f];d!=null&&d.name!=null&&c.push({kind:p.OPERATION_TYPE_DEFINITION,type:{kind:p.NAMED_TYPE,name:d.name},operation:l})}a?.operationTypes?.length!=null&&a.operationTypes.length>0&&(o[cn]=a)}t?.forceSchemaDefinition&&!o[cn]?.operationTypes?.length&&(o[cn]={kind:p.SCHEMA_DEFINITION,operationTypes:[{kind:p.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:p.NAMED_TYPE,name:{kind:p.NAME,value:"Query"}}}]});let s=Object.values(o);if(t?.sort){let a=typeof t.sort=="function"?t.sort:wl;s.sort((c,l)=>a(c.name?.value,l.name?.value))}return s}function Pl(e){return Ct(e,!1,!0)}function Mn(e,t){e&&(e.extensions=Ct([e.extensions||{},t||{}],!1,!0))}function Ml(e,t){Mn(e,t.schemaExtensions);for(let[n,r]of Object.entries(t.types||{})){let i=e.getType(n);if(i){if(Mn(i,r.extensions),r.type==="object"||r.type==="interface")for(let[o,s]of Object.entries(r.fields)){let a=i.getFields()[o];if(a){Mn(a,s.extensions);for(let[c,l]of Object.entries(s.arguments))Mn(a.args.find(u=>u.name===c),l)}}else if(r.type==="input")for(let[o,s]of Object.entries(r.fields)){let a=i.getFields()[o];Mn(a,s.extensions)}else if(r.type==="enum")for(let[o,s]of Object.entries(r.values)){let a=i.getValue(o);Mn(a,s)}}}return e}function jl({typeDefs:e,resolvers:t={},resolverValidationOptions:n={},inheritResolversFromInterfaces:r=!1,updateResolversInPlace:i=!1,schemaExtensions:o,defaultFieldResolver:s,...a}){if(typeof n!="object")throw new Error("Expected `resolverValidationOptions` to be an object");if(!e)throw new Error("Must provide typeDefs");let c;if(Tt(e))c=e;else if(a?.commentDescriptions){let l=_s(e,{...a,commentDescriptions:!0});c=gi(l,a)}else{let l=_s(e,a);c=mr(l,a)}return c=ml({schema:c,resolvers:bs(t),resolverValidationOptions:n,inheritResolversFromInterfaces:r,updateResolversInPlace:i,defaultFieldResolver:s}),Object.keys(n).length>0&&pl(c,n),o&&(o=Pl(xi(o)),Ml(c,o)),c}function ji(e){return jl(e)}var Ul=new WeakMap;var sA=Symbol("ENVELOP_IS_INTROSPECTION");function Wm(e){return e.length===1?e[0]:{schema:e[0],document:e[1],rootValue:e[2],contextValue:e[3],variableValues:e[4],operationName:e[5],fieldResolver:e[6],subscribeFieldResolver:e[7]}}var Rs=e=>(...t)=>e(Wm(t));function As(e,t){let n=e[Symbol.asyncIterator]();async function r(o){if(o.done)return o;try{return{value:await t(o.value),done:!1}}catch(s){try{await n.return?.()}catch{}throw s}}let i={[Symbol.asyncIterator](){return i},async next(){return await r(await n.next())},async return(){let o=n.return?.();return o?await r(await o):{value:void 0,done:!0}},async throw(o){let s=n.throw?.();if(s)return await r(await s);throw o}};return i}function Ym(e){return e.length===1?e[0]:{schema:e[0],document:e[1],rootValue:e[2],contextValue:e[3],variableValues:e[4],operationName:e[5],fieldResolver:e[6],typeResolver:e[7]}}var Ds=e=>(...t)=>e(Ym(t));function We(e){return typeof e=="object"&&e!=null&&typeof e[Symbol.asyncIterator]=="function"}function Ls(e,t){if(We(e.result))return{onNext:t};t({args:e.args,result:e.result,setResult:e.setResult})}function ks(e,t){let n=e[Symbol.asyncIterator](),r=!1,i={[Symbol.asyncIterator](){return i},async next(){let o=await n.next();return o.done&&r===!1&&(r=!0,t()),o},async return(){let o=n.return?.();return r===!1&&(r=!0,t()),o?await o:{done:!0,value:void 0}},async throw(o){let s=n.throw?.();if(s)return await s;throw o}};return i}function Vl(e,t){let n=e[Symbol.asyncIterator](),r={[Symbol.asyncIterator](){return r},async next(){try{return await n.next()}catch(i){return t(i),{done:!0,value:void 0}}},async return(){let i=n.return?.();return i?await i:{done:!0,value:void 0}},async throw(i){let o=n.throw?.();if(o)return await o;throw i}};return r}function Ui(e){throw Error(`No \`${e}\` function found! Register it using "useEngine" plugin.`)}function $l({plugins:e}){let t=null,n=!1,r=()=>Ui("parse"),i=()=>Ui("validate"),o=()=>Ui("execute"),s=()=>Ui("subscribe"),a=(b,x=-1)=>{if(t=b,n)for(let[N,O]of e.entries())N!==x&&O.onSchemaChange&&O.onSchemaChange({schema:t,replaceSchema:j=>{a(j,N)}})},c=[];for(let[b,x]of e.entries())x.onPluginInit&&x.onPluginInit({plugins:e,addPlugin:N=>{e.push(N)},setSchema:N=>a(N,b),registerContextErrorHandler:N=>c.push(N)});let l={init:[],parse:[],validate:[],subscribe:[],execute:[],context:[]};for(let{onContextBuilding:b,onExecute:x,onParse:N,onSubscribe:O,onValidate:j,onEnveloped:w}of e)w&&l.init.push(w),b&&l.context.push(b),x&&l.execute.push(x),N&&l.parse.push(N),O&&l.subscribe.push(O),j&&l.validate.push(j);let u=b=>{for(let[x,N]of l.init.entries())N({context:b,extendContext:O=>{b&&Object.assign(b,O)},setSchema:O=>a(O,x)})},f=l.parse.length?b=>(x,N)=>{let O=null,j=r,w=b,U=[];for(let B of l.parse){let R=B({context:w,extendContext:$=>{Object.assign(w,$)},params:{source:x,options:N},parseFn:j,setParseFn:$=>{j=$},setParsedDocument:$=>{O=$}});R&&U.push(R)}if(O===null)try{O=j(x,N)}catch(B){O=B}for(let B of U)B({context:w,extendContext:R=>{Object.assign(w,R)},replaceParseResult:R=>{O=R},result:O});if(O===null)throw new Error("Failed to parse document.");if(O instanceof Error)throw O;return Ul.set(O,x.toString()),O}:()=>r,d=l.validate.length?b=>(x,N,O,j,w)=>{let U=O?[...O]:void 0,B=i,R=null,$=b,K=[];for(let te of l.validate){let Ge=te({context:$,extendContext:ct=>{Object.assign($,ct)},params:{schema:x,documentAST:N,rules:U,typeInfo:j,options:w},validateFn:B,addValidationRule:ct=>{U||(U=[]),U.push(ct)},setValidationFn:ct=>{B=ct},setResult:ct=>{R=ct}});Ge&&K.push(Ge)}if(R||(R=B(x,N,U,j,w)),!R)return;let be=R.length===0;for(let te of K)te({valid:be,result:R,context:$,extendContext:Ge=>{Object.assign($,Ge)},setResult:Ge=>{R=Ge}});return R}:()=>i,m=l.context.length?b=>async x=>{let N=[],O=b;x&&Object.assign(O,x);try{let j=!1;for(let w of l.context){let U=await w({context:O,extendContext:B=>{Object.assign(O,B)},breakContextBuilding:()=>{j=!0}});if(typeof U=="function"&&N.push(U),j===!0)break}for(let w of N)w({context:O,extendContext:U=>{Object.assign(O,U)}});return O}catch(j){let w=j;for(let U of c)U({context:O,error:w,setError:B=>{w=B}});throw w}}:b=>x=>(x&&Object.assign(b,x),b),y=l.subscribe.length?Rs(async b=>{let x=s,N=[],O=[],j=b.contextValue||{},w;for(let R of l.subscribe){let $=await R({subscribeFn:x,setSubscribeFn:K=>{x=K},extendContext:K=>{Object.assign(j,K)},args:b,setResultAndStopExecution:K=>{w=K}});if($&&($.onSubscribeResult&&N.push($.onSubscribeResult),$.onSubscribeError&&O.push($.onSubscribeError)),w!==void 0)break}if(w===void 0&&(w=await x({...b,contextValue:j})),!w)return;let U=[],B=[];for(let R of N){let $=R({args:b,result:w,setResult:K=>{w=K}});$&&($.onNext&&U.push($.onNext),$.onEnd&&B.push($.onEnd))}return U.length&&We(w)&&(w=As(w,async R=>{for(let $ of U)await $({args:b,result:R,setResult:K=>R=K});return R})),B.length&&We(w)&&(w=ks(w,()=>{for(let R of B)R()})),O.length&&We(w)&&(w=Vl(w,R=>{let $=R;for(let K of O)K({error:$,setError:be=>{$=be}});throw $})),w}):Rs(s),T=l.execute.length?Ds(async b=>{let x=o,N,O=[],j=b.contextValue||{};for(let B of l.execute){let R=await B({executeFn:x,setExecuteFn:$=>{x=$},setResultAndStopExecution:$=>{N=$},extendContext:$=>{if(typeof $=="object")Object.assign(j,$);else throw new Error(`Invalid context extension provided! Expected "object", got: "${JSON.stringify($)}" (${typeof $})`)},args:b});if(R?.onExecuteDone&&O.push(R.onExecuteDone),N!==void 0)break}N===void 0&&(N=await x({...b,contextValue:j}));let w=[],U=[];for(let B of O){let R=await B({args:b,result:N,setResult:$=>{N=$}});R&&(R.onNext&&w.push(R.onNext),R.onEnd&&U.push(R.onEnd))}return w.length&&We(N)&&(N=As(N,async B=>{for(let R of w)await R({args:b,result:B,setResult:$=>{B=$}});return B})),U.length&&We(N)&&(N=ks(N,()=>{for(let B of U)B()})),N}):Ds(o);if(n=!0,t)for(let[b,x]of e.entries())x.onSchemaChange&&x.onSchemaChange({schema:t,replaceSchema:N=>a(N,b)});return{getCurrentSchema(){return t},init:u,parse:f,validate:d,execute:T,subscribe:y,contextFactory:m}}function zm(e){return e!=null}function Gl(e){let t=e.plugins.filter(zm),n=$l({plugins:t}),r=(i={})=>{let o=n;return o.init(i),{parse:o.parse(i),validate:o.validate(i),contextFactory:o.contextFactory(i),execute:o.execute,subscribe:o.subscribe,schema:o.getCurrentSchema()}};return r._plugins=t,r}var Jm="Unexpected error.";function Km(e){return e instanceof Error&&e.name==="GraphQLError"}function ql(e){return Km(e)?e.originalError!=null?ql(e.originalError):!0:!1}function Xm(e,t,n){let r=new Error(e);if(r.name="GraphQLError",n){let i=t instanceof Error?{message:t.message,stack:t.stack}:{message:String(t)};Object.defineProperty(r,"extensions",{get(){return i}})}return Object.defineProperty(r,"toJSON",{value(){return{message:r.message,extensions:r.extensions}}}),r}var Zm=e=>(t,n)=>ql(t)?t:Xm(n,t,e),eh=globalThis.process?.env?.NODE_ENV==="development",th=Zm(eh),nh=(e,t)=>({result:n,setResult:r})=>{n.errors!=null&&r({...n,errors:n.errors.map(i=>e(i,t))})};function Ql(e){let t=e?.maskError??th,n=e?.errorMessage||Jm,r=nh(t,n);return{onPluginInit(i){i.registerContextErrorHandler(({error:o,setError:s})=>{s(t(o,n))})},onExecute(){return{onExecuteDone(i){return Ls(i,r)}}},onSubscribe(){return{onSubscribeResult(i){return Ls(i,r)},onSubscribeError({error:i,setError:o}){o(t(i,n))}}}}}var Bl=e=>({async onContextBuilding({context:t,extendContext:n}){n(await e(t))}});var Hl=e=>({onExecute:({setExecuteFn:t})=>{e.execute&&t(e.execute)},onParse:({setParseFn:t})=>{e.parse&&t(e.parse)},onValidate:({setValidationFn:t,addValidationRule:n})=>{e.validate&&t(e.validate),e.specifiedRules?.map(n)},onSubscribe:({setSubscribeFn:t})=>{e.subscribe&&t(e.subscribe)}});function rh(e){return e!=null&&typeof e.then=="function"}var ih=e=>{throw e},ln=class e{state;constructor(t){let n;try{n=t()}catch(r){this.state={status:"rejected",value:r};return}if(rh(n)){this.state={status:"pending",value:n};return}this.state={status:"fulfilled",value:n}}then(t,n){let r=this.state;if(r.status==="pending")return new e(()=>r.value.then(t,n));let i=typeof n=="function"?n:ih;if(r.status==="rejected")return new e(()=>i(r.value));try{let o=typeof t=="function"?t:void 0;return o===void 0?new e(()=>r.value):new e(()=>o(r.value))}catch(o){return new e(()=>i(o))}}catch(t){return this.then(void 0,t)}resolve(){let t=this.state;if(t.status==="pending")return Promise.resolve(t.value);if(t.status==="rejected")throw t.value;return t.value}static all(t){let n=!1,r,i=!1,o=[];for(let s of t){let a=s.state;if(a.status==="rejected"){if(n)continue;n=!0,r=a.value;continue}a.status==="pending"&&(i=!0),o.push(a.value)}return i?n?(Promise.all(o).catch(()=>{}),new e(()=>{throw r})):new e(()=>Promise.all(o)):new e(()=>o)}};function at(e){if(e instanceof Error)return e;if(typeof e=="object"&&e!=null&&"message"in e&&typeof e.message=="string"){let t;"cause"in e&&(t={cause:e.cause});let n=new Error(e.message,t);return"stack"in e&&typeof e.stack=="string"&&(n.stack=e.stack),"name"in e&&typeof e.name=="string"&&(n.name=e.name),n}return new Error(String(e))}function Wl(e){let t=e[Symbol.asyncIterator](),n,r,i=!1;async function o(){if(i)return{value:void 0,done:!0};try{if(!n){if(r)return await r,await o();let c;r=new Promise(u=>{c=u});let l=await t.next();return l.done?(i=!0,await o()):(n=l.value[Symbol.asyncIterator](),r=void 0,c(),await o())}let s=n,a=await n.next();return a.done?(n===s&&(n=void 0),await o()):a}catch(s){throw i=!0,s}}return{next:o,async return(){return i=!0,await Promise.all([n?.return?.(),t.return?.()]),{value:void 0,done:!0}},async throw(s){throw i=!0,await Promise.all([n?.throw?.(s),t.throw?.(s)]),s},[Symbol.asyncIterator](){return this}}}function Fs(e,t){if(!e)throw new Error(t??"Unexpected invariant triggered.")}async function Cs(e,t){let n=Object.create(null);return await new Promise((r,i)=>{t?.addEventListener("abort",()=>{i(t.reason)}),Promise.all(Object.entries(e).map(async([o,s])=>{n[o]=await s})).then(()=>r(),i)}),n}function Yl(e,t,n,r){let i=[],o=r?.maxErrors;try{let s=oh(e,t,n,a=>{if(o!=null&&i.length>=o)throw A("Too many errors processing variables, error limit reached. Execution aborted.");i.push(a)});if(i.length===0)return{coerced:s}}catch(s){i.push(s)}return{errors:i}}function oh(e,t,n,r){let i={};for(let o of t){let s=o.variable.name.value,a=oe(e,o.type);if(!Se(a)){let l=J(o.type);r(A(`Variable "$${s}" expected value of type "${l}" which cannot be used as an input type.`,{nodes:o.type}));continue}if(!Ti(n,s)){if(o.defaultValue)i[s]=Ue(o.defaultValue,a);else if(F(a)){let l=fe(a);r(A(`Variable "$${s}" of required type "${l}" was not provided.`,{nodes:o}))}continue}let c=n[s];if(c===null&&F(a)){let l=fe(a);r(A(`Variable "$${s}" of non-null type "${l}" must not be null.`,{nodes:o}));continue}i[s]=ci(c,a,(l,u,f)=>{let d=`Variable "$${s}" got invalid value `+fe(u);l.length>0&&(d+=` at "${s}${Fc(l)}"`),r(A(d+"; "+f.message,{nodes:o,originalError:f}))})}return i}var sh=Nc((e,t,n)=>kc(e.schema,e.fragments,e.variableValues,t,n));function ru(e){let t=ou(e);return"schema"in t?iu(t):{errors:t.map(n=>(Object.defineProperty(n,"extensions",{value:{...n.extensions,http:{...n.extensions?.http,status:400}}}),n))}}function iu(e){if(e.signal?.aborted)throw e.signal.reason;return new ln(()=>lh(e)).then(n=>{let r=zl(n,e.errors);return e.subsequentPayloads.size>0?{initialResult:{...r,hasNext:!0},subsequentResults:Ih(e)}:r},n=>{if(e.signal?.aborted)throw e.signal.reason;return n.errors?e.errors.push(...n.errors):e.errors.push(n),zl(null,e.errors)}).resolve()}function zl(e,t){return t.length===0?{data:e}:{errors:t,data:e}}var ah=_n(function(t){let n=Object.create(null);for(let r of t.definitions)r.kind===p.FRAGMENT_DEFINITION&&(n[r.name.value]=r);return n});function ou(e){let{schema:t,document:n,rootValue:r,contextValue:i,variableValues:o,operationName:s,fieldResolver:a,typeResolver:c,subscribeFieldResolver:l,signal:u}=e;Sn(t);let f=ah(n),d;for(let y of n.definitions)switch(y.kind){case p.OPERATION_DEFINITION:if(s==null){if(d!==void 0)return[A("Must provide operation name if query contains multiple operations.")];d=y}else y.name?.value===s&&(d=y);break;default:}if(d==null)return s!=null?[A(`Unknown operation named "${s}".`)]:[A("Must provide an operation.")];let m=d.variableDefinitions??[],h=Yl(t,m,o??{},{maxErrors:50});return h.errors?h.errors:{schema:t,fragments:f,rootValue:r,contextValue:i,operation:d,variableValues:h.coerced,fieldResolver:a??Zl,typeResolver:c??gh,subscribeFieldResolver:l??Zl,subsequentPayloads:new Set,errors:[],signal:u}}function ch(e,t){return{...e,rootValue:t,subsequentPayloads:new Set,errors:[]}}function lh(e){let{operation:t,schema:n,fragments:r,variableValues:i,rootValue:o}=e,s=Ic(n,t.operation,[t]);s==null&&A(`Schema is not configured to execute ${t.operation} operation.`,{nodes:t});let{fields:a,patches:c}=hs(n,r,i,s,t.selectionSet),l=void 0,u;t.operation==="mutation"?u=uh(e,s,o,l,a):u=js(e,s,o,l,a);for(let f of c){let{label:d,fields:m}=f;pu(e,s,o,m,d,l)}return u}function uh(e,t,n,r,i){return bc(i,(o,[s,a])=>{let c=on(r,s,t.name);if(e.signal?.aborted)throw e.signal.reason;return new ln(()=>su(e,t,n,a,c)).then(l=>(l===void 0||(o[s]=l),o))},Object.create(null)).resolve()}function js(e,t,n,r,i,o){let s=Object.create(null),a=!1;try{for(let[c,l]of i){if(e.signal?.aborted)throw e.signal.reason;let u=on(r,c,t.name),f=su(e,t,n,l,u,o);f!==void 0&&(s[c]=f,he(f)&&(a=!0))}}catch(c){if(a)return Cs(s,e.signal).finally(()=>{throw c});throw c}return a?Cs(s,e.signal):s}function su(e,t,n,r,i,o){let s=o?.errors??e.errors,a=fu(e.schema,t,r[0]);if(!a)return;let c=a.type,l=a.resolve??e.fieldResolver,u=au(e,a,r,t,i);try{let f=ds(a,r[0],e.variableValues),d=e.contextValue,m=l(n,f,d,u),h;return he(m)?h=m.then(y=>jt(e,c,r,u,i,y,o)):h=jt(e,c,r,u,i,m,o),he(h)?h.then(void 0,y=>{if(y instanceof AggregateError)return new AggregateError(y.errors.map(b=>{b=at(b);let x=De(b,r,we(i)),N=Ke(x,c,s);return Ye(e,i,o),N}));y=at(y);let I=De(y,r,we(i)),T=Ke(I,c,s);return Ye(e,i,o),T}):h}catch(f){if(f instanceof AggregateError)return new AggregateError(f.errors.map(y=>{let I=at(y),T=De(I,r,we(i));return Ke(T,c,s)}));let d=at(f),m=De(d,r,we(i)),h=Ke(m,c,s);return Ye(e,i,o),h}}function au(e,t,n,r,i){return{fieldName:t.name,fieldNodes:n,returnType:t.type,parentType:r,path:i,schema:e.schema,fragments:e.fragments,rootValue:e.rootValue,operation:e.operation,variableValues:e.variableValues}}var ph="CRITICAL_ERROR";function Ke(e,t,n){if(F(t)||e.extensions?.[ph])throw e;return n.push(e),null}function jt(e,t,n,r,i,o,s){if(o instanceof Error)throw o;if(F(t)){let a=jt(e,t.ofType,n,r,i,o,s);if(a===null)throw new Error(`Cannot return null for non-nullable field ${r.parentType.name}.${r.fieldName}.`);return a}if(o==null)return null;if(H(t))return dh(e,t,n,r,i,o,s);if(re(t))return mh(t,o);if(Re(t))return hh(e,t,n,r,i,o,s);if(k(t))return Ps(e,t,n,r,i,o,s);console.assert(!1,"Cannot complete value of unexpected output type: "+fe(t))}function cu(e,t,n){if(typeof n.key=="number")return;let r=$e(Ac,t[0],e.variableValues);if(r&&r.if!==!1)return Fs(typeof r.initialCount=="number","initialCount must be a number"),Fs(r.initialCount>=0,"initialCount must be a positive integer"),{initialCount:r.initialCount,label:typeof r.label=="string"?r.label:void 0}}async function fh(e,t,n,r,i,o,s){e.signal?.addEventListener("abort",()=>{o.return?.()});let a=s?.errors??e.errors,c=cu(e,n,i),l=!1,u=[],f=0;for(;;){if(c&&typeof c.initialCount=="number"&&f>=c.initialCount){Nh(f,o,e,n,r,t,i,c.label,s);break}let d=on(i,f,void 0),m;try{if(m=await o.next(),m.done)break}catch(h){let y=at(h),I=De(y,n,we(d));u.push(Ke(I,t,a));break}lu(m.value,u,a,e,t,n,r,d,s)&&(l=!0),f+=1}return l?Promise.all(u):u}function dh(e,t,n,r,i,o,s){let a=t.ofType,c=s?.errors??e.errors;if(An(o)){let h=o[Symbol.asyncIterator]();return fh(e,a,n,r,i,h,s)}if(!vc(o))throw A(`Expected Iterable, but did not find one for field "${r.parentType.name}.${r.fieldName}".`);let l=cu(e,n,i),u=!1,f=s,d=[],m=0;for(let h of o){let y=on(i,m,void 0);if(l&&typeof l.initialCount=="number"&&m>=l.initialCount){f=vh(i,y,h,e,n,r,a,l.label,f),m++;continue}lu(h,d,c,e,a,n,r,y,s)&&(u=!0),m++}return u?Promise.all(d):d}function lu(e,t,n,r,i,o,s,a,c){try{let l;if(he(e)?l=e.then(u=>jt(r,i,o,s,a,u,c)):l=jt(r,i,o,s,a,e,c),he(l))return t.push(l.then(void 0,u=>{u=at(u);let f=De(u,o,we(a)),d=Ke(f,i,n);return Ye(r,a,c),d})),!0;t.push(l)}catch(l){let u=at(l),f=De(u,o,we(a)),d=Ke(f,i,n);Ye(r,a,c),t.push(d)}return!1}function mh(e,t){let n;try{n=e.serialize(t)}catch(r){throw r instanceof g?new Error(r.message):r}if(n==null)throw new Error(`Expected \`${fe(e)}.serialize(${fe(t)})\` to return non-nullable value, returned: ${fe(n)}`);return n}function hh(e,t,n,r,i,o,s){let a=t.resolveType??e.typeResolver,c=e.contextValue,l=a(o,c,r,t);return he(l)?l.then(u=>Ps(e,Jl(u,e,t,n,r,o),n,r,i,o,s)):Ps(e,Jl(l,e,t,n,r,o),n,r,i,o,s)}function Jl(e,t,n,r,i,o){if(e==null)throw A(`Abstract type "${n.name}" must resolve to an Object type at runtime for field "${i.parentType.name}.${i.fieldName}". Either the "${n.name}" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.`,{nodes:r});if(k(e)){if(Hn.major>=16)throw A("Support for returning GraphQLObjectType from resolveType was removed in graphql-js@16.0.0 please return type name instead.");e=e.name}if(typeof e!="string")throw A(`Abstract type "${n.name}" must resolve to an Object type at runtime for field "${i.parentType.name}.${i.fieldName}" with value ${fe(o)}, received "${fe(e)}".`);let s=t.schema.getType(e);if(s==null)throw A(`Abstract type "${n.name}" was resolved to a type "${e}" that does not exist inside the schema.`,{nodes:r});if(!k(s))throw A(`Abstract type "${n.name}" was resolved to a non-object type "${e}".`,{nodes:r});if(!t.schema.isSubType(n,s))throw A(`Runtime Object type "${s.name}" is not a possible type for "${n.name}".`,{nodes:r});return s}function Ps(e,t,n,r,i,o,s){if(t.isTypeOf){let a=t.isTypeOf(o,e.contextValue,r);if(he(a))return a.then(c=>{if(!c)throw Kl(t,o,n);return Xl(e,t,n,i,o,s)});if(!a)throw Kl(t,o,n)}return Xl(e,t,n,i,o,s)}function Kl(e,t,n){return A(`Expected value of type "${e.name}" but got: ${fe(t)}.`,{nodes:n})}function Xl(e,t,n,r,i,o){let{fields:s,patches:a}=sh(e,t,n),c=js(e,t,i,r,s,o);for(let l of a){let{label:u,fields:f}=l;pu(e,t,i,f,u,r,o)}return c}var gh=function(e,t,n,r){if(fs(e)&&typeof e.__typename=="string")return e.__typename;let i=n.schema.getPossibleTypes(r),o=[];for(let s=0;s<i.length;s++){let a=i[s];if(a.isTypeOf){let c=a.isTypeOf(e,t,n);if(he(c))o[s]=c;else if(c)return a.name}}if(o.length)return Promise.all(o).then(s=>{for(let a=0;a<s.length;a++)if(s[a])return i[a].name})},Zl=function(e,t,n,r){if(fs(e)||typeof e=="function"){let i=e[r.fieldName];return typeof i=="function"?e[r.fieldName](t,n,r):i}};function uu(e){let t=ou(e);if(!("schema"in t))return{errors:t.map(r=>(Object.defineProperty(r,"extensions",{value:{...r.extensions,http:{...r.extensions?.http,status:400}}}),r))};let n=Th(t);return he(n)?n.then(r=>eu(t,r)):eu(t,n)}function Us(e){let t=e.subsequentResults,n=!1,r=!1;return{[Symbol.asyncIterator](){return this},next(){return r?Promise.resolve({value:void 0,done:r}):n?t.next():(n=!0,Promise.resolve({value:e.initialResult,done:r}))},return(){return r=!0,t.return()},throw(i){return r=!0,t.throw(i)}}}async function*yh(e){"initialResult"in e?yield*Us(e):yield e}function eu(e,t){return An(t)?Wl(_c(t,async n=>yh(await iu(ch(e,n))),n=>{throw n instanceof AggregateError?new AggregateError(n.errors.map(r=>tu(r,e.operation)),n.message):tu(n,e.operation)})):t}function tu(e,t){return A(e.message,{originalError:e,nodes:[t]})}function Th(e){try{let t=Eh(e);return he(t)?t.then(void 0,n=>({errors:[n]})):t}catch(t){return{errors:[t]}}}function Eh(e){let{schema:t,fragments:n,operation:r,variableValues:i,rootValue:o}=e,s=t.getSubscriptionType();if(s==null)throw A("Schema is not configured to execute subscription operation.",{nodes:r});let{fields:a}=hs(t,n,i,s,r.selectionSet),[c,l]=[...a.entries()][0],u=l[0].name.value,f=fu(t,s,l[0]);if(!f)throw A(`The subscription field "${u}" is not defined.`,{nodes:l});let d=on(void 0,c,s.name),m=au(e,f,l,s,d);try{let h=ds(f,l[0],i),y=e.contextValue,T=(f.subscribe??e.subscribeFieldResolver)(o,h,y,m);return he(T)?T.then(nu).then(void 0,b=>{throw De(b,l,we(d))}):nu(T,e.signal)}catch(h){throw De(h,l,we(d))}}function nu(e,t){if(e instanceof Error)throw e;if(!An(e))throw A(`Subscription field must return Async Iterable. Received: ${fe(e)}.`);return{[Symbol.asyncIterator](){let n=e[Symbol.asyncIterator]();return t?.addEventListener("abort",()=>{n.return?.()}),n}}}function pu(e,t,n,r,i,o,s){let a=new Ms({label:i,path:o,parentContext:s,exeContext:e}),c;try{c=js(e,t,n,o,r,a),he(c)&&(c=c.then(null,l=>(a.errors.push(l),null)))}catch(l){a.errors.push(l),c=null}a.addData(c)}function vh(e,t,n,r,i,o,s,a,c){let l=new Vi({label:a,path:t,parentContext:c,exeContext:r}),u;try{try{he(n)?u=n.then(d=>jt(r,s,i,o,t,d,l)):u=jt(r,s,i,o,t,n,l),he(u)&&(u=u.then(void 0,d=>{d=at(d);let m=De(d,i,we(t)),h=Ke(m,s,l.errors);return Ye(r,t,l),h}))}catch(d){let m=at(d),h=De(m,i,we(t));u=Ke(h,s,l.errors),Ye(r,t,l)}}catch(d){return l.errors.push(d),Ye(r,e,l),l.addItems(null),l}let f;return he(u)?f=u.then(d=>[d],d=>(l.errors.push(d),Ye(r,e,l),null)):f=[u],l.addItems(f),l}async function bh(e,t,n,r,i,o,s){let a;try{let{value:l,done:u}=await e.next();if(u)return o.setIsCompletedIterator(),{done:u,value:void 0};a=l}catch(l){let u=at(l),f=De(u,n,we(s));return{done:!0,value:Ke(f,i,o.errors)}}let c;try{return c=jt(t,i,n,r,s,a,o),he(c)&&(c=c.then(void 0,l=>{let u=De(l,n,we(s)),f=Ke(u,i,o.errors);return Ye(t,s,o),f})),{done:!1,value:c}}catch(l){let u=De(l,n,we(s)),f=Ke(u,i,o.errors);return Ye(t,s,o),{done:!1,value:f}}}async function Nh(e,t,n,r,i,o,s,a,c){let l=e,u=c??void 0;for(;;){let f=on(s,l,void 0),d=new Vi({label:a,path:f,parentContext:u,iterator:t,exeContext:n}),m;try{m=await bh(t,n,r,i,o,d,f)}catch(T){d.errors.push(T),Ye(n,s,d),d.addItems(null),t?.return&&t.return().catch(()=>{});return}let{done:h,value:y}=m,I;if(he(y)?I=y.then(T=>[T],T=>(d.errors.push(T),Ye(n,s,d),null)):I=[y],d.addItems(I),h)break;u=d,l++}}function Ye(e,t,n){let r=we(t);e.subsequentPayloads.forEach(i=>{if(i!==n){for(let o=0;o<r.length;o++)if(i.path[o]!==r[o])return;Vs(i)&&i.iterator?.return&&i.iterator.return().catch(()=>{}),e.subsequentPayloads.delete(i)}})}function xh(e){let t=[];for(let n of e.subsequentPayloads){let r={};if(n.isCompleted){if(e.subsequentPayloads.delete(n),Vs(n)){let i=n.items;if(n.isCompletedIterator)continue;r.items=i}else{let i=n.data;r.data=i??null}r.path=n.path,n.label&&(r.label=n.label),n.errors.length>0&&(r.errors=n.errors),t.push(r)}}return t}function Ih(e){let t=!1,n=new Promise((o,s)=>{e.signal?.addEventListener("abort",()=>{t=!0,s(e.signal?.reason)})});async function r(){if(t)return{value:void 0,done:!0};if(await Promise.race([n,...Array.from(e.subsequentPayloads).map(a=>a.promise)]),t)return{value:void 0,done:!0};let o=xh(e),s=e.subsequentPayloads.size>0;return!o.length&&s?r():(s||(t=!0),{value:o.length?{incremental:o,hasNext:s}:{hasNext:s},done:!1})}function i(){let o=[];return e.subsequentPayloads.forEach(s=>{Vs(s)&&s.iterator?.return&&o.push(s.iterator.return())}),Promise.all(o)}return{[Symbol.asyncIterator](){return this},next:r,async return(){return await i(),t=!0,{value:void 0,done:!0}},async throw(o){return await i(),t=!0,Promise.reject(o)}}}var Ms=class{type;errors;label;path;promise;data;parentContext;isCompleted;_exeContext;_resolve;constructor(t){this.type="defer",this.label=t.label,this.path=we(t.path),this.parentContext=t.parentContext,this.errors=[],this._exeContext=t.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.data=null,this.promise=new Promise(n=>{this._resolve=r=>{n(r)}}).then(n=>{this.data=n,this.isCompleted=!0})}addData(t){let n=this.parentContext?.promise;if(n){this._resolve?.(n.then(()=>t));return}this._resolve?.(t)}},Vi=class{type;errors;label;path;items;promise;parentContext;iterator;isCompletedIterator;isCompleted;_exeContext;_resolve;constructor(t){this.type="stream",this.items=null,this.label=t.label,this.path=we(t.path),this.parentContext=t.parentContext,this.iterator=t.iterator,this.errors=[],this._exeContext=t.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.items=null,this.promise=new Promise(n=>{this._resolve=r=>{n(r)}}).then(n=>{this.items=n,this.isCompleted=!0})}addItems(t){let n=this.parentContext?.promise;if(n){this._resolve?.(n.then(()=>t));return}this._resolve?.(t)}setIsCompletedIterator(){this.isCompletedIterator=!0}};function Vs(e){return e.type==="stream"}function fu(e,t,n){let r=n.name.value;return r===wt.name&&e.getQueryType()===t?wt:r===Ot.name&&e.getQueryType()===t?Ot:r===_t.name?_t:t.getFields()[r]}function $s(e){let t=At(e.document,e.operationName);if(t==null)throw new Error("Must provide an operation.");return t.operation==="subscription"?uu(e):new ln(()=>ru(e)).then(n=>"initialResult"in n?Us(n):n).resolve()}var Xh=Gt($i(),1);var kh=Gt(Gi(),1);var mu=Gt(Gi(),1);function hu(e){return e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function"}function Sh(e){if(e.socket?.localPort)return e.socket?.localPort;let n=(e.headers?.[":authority"]||e.headers?.host)?.split(":")?.[1];return n||80}function wh(e){if(e.headers?.[":authority"])return e.headers?.[":authority"];if(e.headers?.host)return e.headers?.host;let t=Sh(e);if(e.hostname)return e.hostname+":"+t;let n=e.socket?.localAddress;return n&&!n?.includes("::")&&!n?.includes("ffff")?`${n}:${t}`:"localhost"}function Oh(e){let t=wh(e),n=e.protocol||(e.socket?.encrypted?"https":"http"),r=e.originalUrl||e.url||"/graphql";return`${n}://${t}${r}`}function _h(e){let t=e[Symbol.toStringTag];return!!(typeof e=="string"||t==="Uint8Array"||t==="Blob"||t==="FormData"||t==="URLSearchParams"||hu(e))}var vr=class extends EventTarget{aborted=!1;_onabort=null;reason;throwIfAborted(){if(this.aborted)throw this.reason}sendAbort(){this.reason=new DOMException("This operation was aborted","AbortError"),this.aborted=!0,this.dispatchEvent(new Event("abort"))}get onabort(){return this._onabort}set onabort(t){this._onabort=t,t?this.addEventListener("abort",t):this.removeEventListener("abort",t)}any(t){return AbortSignal.any([...t])}},du=!1,Qi=new WeakMap;function gu(e,t){let n=e.raw||e.req||e,r=Oh(n);if(e.query){let c=new mu.URL(r);for(let l in e.query)c.searchParams.set(l,e.query[l]);r=c.toString()}let i,o=Qi.get(e);Qi.delete(e);let s=e.headers;if(e.headers?.[":method"]){s={};for(let c in e.headers)c.startsWith(":")||(s[c]=e.headers[c])}if(o?.once){let c;if(t!==globalThis.Request)i=new vr,c=()=>i.sendAbort();else{let u=new AbortController;i=u.signal,c=()=>u.abort()}let l=()=>{i&&!i.aborted&&(n.aborted=!0,c())};o.once("error",l),o.once("close",l),o.once("finish",()=>{o.removeListener("close",l)})}if(e.method==="GET"||e.method==="HEAD")return new t(r,{method:e.method,headers:s,signal:i});let a=e.body;if(a!=null&&Object.keys(a).length>0){if(_h(a))return new t(r,{method:e.method,headers:s,body:a,signal:i});let c=new t(r,{method:e.method,headers:s,signal:i});return c.headers.get("content-type")?.includes("json")||c.headers.set("content-type","application/json; charset=utf-8"),new Proxy(c,{get:(l,u,f)=>{switch(u){case"json":return async()=>a;case"text":return async()=>JSON.stringify(a);default:return Reflect.get(l,u,f)}}})}return globalThis.process?.versions?.bun&&Gs(n)?(du||(du=!0,console.warn(`You use Bun Node compatibility mode, which is not recommended!
It will affect your performance. Please check our Bun integration recipe, and avoid using 'http' for your server implementation.`)),new t(r,{method:e.method,headers:s,duplex:"half",body:new ReadableStream({start(c){n.on("data",l=>{c.enqueue(l)}),n.on("error",l=>{c.error(l)}),n.on("end",()=>{c.close()})},cancel(c){n.destroy(c)}}),signal:i})):new t(r,{method:e.method,headers:s,body:n,duplex:"half",signal:i})}function Gs(e){return e.read!=null}function yu(e){return Gs(e)}function qs(e){return e!=null&&e.setHeader!=null&&e.end!=null&&e.once!=null&&e.write!=null}function Tu(e){return e!=null&&e.request!=null&&e.respondWith!=null}function Rh(e){e?.socket?.setTimeout?.(0),e?.socket?.setNoDelay?.(!0),e?.socket?.setKeepAlive?.(!0)}function qi(e){e.end(null,null,null)}async function Ah(e,t){let n=!1,r=()=>{n=!0};e.once("error",r),e.once("close",r),e.once("finish",()=>{e.removeListener("close",r)});for await(let i of t){if(n)break;if(!e.write(i)){if(n)break;await new Promise(o=>e.once("drain",o))}}qi(e)}function Qs(e,t,n){if(t.closed||t.destroyed||t.writableEnded)return;if(!e){t.statusCode=404,t.end();return}t.statusCode=e.status,t.statusMessage=e.statusText;let r=!1;e.headers.forEach((s,a)=>{if(a==="set-cookie"){if(r)return;r=!0;let c=e.headers.getSetCookie?.();if(c){t.setHeader("set-cookie",c);return}}t.setHeader(a,s)});let i=e._buffer;if(i){t.write(i),qi(t);return}let o=e.body;if(o==null){qi(t);return}if(o[Symbol.toStringTag]==="Uint8Array"){t.write(o),qi(t);return}if(Rh(n),Gs(o)){t.once("close",()=>{o.destroy()}),o.pipe(t);return}if(hu(o))return Ah(t,o)}function Eu(e){return e!=null&&typeof e=="object"&&("body"in e||"cache"in e||"credentials"in e||"headers"in e||"integrity"in e||"keepalive"in e||"method"in e||"mode"in e||"redirect"in e||"referrer"in e||"referrerPolicy"in e||"signal"in e||"window"in e)}function br(...e){let[t,...n]=e.filter(r=>r!=null&&typeof r=="object");return n.forEach(r=>{let i=Object.getOwnPropertyNames(r).reduce((o,s)=>(Object.getOwnPropertyDescriptor(r,s)&&(o[s]=Object.getOwnPropertyDescriptor(r,s)),o),{});Object.getOwnPropertySymbols(r).forEach(o=>{let s=Object.getOwnPropertyDescriptor(r,o);s?.enumerable&&(i[o]=s)}),Object.defineProperties(t,i)}),t}function ft(e){return e?.then!=null}function Bs(e,t){let n=e[Symbol.iterator](),r=!1;function i(){r=!0}function o(){let{done:s,value:a}=n.next();if(s)return;let c=t(a,i);if(ft(c))return c.then(()=>{if(!r)return o()});if(!r)return o()}return o()}function Nr(e,t){return new t(e.stack||e.message||e.toString(),{status:e.status||500})}function Hs(e,t){if(e==null)return{};let n={},r=new Set;return new Proxy(e,{get(i,o){if(t!=null&&o==="waitUntil")return function(c){t.push(c.catch(l=>console.error(l)))};let s=n[o];if(s!=null)return typeof s=="function"?s.bind(n):s;if(!r.has(o))return i[o]},set(i,o,s){return n[o]=s,!0},has(i,o){return t!=null&&o==="waitUntil"?!0:r.has(o)?!1:o in n?!0:o in i},defineProperty(i,o,s){return Reflect.defineProperty(n,o,s)},deleteProperty(i,o){return o in n?Reflect.deleteProperty(n,o):(r.add(o),!0)},ownKeys(i){let o=Reflect.ownKeys(n),s=Reflect.ownKeys(i),a=Array.from(r),c=new Set(o.concat(s.filter(l=>!a.includes(l))));return t!=null&&c.add("waitUntil"),Array.from(c)},getOwnPropertyDescriptor(i,o){if(o in n)return Reflect.getOwnPropertyDescriptor(n,o);if(!r.has(o))return Reflect.getOwnPropertyDescriptor(i,o)}})}function Dh(){let e,t;return{promise:new Promise(function(i,o){e=i,t=o}),get resolve(){return e},get reject(){return t}}}function Ws(e,t){if(ft(e)&&t){let n=Dh();return t.addEventListener("abort",function(){n.reject(t.reason)}),e.then(function(i){n.resolve(i)}).catch(function(i){n.reject(i)}),n.promise}return e}function vu(e){return!!e.onData}function bu({req:e,res:t,fetchAPI:n,signal:r}){let i,o=e.getMethod();if(o!=="get"&&o!=="head"){let l;i=new n.ReadableStream({start(f){l=f}});let u=i.readable;if(u)r.addEventListener("abort",()=>{u.push(null)}),t.onData(function(f,d){let m=Buffer.from(f,0,f.byteLength);u.push(Buffer.from(m)),d&&u.push(null)});else{let f=!1;r.addEventListener("abort",()=>{f||(f=!0,l.close())}),t.onData(function(d,m){let h=Buffer.from(d,0,d.byteLength);l.enqueue(Buffer.from(h)),m&&(f=!0,l.close())})}}let s=new n.Headers;e.forEach((l,u)=>{s.append(l,u)});let a=`http://localhost${e.getUrl()}`,c=e.getQuery();return c&&(a+=`?${c}`),new n.Request(a,{method:o,headers:s,body:i,signal:r,duplex:"half"})}async function Lh(e,t,n){for await(let r of t.body){if(n.aborted)return;e.cork(()=>{e.write(r)})}e.cork(()=>{e.end()})}function Ys(e,t,n){if(!t){e.writeStatus("404 Not Found"),e.end();return}let r=t._buffer;if(!n.aborted&&(e.cork(()=>{e.writeStatus(`${t.status} ${t.statusText}`);for(let[i,o]of t.headers)if(i!=="content-length"){if(i==="set-cookie"){let s=t.headers.getSetCookie?.();if(s){for(let a of s)e.writeHeader(i,a);continue}}e.writeHeader(i,o)}r&&e.end(r)}),!r)){if(!t.body){e.end();return}return Lh(e,t,n)}}async function Fh(e){await Promise.allSettled(e)}function Ch(e){try{return!!e?.request}catch{return!1}}var Ph={};function Nu(e,t){let n={...kh,...t?.fetchAPI},r=typeof e=="function"?e:e.handle,i=[],o=[];if(t?.plugins!=null)for(let T of t.plugins)T.onRequest&&i.push(T.onRequest),T.onResponse&&o.push(T.onResponse);let s=i.length>0||o.length>0?function(b,x){let N=r,O;if(i.length===0)return B();let j=new Proxy(Ph,{get(R,$,K){return j=new n.URL(b.url,"http://localhost"),Reflect.get(j,$,j)}}),w=Bs(i,(R,$)=>R({request:b,setRequest(K){b=K},serverContext:x,fetchAPI:n,url:j,requestHandler:N,setRequestHandler(K){N=K},endResponse(K){O=K,K&&$()}}));function U(R){if(o.length===0)return R;let $={request:b,response:R,serverContext:x,setResponse(be){R=be},fetchAPI:n},K=Bs(o,be=>be($));return ft(K)?K.then(()=>R):R}function B(){if(!O){let R=N(b,x);return ft(R)?R.then(U):U(R)}return U(O)}return ft(w)?w.then(B):B()}:r;function a(T,...b){let x=b.length>1?br(...b):b[0]||{},N=gu(T,n.Request);return s(N,x)}function c(T,b,...x){let N=b.raw||b;return Qi.set(T,N),a(T,...x)}function l(T,b,...x){let N=[],O={req:T,res:b,waitUntil(w){N.push(w.catch(U=>console.error(U)))}},j;try{j=c(T,b,O,...x)}catch(w){j=Nr(w,n.Response)}if(ft(j))return j.catch(w=>Nr(w,n.Response)).then(w=>Qs(w,b,T)).catch(w=>{console.error(`Unexpected error while handling request: ${w.message||w}`)});try{return Qs(j,b,T)}catch(w){console.error(`Unexpected error while handling request: ${w.message||w}`)}}function u(T,b,...x){let N=[],O={res:T,req:b,waitUntil(te){N.push(te.catch(Ge=>console.error(Ge)))}},w=x.filter(te=>te!=null).length>0?br(O,...x):O,U=new vr,B=T.end.bind(T),R=!1;T.end=function(te){return R=!0,B(te)},T.onAborted.bind(T)(function(){U.sendAbort()}),T.onAborted=function(te){U.addEventListener("abort",te)};let K=bu({req:b,res:T,fetchAPI:n,signal:U}),be;try{be=s(K,w)}catch(te){be=Nr(te,n.Response)}if(ft(be))return be.catch(te=>Nr(te,n.Response)).then(te=>{if(!U.aborted&&!R)return Ys(T,te,U)}).catch(te=>{console.error(`Unexpected error while handling request: 
${te.stack||te.message||te}`)});try{if(!U.aborted&&!R)return Ys(T,be,U)}catch(te){console.error(`Unexpected error while handling request: 
${te.stack||te.message||te}`)}}function f(T,...b){if(!T.respondWith||!T.request)throw new TypeError(`Expected FetchEvent, got ${T}`);let x=b.filter(j=>j!=null),N=x.length>0?br({},T,...x):Hs(T),O=s(T.request,N);T.respondWith(O)}function d(T,...b){let x=b.filter(w=>w!=null),N,O=x.length>1?br({},...x):Hs(x[0],x[0]==null||x[0].waitUntil==null?N=[]:void 0),j=s(T,O);return N?.length?Fh(N).then(()=>j):j}let m=(T,...b)=>{if(typeof T=="string"||"href"in T){let[N,...O]=b;if(Eu(N)){let w=new n.Request(T,N),U=d(w,...O);return Ws(U,N?.signal)}let j=new n.Request(T);return d(j,...b)}let x=d(T,...b);return Ws(x,T._signal)},h=(T,...b)=>{let[x,...N]=b;if(yu(T)){if(!qs(x))throw new TypeError(`Expected ServerResponse, got ${x}`);return l(T,x,...N)}if(vu(T))return u(T,x,...N);if(qs(x))throw new TypeError("Got Node response without Node request");return Ch(T)?Tu(T)?f(T,...b):d(T.request,T,...b):m(T,...b)},y={handleRequest:d,fetch:m,handleNodeRequest:a,handleNodeRequestAndResponse:c,requestListener:l,handleEvent:f,handleUWS:u,handle:h},I=new Proxy(h,{has:(T,b)=>b in y||b in h||e&&b in e,get:(T,b)=>{let x=y[b];if(x)return x.bind?x.bind(y):x;let N=h[b];if(N)return N.bind?N.bind(h):N;if(e){let O=e[b];if(O)return O.bind?function(...j){let w=e[b](...j);return w===e?I:w}:O}},apply(T,b,x){return h(...x)}});return I}function Mh(e,t){let n=e.headers.get("origin");if(t===!1||n==null)return null;let r={};if(t.origin==null||t.origin.length===0||t.origin.includes("*")?(r["Access-Control-Allow-Origin"]=n,r.Vary="Origin"):typeof t.origin=="string"?r["Access-Control-Allow-Origin"]=t.origin:Array.isArray(t.origin)&&(t.origin.length===1?r["Access-Control-Allow-Origin"]=t.origin[0]:t.origin.includes(n)?(r["Access-Control-Allow-Origin"]=n,r.Vary="Origin"):r["Access-Control-Allow-Origin"]="null"),t.methods?.length)r["Access-Control-Allow-Methods"]=t.methods.join(", ");else{let i=e.headers.get("access-control-request-method");i&&(r["Access-Control-Allow-Methods"]=i)}if(t.allowedHeaders?.length)r["Access-Control-Allow-Headers"]=t.allowedHeaders.join(", ");else{let i=e.headers.get("access-control-request-headers");i&&(r["Access-Control-Allow-Headers"]=i,r.Vary?r.Vary+=", Access-Control-Request-Headers":r.Vary="Access-Control-Request-Headers")}return t.credentials!=null?t.credentials===!0&&(r["Access-Control-Allow-Credentials"]="true"):r["Access-Control-Allow-Origin"]!=="*"&&(r["Access-Control-Allow-Credentials"]="true"),t.exposedHeaders&&(r["Access-Control-Expose-Headers"]=t.exposedHeaders.join(", ")),t.maxAge&&(r["Access-Control-Max-Age"]=t.maxAge.toString()),r}async function jh(e,t,n){let r=await t(e,n);return Mh(e,r)}function xu(e){let t=()=>({});if(e!=null)if(typeof e=="function")t=e;else if(typeof e=="object"){let n={...e};t=()=>n}else e===!1&&(t=()=>!1);return{onRequest({request:n,fetchAPI:r,endResponse:i}){if(n.method.toUpperCase()==="OPTIONS"){let o=new r.Response(null,{status:204,headers:{"Content-Length":"0"}});i(o)}},async onResponse({request:n,serverContext:r,response:i}){let o=await jh(n,t,r);if(o!=null)for(let s in o)i.headers.set(s,o[s])}}}var Iu=Gt(Gi(),1);function Uh(e=Iu.Response){return function(n){return n.details||n.status||n.headers||n.name==="HTTPError"?new e(typeof n.details=="object"?JSON.stringify(n.details):n.message,{status:n.status,headers:n.headers||{}}):(console.error(n),zs(e))}}function zs(e){return e.error?e.error():new e(null,{status:500})}function Su(e){return{onRequest({requestHandler:t,setRequestHandler:n,fetchAPI:r}){let i=e||Uh(r.Response);n(function(s,a){try{let c=t(s,a);return ft(c)?c.catch(l=>i(l,s,a)||zs(r.Response)):c}catch(c){return i(c,s,a)||zs(r.Response)}})}}}var _u=Gt($i(),1);var wu=Gt($i(),1);function Js(e){let t=e.get("operationName")||void 0,n=e.get("query")||void 0,r=e.get("variables")||void 0,i=e.get("extensions")||void 0;return{operationName:t,query:n,variables:r?JSON.parse(r):void 0,extensions:i?JSON.parse(i):void 0}}function Ou(e){let t=new wu.URLSearchParams(e);return Js(t)}function bt(e,t){let n=e.headers.get("content-type");return n=n?.split(",")[0]||null,n===t||!!n?.startsWith(`${t};`)}function Ru(e){return e.method==="GET"}function Au(e){let[,t=""]=e.url.split("?"),n=new _u.URLSearchParams(t);return Js(n)}function Du(e){return e.method==="POST"&&bt(e,"application/x-www-form-urlencoded")}async function Lu(e){let t=await e.text();return Ou(t)}function ku(e){return e.method==="POST"&&bt(e,"application/graphql")}async function Fu(e){return{query:await e.text()}}function Cu(e){return e.method==="POST"&&(bt(e,"application/json")||bt(e,"application/graphql+json"))}async function Pu(e){let t;try{t=await e.json()}catch(r){let i={http:{spec:!0,status:400}};throw r instanceof Error&&(i.originalError={name:r.name,message:r.message}),A("POST body sent invalid JSON.",{extensions:i})}if(t==null)throw A(`POST body is expected to be object but received ${t}`,{extensions:{http:{status:400}}});let n=typeof t;if(n!=="object")throw A(`POST body is expected to be object but received ${n}`,{extensions:{http:{status:400}}});return t}function Mu(e,t,n){t.split&&(t=t.split("."));for(var r=0,i=t.length,o=e,s,a;r<i&&(a=""+t[r++],!(a==="__proto__"||a==="constructor"||a==="prototype"));)o=o[a]=r===i?n:typeof(s=o[a])==typeof t?s:t[r]*0!==0||~(""+t[r]).indexOf(".")?{}:[]}function ju(e){return e.method==="POST"&&bt(e,"multipart/form-data")}async function Uu(e){let t;try{t=await e.formData()}catch(o){throw o instanceof Error&&o.message.startsWith("File size limit exceeded: ")?A(o.message,{extensions:{http:{status:413}}}):o}let n=t.get("operations");if(!n)throw A('Missing multipart form field "operations"');if(typeof n!="string")throw A('Multipart form field "operations" must be a string');let r;try{r=JSON.parse(n)}catch{throw A('Multipart form field "operations" must be a valid JSON string')}let i=t.get("map");if(i!=null){if(typeof i!="string")throw A('Multipart form field "map" must be a string');let o;try{o=JSON.parse(i)}catch{throw A('Multipart form field "map" must be a valid JSON string')}for(let s in o){let a=t.get(s),c=o[s];for(let l of c)Mu(r,l,a)}}return r}var Vh=new Set(["query","variables","operationName","extensions"]);function $h(e){if(e==null||typeof e!="object")throw A('Invalid "params" in the request body',{extensions:{http:{spec:!0,status:400}}});for(let t in e)if(e[t]!=null&&!Vh.has(t))throw A(`Unexpected parameter "${t}" in the request body.`,{extensions:{http:{status:400}}})}function Gh(e){if(!qh(e))throw A(`Expected params to be an object but given ${xr(e)}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});if($h(e),e.query==null)throw A("Must provide query string.",{extensions:{http:{spec:!0,status:400,headers:{Allow:"GET, POST"}}}});let t=xr(e.query);if(t!=="string")throw A(`Expected "query" param to be a string, but given ${t}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});let n=xr(e.variables);if(!["object","null","undefined"].includes(n))throw A(`Expected "variables" param to be empty or an object, but given ${n}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});let r=xr(e.extensions);if(!["object","null","undefined"].includes(r))throw A(`Expected "extensions" param to be empty or an object, but given ${r}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});return e}function Vu(){return{onParams({params:e}){Gh(e)}}}function xr(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function qh(e){return xr(e)==="object"}function Qh(e){return e==="GET"||e==="POST"}function $u(){return{onRequestParse({request:e}){if(!Qh(e.method))throw A("GraphQL only supports GET and POST requests.",{extensions:{http:{status:405,headers:{Allow:"GET, POST"}}}})}}}function Gu(){return{onValidate(){return({valid:e,result:t})=>{if(!e)for(let n of t)n.extensions.http={...n.extensions.http,spec:n.extensions.http?.spec??!0,status:n.extensions.http?.status??400}}}}}function qu(e){return{onRequestParse(){return{onRequestParseDone({requestParserResult:t}){if(Array.isArray(t)){if(!e)throw A("Batching is not supported.",{extensions:{http:{status:400}}});if(t.length>e)throw A(`Batching is limited to ${e} operations per request.`,{extensions:{http:{status:413}}})}}}}}}function Bh(e,t,n){let r=t?At(t,n)??void 0:void 0;if(!r)throw A("Could not determine what operation to execute.",{extensions:{http:{status:400}}});if(r.operation==="mutation"&&e==="GET")throw A("Can only perform a mutation operation from a POST request.",{extensions:{http:{status:405,headers:{Allow:"POST"}}}})}function Qu(){return{onParse(){return({result:e,context:{request:t,params:{operationName:n}={}}})=>{if(t){if(e instanceof Error)throw e instanceof g&&(e.extensions.http={spec:!0,status:400}),e;Bh(t.method,e,n)}}}}}function Bu({id:e=Date.now().toString(),logger:t=console,endpoint:n="/health"}={}){return{onRequest({endResponse:r,fetchAPI:i,request:o}){if(o.url.endsWith(n)){t.debug("Responding Health Check");let s=new i.Response(null,{status:200,headers:{"x-yoga-id":e}});r(s)}}}}var jn=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Wu=new Set,Ks=typeof process=="object"&&process?process:{},Yu=(e,t,n,r)=>{typeof Ks.emitWarning=="function"?Ks.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)},Bi=globalThis.AbortController,Hu=globalThis.AbortSignal;if(typeof Bi>"u"){Hu=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Bi=class{constructor(){t()}signal=new Hu;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let e=Ks.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,Yu("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var Hh=e=>!Wu.has(e),ID=Symbol("type"),Ut=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),zu=e=>Ut(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Un:null:null,Un=class extends Array{constructor(t){super(t),this.fill(0)}},Xs=class e{heap;length;static#t=!1;static create(t){let n=zu(t);if(!n)return[];e.#t=!0;let r=new e(t,n);return e.#t=!1,r}constructor(t,n){if(!e.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Hi=class e{#t;#e;#r;#a;#o;#i;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#g;#l;#s;#n;#f;#p;#h;#d;#v;#m;#b;#N;#T;#x;#_;#y;static unsafeExposeInternals(t){return{starts:t.#N,ttls:t.#T,sizes:t.#b,keyMap:t.#l,keyList:t.#s,valList:t.#n,next:t.#f,prev:t.#p,get head(){return t.#h},get tail(){return t.#d},free:t.#v,isBackgroundFetch:n=>t.#c(n),backgroundFetch:(n,r,i,o)=>t.#F(n,r,i,o),moveToTail:n=>t.#D(n),indexes:n=>t.#I(n),rindexes:n=>t.#S(n),isStale:n=>t.#E(n)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#g}get size(){return this.#u}get fetchMethod(){return this.#o}get memoMethod(){return this.#i}get dispose(){return this.#r}get disposeAfter(){return this.#a}constructor(t){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:d,maxSize:m=0,maxEntrySize:h=0,sizeCalculation:y,fetchMethod:I,memoMethod:T,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:x,allowStaleOnFetchRejection:N,allowStaleOnFetchAbort:O,ignoreFetchAbort:j}=t;if(n!==0&&!Ut(n))throw new TypeError("max option must be a nonnegative integer");let w=n?zu(n):Array;if(!w)throw new Error("invalid max value: "+n);if(this.#t=n,this.#e=m,this.maxEntrySize=h||this.#e,this.sizeCalculation=y,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(T!==void 0&&typeof T!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#i=T,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=I,this.#_=!!I,this.#l=new Map,this.#s=new Array(n).fill(void 0),this.#n=new Array(n).fill(void 0),this.#f=new w(n),this.#p=new w(n),this.#h=0,this.#d=0,this.#v=Xs.create(n),this.#u=0,this.#g=0,typeof l=="function"&&(this.#r=l),typeof u=="function"?(this.#a=u,this.#m=[]):(this.#a=void 0,this.#m=void 0),this.#x=!!this.#r,this.#y=!!this.#a,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!N,this.allowStaleOnFetchAbort=!!O,this.ignoreFetchAbort=!!j,this.maxEntrySize!==0){if(this.#e!==0&&!Ut(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!Ut(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!x,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Ut(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!Ut(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#C()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let U="LRU_CACHE_UNBOUNDED";Hh(U)&&(Wu.add(U),Yu("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,e))}}getRemainingTTL(t){return this.#l.has(t)?1/0:0}#C(){let t=new Un(this.#t),n=new Un(this.#t);this.#T=t,this.#N=n,this.#P=(o,s,a=jn.now())=>{if(n[o]=s!==0?a:0,t[o]=s,s!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#E(o)&&this.#w(this.#s[o],"expire")},s+1);c.unref&&c.unref()}},this.#R=o=>{n[o]=t[o]!==0?jn.now():0},this.#O=(o,s)=>{if(t[s]){let a=t[s],c=n[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=r||i();let l=o.now-c;o.remainingTTL=a-l}};let r=0,i=()=>{let o=jn.now();if(this.ttlResolution>0){r=o;let s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#l.get(o);if(s===void 0)return 0;let a=t[s],c=n[s];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#E=o=>{let s=n[o],a=t[o];return!!a&&!!s&&(r||i())-s>a}}#R=()=>{};#O=()=>{};#P=()=>{};#E=()=>!1;#$(){let t=new Un(this.#t);this.#g=0,this.#b=t,this.#A=n=>{this.#g-=t[n],t[n]=0},this.#M=(n,r,i,o)=>{if(this.#c(r))return 0;if(!Ut(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!Ut(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#L=(n,r,i)=>{if(t[n]=r,this.#e){let o=this.#e-t[n];for(;this.#g>o;)this.#k(!0)}this.#g+=t[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#g)}}#A=t=>{};#L=(t,n,r)=>{};#M=(t,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:t=this.allowStale}={}){if(this.#u)for(let n=this.#d;!(!this.#j(n)||((t||!this.#E(n))&&(yield n),n===this.#h));)n=this.#p[n]}*#S({allowStale:t=this.allowStale}={}){if(this.#u)for(let n=this.#h;!(!this.#j(n)||((t||!this.#E(n))&&(yield n),n===this.#d));)n=this.#f[n]}#j(t){return t!==void 0&&this.#l.get(this.#s[t])===t}*entries(){for(let t of this.#I())this.#n[t]!==void 0&&this.#s[t]!==void 0&&!this.#c(this.#n[t])&&(yield[this.#s[t],this.#n[t]])}*rentries(){for(let t of this.#S())this.#n[t]!==void 0&&this.#s[t]!==void 0&&!this.#c(this.#n[t])&&(yield[this.#s[t],this.#n[t]])}*keys(){for(let t of this.#I()){let n=this.#s[t];n!==void 0&&!this.#c(this.#n[t])&&(yield n)}}*rkeys(){for(let t of this.#S()){let n=this.#s[t];n!==void 0&&!this.#c(this.#n[t])&&(yield n)}}*values(){for(let t of this.#I())this.#n[t]!==void 0&&!this.#c(this.#n[t])&&(yield this.#n[t])}*rvalues(){for(let t of this.#S())this.#n[t]!==void 0&&!this.#c(this.#n[t])&&(yield this.#n[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,n={}){for(let r of this.#I()){let i=this.#n[r],o=this.#c(i)?i.__staleWhileFetching:i;if(o!==void 0&&t(o,this.#s[r],this))return this.get(this.#s[r],n)}}forEach(t,n=this){for(let r of this.#I()){let i=this.#n[r],o=this.#c(i)?i.__staleWhileFetching:i;o!==void 0&&t.call(n,o,this.#s[r],this)}}rforEach(t,n=this){for(let r of this.#S()){let i=this.#n[r],o=this.#c(i)?i.__staleWhileFetching:i;o!==void 0&&t.call(n,o,this.#s[r],this)}}purgeStale(){let t=!1;for(let n of this.#S({allowStale:!0}))this.#E(n)&&(this.#w(this.#s[n],"expire"),t=!0);return t}info(t){let n=this.#l.get(t);if(n===void 0)return;let r=this.#n[n],i=this.#c(r)?r.__staleWhileFetching:r;if(i===void 0)return;let o={value:i};if(this.#T&&this.#N){let s=this.#T[n],a=this.#N[n];if(s&&a){let c=s-(jn.now()-a);o.ttl=c,o.start=Date.now()}}return this.#b&&(o.size=this.#b[n]),o}dump(){let t=[];for(let n of this.#I({allowStale:!0})){let r=this.#s[n],i=this.#n[n],o=this.#c(i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;let s={value:o};if(this.#T&&this.#N){s.ttl=this.#T[n];let a=jn.now()-this.#N[n];s.start=Math.floor(Date.now()-a)}this.#b&&(s.size=this.#b[n]),t.unshift([r,s])}return t}load(t){this.clear();for(let[n,r]of t){if(r.start){let i=Date.now()-r.start;r.start=jn.now()-i}this.set(n,r.value,r)}}set(t,n,r={}){if(n===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,u=this.#M(t,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#w(t,"set"),this;let f=this.#u===0?void 0:this.#l.get(t);if(f===void 0)f=this.#u===0?this.#d:this.#v.length!==0?this.#v.pop():this.#u===this.#t?this.#k(!1):this.#u,this.#s[f]=t,this.#n[f]=n,this.#l.set(t,f),this.#f[this.#d]=f,this.#p[f]=this.#d,this.#d=f,this.#u++,this.#L(f,u,c),c&&(c.set="add"),l=!1;else{this.#D(f);let d=this.#n[f];if(n!==d){if(this.#_&&this.#c(d)){d.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=d;m!==void 0&&!s&&(this.#x&&this.#r?.(m,t,"set"),this.#y&&this.#m?.push([m,t,"set"]))}else s||(this.#x&&this.#r?.(d,t,"set"),this.#y&&this.#m?.push([d,t,"set"]));if(this.#A(f),this.#L(f,u,c),this.#n[f]=n,c){c.set="replace";let m=d&&this.#c(d)?d.__staleWhileFetching:d;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#T&&this.#C(),this.#T&&(l||this.#P(f,i,o),c&&this.#O(c,f)),!s&&this.#y&&this.#m){let d=this.#m,m;for(;m=d?.shift();)this.#a?.(...m)}return this}pop(){try{for(;this.#u;){let t=this.#n[this.#h];if(this.#k(!0),this.#c(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#y&&this.#m){let t=this.#m,n;for(;n=t?.shift();)this.#a?.(...n)}}}#k(t){let n=this.#h,r=this.#s[n],i=this.#n[n];return this.#_&&this.#c(i)?i.__abortController.abort(new Error("evicted")):(this.#x||this.#y)&&(this.#x&&this.#r?.(i,r,"evict"),this.#y&&this.#m?.push([i,r,"evict"])),this.#A(n),t&&(this.#s[n]=void 0,this.#n[n]=void 0,this.#v.push(n)),this.#u===1?(this.#h=this.#d=0,this.#v.length=0):this.#h=this.#f[n],this.#l.delete(r),this.#u--,n}has(t,n={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=this.#l.get(t);if(o!==void 0){let s=this.#n[o];if(this.#c(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#E(o))i&&(i.has="stale",this.#O(i,o));else return r&&this.#R(o),i&&(i.has="hit",this.#O(i,o)),!0}else i&&(i.has="miss");return!1}peek(t,n={}){let{allowStale:r=this.allowStale}=n,i=this.#l.get(t);if(i===void 0||!r&&this.#E(i))return;let o=this.#n[i];return this.#c(o)?o.__staleWhileFetching:o}#F(t,n,r,i){let o=n===void 0?void 0:this.#n[n];if(this.#c(o))return o;let s=new Bi,{signal:a}=r;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let c={signal:s.signal,options:r,context:i},l=(y,I=!1)=>{let{aborted:T}=s.signal,b=r.ignoreFetchAbort&&y!==void 0;if(r.status&&(T&&!I?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,b&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),T&&!b&&!I)return f(s.signal.reason);let x=m;return this.#n[n]===m&&(y===void 0?x.__staleWhileFetching?this.#n[n]=x.__staleWhileFetching:this.#w(t,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(t,y,c.options))),y},u=y=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=y),f(y)),f=y=>{let{aborted:I}=s.signal,T=I&&r.allowStaleOnFetchAbort,b=T||r.allowStaleOnFetchRejection,x=b||r.noDeleteOnFetchRejection,N=m;if(this.#n[n]===m&&(!x||N.__staleWhileFetching===void 0?this.#w(t,"fetch"):T||(this.#n[n]=N.__staleWhileFetching)),b)return r.status&&N.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),N.__staleWhileFetching;if(N.__returned===N)throw y},d=(y,I)=>{let T=this.#o?.(t,o,c);T&&T instanceof Promise&&T.then(b=>y(b===void 0?void 0:b),I),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(y(void 0),r.allowStaleOnFetchAbort&&(y=b=>l(b,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(d).then(l,u),h=Object.assign(m,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(t,h,{...c.options,status:void 0}),n=this.#l.get(t)):this.#n[n]=h,h}#c(t){if(!this.#_)return!1;let n=t;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Bi}async fetch(t,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:m=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:y,forceRefresh:I=!1,status:T,signal:b}=n;if(!this.#_)return T&&(T.fetch="get"),this.get(t,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:T});let x={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:h,ignoreFetchAbort:m,status:T,signal:b},N=this.#l.get(t);if(N===void 0){T&&(T.fetch="miss");let O=this.#F(t,N,x,y);return O.__returned=O}else{let O=this.#n[N];if(this.#c(O)){let R=r&&O.__staleWhileFetching!==void 0;return T&&(T.fetch="inflight",R&&(T.returnedStale=!0)),R?O.__staleWhileFetching:O.__returned=O}let j=this.#E(N);if(!I&&!j)return T&&(T.fetch="hit"),this.#D(N),i&&this.#R(N),T&&this.#O(T,N),O;let w=this.#F(t,N,x,y),B=w.__staleWhileFetching!==void 0&&r;return T&&(T.fetch=j?"stale":"refresh",B&&j&&(T.returnedStale=!0)),B?w.__staleWhileFetching:w.__returned=w}}async forceFetch(t,n={}){let r=await this.fetch(t,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(t,n={}){let r=this.#i;if(!r)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=n,a=this.get(t,s);if(!o&&a!==void 0)return a;let c=r(t,a,{options:s,context:i});return this.set(t,c,s),c}get(t,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=this.#l.get(t);if(a!==void 0){let c=this.#n[a],l=this.#c(c);return s&&this.#O(s,a),this.#E(a)?(s&&(s.get="stale"),l?(s&&r&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||this.#w(t,"expire"),s&&r&&(s.returnedStale=!0),r?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(this.#D(a),i&&this.#R(a),c))}else s&&(s.get="miss")}#U(t,n){this.#p[n]=t,this.#f[t]=n}#D(t){t!==this.#d&&(t===this.#h?this.#h=this.#f[t]:this.#U(this.#p[t],this.#f[t]),this.#U(this.#d,t),this.#d=t)}delete(t){return this.#w(t,"delete")}#w(t,n){let r=!1;if(this.#u!==0){let i=this.#l.get(t);if(i!==void 0)if(r=!0,this.#u===1)this.#V(n);else{this.#A(i);let o=this.#n[i];if(this.#c(o)?o.__abortController.abort(new Error("deleted")):(this.#x||this.#y)&&(this.#x&&this.#r?.(o,t,n),this.#y&&this.#m?.push([o,t,n])),this.#l.delete(t),this.#s[i]=void 0,this.#n[i]=void 0,i===this.#d)this.#d=this.#p[i];else if(i===this.#h)this.#h=this.#f[i];else{let s=this.#p[i];this.#f[s]=this.#f[i];let a=this.#f[i];this.#p[a]=this.#p[i]}this.#u--,this.#v.push(i)}}if(this.#y&&this.#m?.length){let i=this.#m,o;for(;o=i?.shift();)this.#a?.(...o)}return r}clear(){return this.#V("delete")}#V(t){for(let n of this.#S({allowStale:!0})){let r=this.#n[n];if(this.#c(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#s[n];this.#x&&this.#r?.(r,i,t),this.#y&&this.#m?.push([r,i,t])}}if(this.#l.clear(),this.#n.fill(void 0),this.#s.fill(void 0),this.#T&&this.#N&&(this.#T.fill(0),this.#N.fill(0)),this.#b&&this.#b.fill(0),this.#h=0,this.#d=0,this.#v.length=0,this.#g=0,this.#u=0,this.#y&&this.#m){let n=this.#m,r;for(;r=n?.shift();)this.#a?.(...r)}}};var Wh=1024,Yh=36e5;function Wi({max:e=Wh,ttl:t=Yh}={}){return new Hi({max:e,ttl:t})}function Ju({documentCache:e=Wi(),errorCache:t=Wi(),validationCache:n=!0}){let r=Wi();return{onParse({params:i,setParsedDocument:o}){let s=i.source.toString(),a=e.get(s);if(a){o(a);return}let c=t.get(s);if(c)throw c;return({result:l})=>{l!=null&&(l instanceof Error?t.set(s,l):e.set(s,l))}},onValidate({params:{schema:i,documentAST:o,rules:s},setResult:a}){if(i!=null&&n!==!1){let c=s?.map(d=>d.name).join(",")||"",l=r.get(c);l||(l=new WeakMap,r.set(c,l));let u=l.get(i);u||(u=new WeakMap,l.set(i,u));let f=u.get(o);if(f){a(f);return}return({result:d})=>{d!=null&&u?.set(o,d)}}}}}var zh=()=>!0;function Vn(e){let t=e.match||zh;return{onRequestParse({request:n,setRequestParser:r}){t(n)&&r(e.parse)}}}function Ku(e){let t=(e.headers.get("accept")||"*/*").replace(/\s/g,"").toLowerCase().split(","),n=[];for(let r of t){let[i,...o]=r.split(";");(o?.find(a=>a.includes("charset="))||"charset=utf-8")==="charset=utf-8"&&n.push(i)}return n.reverse()}function Xu(e,t){let[n,r]=e.split("/"),[i,o]=t.split("/");return(i==="*"||i===n)&&(o==="*"||o===r)}function $n(e){if(Array.isArray(e))return`[${e.map(r=>{let i=Zu(r);return(r.stringify||JSON.stringify)(i)}).join(",")}]`;let t=Zu(e);return(e.stringify||JSON.stringify)(t)}function Zu(e){if(e.errors?.length||e.extensions?.http){let t={...e};if(t.errors&&=t.errors.map(ep),t.extensions){let{http:n,...r}=e.extensions;t.extensions=Object.keys(r).length?r:void 0}return t}return e}function ep(e){if(vt(e)){let t="toJSON"in e&&typeof e.toJSON=="function"?e.toJSON():Object(e),{http:n,unexpected:r,...i}=t.extensions||{};return A(e.message,{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,originalError:ep(e.originalError||void 0),extensions:Object.keys(i).length?i:void 0})}return e}function tp(e,t){let r=Dn(e,{Connection:"keep-alive","Content-Type":'multipart/mixed; boundary="-"',"Transfer-Encoding":"chunked"}),i,o=new t.TextEncoder,s=new t.ReadableStream({start(a){if(We(e))i=e[Symbol.asyncIterator]();else{let c=!1;i={next:()=>c?Promise.resolve({done:!0,value:null}):(c=!0,Promise.resolve({done:!1,value:e}))}}a.enqueue(o.encode("---"))},async pull(a){let{done:c,value:l}=await i.next();if(l!=null){a.enqueue(o.encode(`\r
`)),a.enqueue(o.encode("Content-Type: application/json; charset=utf-8")),a.enqueue(o.encode(`\r
`));let u=$n(l),f=o.encode(u);a.enqueue(o.encode("Content-Length: "+f.byteLength)),a.enqueue(o.encode(`\r
`)),a.enqueue(o.encode(`\r
`)),a.enqueue(f),a.enqueue(o.encode(`\r
`)),a.enqueue(o.encode("---"))}c&&(a.enqueue(o.encode(`--\r
`)),a.close())},async cancel(a){await i.return?.(a)}});return new t.Response(s,r)}function np(e,t,n){if(An(e))return new t.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:"application/json; charset=utf-8, application/graphql-response+json; charset=utf-8"}});let r={"Content-Type":n+"; charset=utf-8"},i=Dn(e,r,n==="application/json"&&!Array.isArray(e)&&Pc(e.errors)&&e.errors.some(s=>!s.extensions.originalError||vt(s.extensions.originalError))),o=$n(e);return new t.Response(o,i)}function rp(){return function(t,n){let r=12e3;globalThis.process?.env?.NODE_ENV==="test"&&(r=300);let o=Dn(t,{"Content-Type":"text/event-stream",Connection:"keep-alive","Cache-Control":"no-cache","Content-Encoding":"none"},!0),s,a,c=new n.TextEncoder,l=new n.ReadableStream({start(u){if(u.enqueue(c.encode(`:

`)),a=setInterval(()=>{if(!u.desiredSize){clearInterval(a);return}u.enqueue(c.encode(`:

`))},r),We(t))s=t[Symbol.asyncIterator]();else{let f=!1;s={next:()=>f?Promise.resolve({done:!0,value:null}):(f=!0,Promise.resolve({done:!1,value:t}))}}},async pull(u){let{done:f,value:d}=await s.next();if(d!=null){u.enqueue(c.encode(`event: next
`));let m=$n(d);u.enqueue(c.encode(`data: ${m}

`))}f&&(u.enqueue(c.encode(`event: complete

`)),clearInterval(a),u.close())},async cancel(u){clearInterval(a),await s.return?.(u)}});return new n.Response(l,o)}}var Jh={mediaTypes:["multipart/mixed"],asyncIterables:!0,processResult:tp};function Kh(){return{mediaTypes:["text/event-stream"],asyncIterables:!0,processResult:rp()}}var ip={mediaTypes:["application/graphql-response+json","application/json"],asyncIterables:!1,processResult:np};function op(){let e=new WeakMap,t=Kh(),n=[t,Jh,ip],r=[t,ip];return{onSubscribe({args:{contextValue:i}}){i.request&&e.set(i.request,!0)},onResultProcess({request:i,result:o,acceptableMediaTypes:s,setResultProcessor:a}){let l=e.get(i)?r:n,u=Ku(i),f=We(o);for(let d of l)for(let m of u)if(!(f&&!d.asyncIterables))for(let h of d.mediaTypes)s.push(h),Xu(h,m)&&a(d.processResult,h)}}}var sp=`<!doctype html><html lang=en><head><meta charset=utf-8><title>Welcome to GraphQL Yoga</title><link rel=icon href=https://raw.githubusercontent.com/dotansimha/graphql-yoga/main/website/public/favicon.ico><style>body,html{padding:0;margin:0;height:100%;font-family:Inter,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif;color:#fff;background-color:#000}main>section.hero{display:flex;height:90vh;justify-content:center;align-items:center;flex-direction:column}.logo{display:flex;align-items:center}.buttons{margin-top:24px}h1{font-size:80px}h2{color:#888;max-width:50%;margin-top:0;text-align:center}a{color:#fff;text-decoration:none;margin-left:10px;margin-right:10px;font-weight:700;transition:color .3s ease;padding:4px;overflow:visible}a.graphiql:hover{color:rgba(255,0,255,.7)}a.docs:hover{color:rgba(28,200,238,.7)}a.tutorial:hover{color:rgba(125,85,245,.7)}svg{margin-right:24px}.not-what-your-looking-for{margin-top:5vh}.not-what-your-looking-for>*{margin-left:auto;margin-right:auto}.not-what-your-looking-for>p{text-align:center}.not-what-your-looking-for>h2{color:#464646}.not-what-your-looking-for>p{max-width:600px;line-height:1.3em}.not-what-your-looking-for>pre{max-width:300px}</style></head><body id=body><main><section class=hero><div class=logo><div><svg xmlns=http://www.w3.org/2000/svg viewBox="-0.41 0.445 472.812 499.811" height=150><defs><linearGradient id=paint0_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint1_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint2_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint3_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint4_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint5_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter0_f_1677_11483 x=23 y=-25 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter1_f_1677_11483 x=-24 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><linearGradient id=paint6_linear_1677_11483 x1=30 y1=28 x2=66.1645 y2=44.4363 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter2_f_1677_11483 x=-12 y=-44 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter3_f_1677_11483 x=13 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter></defs><mask id=mask0_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=16 y=14 width=58 height=62><path d="M21 25.3501C21.7279 25.3501 22.4195 25.5056 23.0433 25.7853L42.1439 14.8C43.0439 14.3 44.1439 14 45.1439 14C46.2439 14 47.2439 14.3 48.1439 14.8L64.5439 24.3C63.3439 25.1 62.4439 26.3 61.8439 27.7L45.9438 18.5C45.6439 18.3 45.344 18.3 45.0441 18.3C44.7441 18.3 44.4439 18.4 44.1439 18.5L25.8225 29.0251C25.9382 29.4471 26 29.8914 26 30.3501C26 33.1115 23.7614 35.3501 21 35.3501C18.2386 35.3501 16 33.1115 16 30.3501C16 27.5887 18.2386 25.3501 21 25.3501Z" fill=url(#paint3_linear_1677_11483) /><path d="M67.2438 35.0329C65.3487 34.3219 64 32.4934 64 30.35C64 27.5886 66.2386 25.35 69 25.35C71.7614 25.35 74 27.5886 74 30.35C74 32.1825 73.0142 33.7848 71.5439 34.6554V55.2C71.5439 57.4 70.3439 59.4 68.5439 60.5L52.1439 69.9C52.1439 68.4 51.6438 66.9 50.7438 65.8L66.3439 56.8C66.9439 56.5 67.2438 55.9 67.2438 55.2V35.0329Z" fill=url(#paint4_linear_1677_11483) /><path d="M49.8439 69.1055C49.9458 69.5034 50 69.9204 50 70.3501C50 73.1115 47.7614 75.3501 45 75.3501C42.5102 75.3501 40.4454 73.5302 40.0633 71.1481L21.8439 60.6C19.9439 59.5 18.8439 57.5 18.8439 55.3V36.8C19.5439 37 20.3439 37.2 21.0439 37.2C21.7439 37.2 22.4439 37.1 23.0439 36.9V55.3C23.0439 56 23.4438 56.6 23.9438 56.9L41.3263 66.9583C42.2398 65.9694 43.5476 65.3501 45 65.3501C47.3291 65.3501 49.2862 66.9426 49.8419 69.0981L49.8436 69.0997L49.8439 69.1055Z" fill=url(#paint5_linear_1677_11483) /></mask><mask id=mask1_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=30 y=28 width=30 height=30><path fill-rule=evenodd clip-rule=evenodd d="M49.3945 32.3945C49.3945 34.7088 47.5796 38.5469 45 38.5469C42.4271 38.5469 40.6055 34.7112 40.6055 32.3945C40.6055 29.9714 42.5769 28 45 28C47.4231 28 49.3945 29.9714 49.3945 32.3945ZM35.332 49.0433V48.2148C35.332 42.8117 37.8535 41.0004 39.8796 39.545L39.8801 39.5447C40.3928 39.1767 40.8604 38.8404 41.2488 38.4742C42.3293 39.6642 43.626 40.3047 45 40.3047C46.3752 40.3047 47.6725 39.6642 48.7529 38.4754C49.1408 38.841 49.6078 39.1773 50.1199 39.5447L50.1204 39.545C52.1465 41.0004 54.668 42.8117 54.668 48.2148V49.0433L53.8406 49.092C49.9848 49.3185 46.8646 46.9002 45 43.5777C43.1159 46.935 39.9847 49.318 36.1594 49.092L35.332 49.0433ZM58.1463 51.0747L58.1463 51.0746C57.0179 50.891 50.0128 49.7507 45.0007 55.693C40.0116 49.7553 33.1965 50.8592 31.9095 51.0677L31.9095 51.0677C31.7906 51.087 31.7189 51.0986 31.7002 51.0963C31.7005 51.0969 31.7011 51.1045 31.7023 51.1187C31.726 51.4003 31.9682 54.2745 34.0566 56.2422L30 58H60L55.8956 56.2422C57.8537 54.4764 58.1396 52.2685 58.2508 51.4092V51.4091C58.2697 51.2628 58.2836 51.1556 58.2998 51.0963C58.2881 51.0977 58.2356 51.0892 58.1463 51.0747ZM40.4836 50.104C42.3956 49.3212 43.6746 48.1737 45 46.61C46.332 48.1841 47.6159 49.3259 49.5164 50.104C49.5356 50.1425 49.5557 50.1805 49.5756 50.2182C49.5793 50.2253 49.583 50.2323 49.5867 50.2393C48.0911 50.8127 46.4264 51.825 45.0047 53.1444C43.5906 51.8221 41.9673 50.8196 40.4256 50.2153C40.4455 50.1784 40.4648 50.1415 40.4836 50.104Z" fill=black /></mask><path d="M 40.59 93.095 C 46.517 93.095 52.14 94.365 57.22 96.635 L 212.7 7.22 C 220.025 3.149 228.978 0.706 237.12 0.706 C 246.073 0.706 254.213 3.149 261.54 7.22 L 395.032 84.547 C 385.264 91.059 377.939 100.827 373.055 112.224 L 243.631 37.338 C 241.19 35.71 238.747 35.71 236.305 35.71 C 233.863 35.71 231.42 36.523 228.978 37.338 L 79.84 123.009 C 80.786 126.443 81.29 130.058 81.29 133.793 C 81.29 156.269 63.065 174.493 40.59 174.493 C 18.116 174.493 -0.109 156.269 -0.109 133.793 C -0.109 111.32 18.116 93.095 40.59 93.095 Z" fill=url(#paint0_linear_1677_11483) /><path d="M 417.01 171.913 C 401.585 166.126 390.603 151.238 390.603 133.793 C 390.603 111.32 408.83 93.095 431.303 93.095 C 453.777 93.095 472.001 111.32 472.001 133.793 C 472.001 148.706 463.976 161.755 452.011 168.835 L 452.011 336.07 C 452.011 353.977 442.243 370.258 427.591 379.21 L 294.098 455.726 C 294.098 443.516 290.029 431.306 282.703 422.353 L 409.683 349.093 C 414.568 346.651 417.01 341.767 417.01 336.07 L 417.01 171.913 Z" fill=url(#paint1_linear_1677_11483) /><path d="M 275.376 449.253 C 276.206 452.495 276.646 455.889 276.646 459.389 C 276.646 481.863 258.422 500.087 235.947 500.087 C 215.679 500.087 198.87 485.272 195.761 465.883 L 47.46 380.025 C 31.995 371.071 23.041 354.792 23.041 336.884 L 23.041 186.296 C 28.738 187.923 35.25 189.553 40.948 189.553 C 46.646 189.553 52.345 188.738 57.228 187.111 L 57.228 336.884 C 57.228 342.582 60.485 347.465 64.554 349.908 L 206.042 431.777 C 213.481 423.728 224.127 418.689 235.947 418.689 C 254.905 418.689 270.833 431.656 275.36 449.196 L 275.376 449.214 L 275.376 449.253 Z" fill=url(#paint2_linear_1677_11483) /><g mask=url(#mask0_1677_11483) transform="matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)"><g filter=url(#filter0_f_1677_11483)><circle cx=73 cy=25 r=26 fill=#ED2E7E /></g><g filter=url(#filter1_f_1677_11483)><circle cx=26 cy=69 r=26 fill=#1CC8EE /></g></g><path fill-rule=evenodd clip-rule=evenodd d="M 271.713 150.431 C 271.713 169.275 256.948 200.517 235.947 200.517 C 215.003 200.517 200.172 169.292 200.172 150.431 C 200.172 130.708 216.225 114.666 235.947 114.666 C 255.67 114.666 271.713 130.708 271.713 150.431 Z M 157.251 285.952 L 157.251 279.212 C 157.251 235.233 177.771 220.485 194.27 208.641 C 198.447 205.644 202.247 202.901 205.414 199.923 C 214.204 209.608 224.763 214.826 235.947 214.826 C 247.138 214.826 257.697 209.608 266.496 199.931 C 269.653 202.911 273.456 205.644 277.622 208.641 C 294.114 220.485 314.642 235.233 314.642 279.212 L 314.642 285.952 L 307.912 286.351 C 276.525 288.191 251.128 268.509 235.947 241.468 C 220.611 268.795 195.126 288.191 163.981 286.351 L 157.251 285.952 Z M 342.953 302.492 C 333.771 300.994 276.751 291.715 235.955 340.082 C 195.345 291.749 139.865 300.734 129.389 302.436 C 128.428 302.59 127.841 302.688 127.687 302.665 C 127.687 302.673 127.695 302.729 127.702 302.85 C 127.897 305.138 129.867 328.532 146.872 344.55 L 113.849 358.862 L 358.044 358.862 L 324.639 344.55 C 340.576 330.177 342.905 312.202 343.807 305.212 C 343.962 304.022 344.077 303.153 344.206 302.665 C 344.108 302.68 343.686 302.606 342.953 302.492 Z M 199.188 294.59 C 214.751 288.215 225.161 278.879 235.947 266.15 C 246.788 278.96 257.241 288.255 272.707 294.59 C 272.869 294.898 273.031 295.207 273.196 295.518 C 273.219 295.574 273.252 295.631 273.285 295.688 C 261.107 300.361 247.555 308.598 235.989 319.334 C 224.477 308.573 211.258 300.417 198.715 295.493 C 198.87 295.191 199.033 294.891 199.188 294.59 Z" fill=url(#paint6_linear_1677_11483) /><g mask=url(#mask1_1677_11483) transform="matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)"><g filter=url(#filter2_f_1677_11483)><circle cx=38 cy=6 r=26 fill=#ED2E7E /></g><g filter=url(#filter3_f_1677_11483)><circle cx=63 cy=69 r=26 fill=#1CC8EE /></g></g></svg></div><h1>GraphQL Yoga</h1></div><h2>The batteries-included cross-platform GraphQL Server.</h2><div class=buttons><a href=https://www.the-guild.dev/graphql/yoga-server/docs class=docs>Read the Docs</a> <a href=https://www.the-guild.dev/graphql/yoga-server/tutorial/basic class=tutorial>Start the Tutorial </a><a href=__GRAPHIQL_LINK__ class=graphiql>Visit GraphiQL</a></div></section><section class=not-what-your-looking-for><h2>Not the page you are looking for? \u{1F440}</h2><p>This page is shown be default whenever a 404 is hit.<br>You can disable this by behavior via the <code>landingPage</code> option.</p><pre>
          <code>
import { createYoga } from 'graphql-yoga';

const yoga = createYoga({
  landingPage: false
})
          </code>
        </pre><p>If you expected this page to be the GraphQL route, you need to configure Yoga. Currently, the GraphQL route is configured to be on <code>__GRAPHIQL_LINK__</code>.</p><pre>
          <code>
import { createYoga } from 'graphql-yoga';

const yoga = createYoga({
  graphqlEndpoint: '__REQUEST_PATH__',
})
          </code>
        </pre></section></main></body></html>`;function ap(e){let t;function n({URLPattern:r}){return t||=new r({pathname:e.graphqlEndpoint}),t}return{onRequest({request:r,fetchAPI:i,endResponse:o,url:s}){if(!r.url.endsWith(e.graphqlEndpoint)&&s.pathname!==e.graphqlEndpoint&&!n(i).test(s)){if(e.showLandingPage===!0&&r.method==="GET"&&r.headers?.get("accept")?.includes("text/html")){o(new i.Response(sp.replace(/__GRAPHIQL_LINK__/g,e.graphqlEndpoint).replace(/__REQUEST_PATH__/g,s.pathname),{status:200,statusText:"OK",headers:{"Content-Type":"text/html"}}));return}o(new i.Response("",{status:404,statusText:"Not Found"}))}}}}async function Zs({request:e,result:t,fetchAPI:n,onResultProcessHooks:r}){let i,o=[],s="*/*";for(let a of r)await a({request:e,acceptableMediaTypes:o,result:t,setResult(c){t=c},resultProcessor:i,setResultProcessor(c,l){i=c,s=l}});return i?i(t,n,s):new n.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:o.join("; charset=utf-8, ")}})}async function cp({params:e,enveloped:t}){let n=t.parse(e.query),r=t.validate(t.schema,n);if(r.length>0)return{errors:r};let i=await t.contextFactory(),o={schema:t.schema,document:n,contextValue:i,variableValues:e.variables,operationName:e.operationName};return(At(n,e.operationName)?.operation==="subscription"?t.subscribe:t.execute)(o)}var lp=(e,t,n=globalThis.process?.env?.NODE_ENV==="development")=>{if(vt(e)){if(e.originalError){if(e.originalError.name==="GraphQLError")return e;let r={...e.extensions,unexpected:!0};return n&&(r.originalError={message:e.originalError.message,stack:e.originalError.stack}),A(t,{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,extensions:r})}return e}return A(t,{extensions:{unexpected:!0,originalError:n?e instanceof Error?{message:e.message,stack:e.stack}:e:void 0}})};var ea=class{constructor(t){if(this.handle=async(c,l)=>{let u=new Proxy({},{get:(y,I,T)=>(u=new this.fetchAPI.URL(c.url,"http://localhost"),Reflect.get(u,I,u))}),f,d=[];for(let y of this.onRequestParseHooks){let I=await y({request:c,url:u,requestParser:f,serverContext:l,setRequestParser(T){f=T}});I?.onRequestParseDone!=null&&d.push(I.onRequestParseDone)}if(this.logger.debug("Parsing request to extract GraphQL parameters"),!f)return new this.fetchAPI.Response(null,{status:415,statusText:"Unsupported Media Type"});let m=await f(c);for(let y of d)await y({requestParserResult:m,setRequestParserResult(I){m=I}});let h=await(Array.isArray(m)?Promise.all(m.map(y=>this.getResultForParams({params:y,request:c},l))):this.getResultForParams({params:m,request:c},l));return Zs({request:c,result:h,fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks})},this.id=t?.id??"yoga",this.fetchAPI={...Xh},t?.fetchAPI)for(let c in t.fetchAPI)t.fetchAPI[c]&&(this.fetchAPI[c]=t.fetchAPI[c]);let n=t?.logging==null?!0:t.logging;this.logger=typeof n=="boolean"?n===!0?Ni():Ni("silent"):typeof n=="string"?Ni(n):n;let r=typeof t?.maskedErrors=="object"&&t.maskedErrors.maskError||lp,i=new WeakSet;this.maskedErrorsOpts=t?.maskedErrors===!1?null:{errorMessage:"Unexpected error.",...typeof t?.maskedErrors=="object"?t.maskedErrors:{},maskError:(c,l)=>{if(i.has(c))return c;let u=r(c,l,this.maskedErrorsOpts?.isDev);return u!==c&&this.logger.error(c),i.add(u),u}};let o=this.maskedErrorsOpts==null?null:this.maskedErrorsOpts,s=0;t?.batching&&(typeof t.batching=="boolean"?s=10:s=t.batching.limit??10),this.graphqlEndpoint=t?.graphqlEndpoint||"/graphql";let a=this.graphqlEndpoint;this.plugins=[Hl({parse:Nt,validate:mi,execute:$s,subscribe:$s,specifiedRules:On}),!!t?.schema&&qc(t.schema),t?.context!=null&&Bl(c=>t?.context?typeof t.context=="function"?t.context(c):t.context:{}),Bu({id:this.id,logger:this.logger,endpoint:t?.healthCheckEndpoint}),t?.cors!==!1&&xu(t?.cors),t?.graphiql!==!1&&Gc({graphqlEndpoint:a,options:t?.graphiql,render:t?.renderGraphiQL,logger:this.logger}),Vn({match:Ru,parse:Au}),Vn({match:Cu,parse:Pu}),t?.multipart!==!1&&Vn({match:ju,parse:Uu}),Vn({match:ku,parse:Fu}),Vn({match:Du,parse:Lu}),op(),Su((c,l)=>{let f={errors:Ei(c,this.maskedErrorsOpts,this.logger)};return Zs({request:l,result:f,fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks})}),...t?.plugins??[],{onPluginInit({addPlugin:c}){t?.parserAndValidationCache!==!1&&c(Ju(!t?.parserAndValidationCache||t?.parserAndValidationCache===!0?{}:t?.parserAndValidationCache)),c(qu(s)),c(Vu()),c(ap({graphqlEndpoint:a,showLandingPage:t?.landingPage??!0})),c($u()),c(Qu()),o&&c(Ql(o)),c(Gu())}}],this.getEnveloped=Gl({plugins:this.plugins}),this.plugins=this.getEnveloped._plugins,this.onRequestParseHooks=[],this.onParamsHooks=[],this.onResultProcessHooks=[];for(let c of this.plugins)c&&(c.onYogaInit&&c.onYogaInit({yoga:this}),c.onRequestParse&&this.onRequestParseHooks.push(c.onRequestParse),c.onParams&&this.onParamsHooks.push(c.onParams),c.onResultProcess&&this.onResultProcessHooks.push(c.onResultProcess))}async getResultForParams({params:t,request:n},...r){try{let i;for(let o of this.onParamsHooks)await o({params:t,request:n,setParams(s){t=s},setResult(s){i=s},fetchAPI:this.fetchAPI});if(i==null){let s={...r[0],request:n,params:t},a=this.getEnveloped(s);this.logger.debug("Processing GraphQL Parameters"),i=await cp({params:t,enveloped:a}),this.logger.debug("Processing GraphQL Parameters done.")}return i}catch(i){return{errors:Ei(i,this.maskedErrorsOpts,this.logger)}}}};function up(e){let t=new ea(e);return Nu(t,{fetchAPI:t.fetchAPI,plugins:t.plugins})}var ta=(e,t)=>{let n=["workspaceId = ?"],r=[t];if(n.push('("deletedAt" IS NULL)'),!e)return{clause:n.join(" AND "),params:r};for(let[i,o]of Object.entries(e))if(o===null)n.push(`"${i}" IS NULL`);else if(typeof o=="object"){if("eq"in o&&(n.push(`"${i}" = ?`),r.push(o.eq)),"neq"in o&&(n.push(`"${i}" != ?`),r.push(o.neq)),"in"in o&&Array.isArray(o.in)){let s=o.in.map(()=>"?").join(", ");n.push(`"${i}" IN (${s})`),r.push(...o.in)}"like"in o&&(n.push(`"${i}" LIKE ? COLLATE NOCASE`),r.push(`%${o.like}%`))}else n.push(`"${i}" = ?`),r.push(o);return{clause:n.join(" AND "),params:r}},Zh=e=>{if(!e||e.length===0)return'ORDER BY "createdAt" DESC, "id" ASC';let t=e.map(n=>{let r=n.direction||"ASC",i=n.nulls?` NULLS ${n.nulls}`:r==="ASC"?" NULLS FIRST":" NULLS LAST";return`"${n.field}" ${r}${i}`});return t.push('"id" ASC'),`ORDER BY ${t.join(", ")}`},eg=e=>{let t=e.first??e.last??50;return{clause:`LIMIT ${t+1}`,limit:t}},pp=e=>btoa(JSON.stringify({id:e})),tg=e=>{try{return JSON.parse(atob(e))}catch{return null}},ng=(e,t,n)=>{let r=e.length>t,i=r?e.slice(0,t):e;n.last&&!n.first&&i.reverse();let o={hasNextPage:n.first?r:!!n.before,hasPreviousPage:n.last?r:!!n.after,startCursor:i.length>0?pp(i[0].id):void 0,endCursor:i.length>0?pp(i[i.length-1].id):void 0};return{records:i,pageInfo:o}},fp=async(e,t,n,r={})=>{let{filter:i,orderBy:o,pagination:s={},columns:a=["*"]}=r,{clause:c,params:l}=ta(i,n),u=Zh(o),{clause:f,limit:d}=eg(s);if(s.after){let O=tg(s.after);if(O){let j={id:{neq:O.id}},{clause:w,params:U}=ta(j,n);l.push(...U.slice(1))}}let h=`
    SELECT ${a.join(", ")}
    FROM "${t}"
    WHERE ${c}
    ${u}
    ${f}
  `,y=await e.prepare(h).bind(...l).all(),I=`
    SELECT COUNT(*) as count
    FROM "${t}"
    WHERE ${c}
  `,T=await e.prepare(I).bind(...l.slice(0,l.length)).first(),b=y.results||[],{records:x,pageInfo:N}=ng(b,d,s);return{records:x,pageInfo:N,totalCount:T?.count??0}},na=async(e,t,n,r)=>{let{clause:i,params:o}=ta(r,n),s=`
    SELECT *
    FROM "${t}"
    WHERE ${i}
    LIMIT 1
  `;return await e.prepare(s).bind(...o).first()},dp=async(e,t,n,r)=>{let i=crypto.randomUUID(),o=new Date().toISOString(),s={id:i,...r,workspaceId:n,createdAt:o,updatedAt:o},a=Object.keys(s),c=a.map(()=>"?").join(", "),l=Object.values(s),u=`
    INSERT INTO "${t}" (${a.map(f=>`"${f}"`).join(", ")})
    VALUES (${c})
  `;return await e.prepare(u).bind(...l).run(),s},mp=async(e,t,n,r)=>{let i=new Date().toISOString(),o=[],s=r.map(a=>{let l={id:crypto.randomUUID(),...a,workspaceId:n,createdAt:i,updatedAt:i};o.push(l);let u=Object.keys(l),f=u.map(()=>"?").join(", "),d=Object.values(l),m=`
      INSERT INTO "${t}" (${u.map(h=>`"${h}"`).join(", ")})
      VALUES (${f})
    `;return e.prepare(m).bind(...d)});return await e.batch(s),o},hp=async(e,t,n,r,i)=>{let o=new Date().toISOString(),s={...i,updatedAt:o},a=Object.keys(s).map(u=>`"${u}" = ?`).join(", "),c=[...Object.values(s),n,r],l=`
    UPDATE "${t}"
    SET ${a}
    WHERE workspaceId = ? AND id = ?
  `;return await e.prepare(l).bind(...c).run(),na(e,t,n,{id:r})},gp=async(e,t,n,r)=>{let i=new Date().toISOString(),o=`
    UPDATE "${t}"
    SET "deletedAt" = ?, "updatedAt" = ?
    WHERE workspaceId = ? AND id = ? AND "deletedAt" IS NULL
  `;await e.prepare(o).bind(i,i,n,r).run();let s=`
    SELECT * FROM "${t}"
    WHERE workspaceId = ? AND id = ?
  `;return e.prepare(s).bind(n,r).first()};var rg=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r,{records:s,pageInfo:a,totalCount:c}=await fp(o,e,i,{filter:n.filter,orderBy:n.orderBy,pagination:{first:n.first,last:n.last,before:n.before,after:n.after}});return{edges:s.map(u=>({node:u,cursor:btoa(JSON.stringify({id:u.id}))})),pageInfo:a,totalCount:c}},ig=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r;return await na(o,e,i,n.filter)},og=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r;return await dp(o,e,i,n.data)},sg=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r;return await mp(o,e,i,n.data)},ag=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r;return await hp(o,e,i,n.id,n.data)},cg=e=>async(t,n,r)=>{let{workspaceId:i,db:o}=r;return await gp(o,e,i,n.id)},Vt={company:{tableName:"company",labelSingular:"Company",labelPlural:"Companies"},person:{tableName:"person",labelSingular:"Person",labelPlural:"People"},opportunity:{tableName:"opportunity",labelSingular:"Opportunity",labelPlural:"Opportunities"},note:{tableName:"note",labelSingular:"Note",labelPlural:"Notes"},task:{tableName:"task",labelSingular:"Task",labelPlural:"Tasks"},attachment:{tableName:"attachment",labelSingular:"Attachment",labelPlural:"Attachments"},favorite:{tableName:"favorite",labelSingular:"Favorite",labelPlural:"Favorites"},favoriteFolder:{tableName:"favoriteFolder",labelSingular:"Favorite Folder",labelPlural:"Favorite Folders"}},lg=(e,t)=>{let n=e.charAt(0).toUpperCase()+e.slice(1),r=(Vt[e]?.labelPlural||`${n}s`.replace(/ys$/,"ies")).replace(/ /g,"");return{Query:{[`${e}`]:ig(t),[`${e}s`]:rg(t)},Mutation:{[`create${n}`]:og(t),[`create${r}`]:sg(t),[`update${n}`]:ag(t),[`delete${n}`]:cg(t)}}},yp=()=>{let e={},t={};for(let[n,r]of Object.entries(Vt)){let i=lg(n,r.tableName);Object.assign(e,i.Query),Object.assign(t,i.Mutation)}return{Query:e,Mutation:t}};var ug={company:["name","domainName"],person:["firstName","lastName","email"],opportunity:["name"],note:["title","body"],task:["title","body"]},pg=e=>e.replace(/[%_]/g,"\\$&"),fg=(e,t,n,r,i,o)=>{let a=`%${pg(i)}%`,c=n.map(d=>`"${d}" LIKE ? COLLATE NOCASE`).join(" OR "),l=n.map(d=>`WHEN "${d}" LIKE '${a.replace(/'/g,"''")}' COLLATE NOCASE THEN SUBSTR("${d}", 1, 100)`).join(" "),u=`
    SELECT
      id,
      '${t}' as objectName,
      id as recordId,
      ${n.length===1?`"${n[0]}"`:`COALESCE(${n.map(d=>`"${d}"`).join(", ")})`} as label,
      CASE ${l} ELSE '' END as snippet,
      1 as score
    FROM "${e}"
    WHERE workspaceId = ?
      AND "deletedAt" IS NULL
      AND (${c})
    LIMIT ?
  `,f=[r,...n.map(()=>a),o];return{sql:u,params:f}},dg=()=>async(e,t,n)=>{let{workspaceId:r,db:i}=n,{query:o,objectNames:s,limit:a=20}=t;if(!o||o.trim().length===0)return[];let c=s?.length?s.filter(f=>Vt[f]):Object.keys(Vt),l=Math.ceil(a/c.length),u=[];for(let f of c){let d=Vt[f],m=ug[f];if(!d||!m)continue;let{sql:h,params:y}=fg(d.tableName,f,m,r,o,l);try{let T=(await i.prepare(h).bind(...y).all()).results||[];u.push(...T)}catch(I){console.error(`Search failed for ${f}:`,I)}}return u.sort((f,d)=>d.score-f.score).slice(0,a)},Tp=()=>({Query:{search:dg()}});var mg=()=>{let e=`
    scalar DateTime
    scalar UUID
    scalar JSON

    enum OrderDirection {
      ASC
      DESC
    }

    enum NullsOrder {
      FIRST
      LAST
    }

    type PageInfo {
      hasNextPage: Boolean!
      hasPreviousPage: Boolean!
      startCursor: String
      endCursor: String
    }

    input OrderByInput {
      field: String!
      direction: OrderDirection!
      nulls: NullsOrder
    }

    input StringFilter {
      eq: String
      neq: String
      in: [String!]
      like: String
    }

    input IDFilter {
      eq: ID
      neq: ID
      in: [ID!]
    }
  `,t=[],n=[],r=[];for(let[s,a]of Object.entries(Vt)){let c=s.charAt(0).toUpperCase()+s.slice(1),l=`${c}Connection`,u=`${c}Edge`,f=`${c}Input`,d=`${c}UpdateInput`,m=`${c}FilterInput`;t.push(`
      type ${c} {
        id: ID!
        createdAt: DateTime!
        updatedAt: DateTime!
        deletedAt: DateTime
        ${hg(s)}
      }

      type ${u} {
        node: ${c}!
        cursor: String!
      }

      type ${l} {
        edges: [${u}!]!
        pageInfo: PageInfo!
        totalCount: Int
      }

      input ${f} {
        ${Ep(s)}
      }

      input ${d} {
        ${Ep(s,!0)}
      }

      input ${m} {
        id: IDFilter
        ${gg(s)}
      }
    `),n.push(`
      ${s}(filter: ${m}!): ${c}
      ${s}s(
        filter: ${m}
        orderBy: [OrderByInput!]
        first: Int
        last: Int
        before: String
        after: String
      ): ${l}!
    `),r.push(`
      create${c}(data: ${f}!): ${c}!
      create${a.labelPlural.replace(/ /g,"")}(data: [${f}!]!): [${c}!]!
      update${c}(id: ID!, data: ${d}!): ${c}
      delete${c}(id: ID!): ${c}
    `)}let i=`
    type SearchResult {
      id: ID!
      objectName: String!
      recordId: ID!
      label: String!
      snippet: String
      score: Float!
    }
  `,o=`
    type Query {
      """
      Health check
      """
      health: HealthStatus!

      """
      API version
      """
      version: String!

      """
      Search across all objects
      """
      search(
        query: String!
        objectNames: [String!]
        limit: Int
      ): [SearchResult!]!

      ${n.join(`
`)}
    }

    type Mutation {
      ${r.join(`
`)}
    }

    type HealthStatus {
      status: String!
      timestamp: String!
      environment: String
    }
  `;return[e,...t,i,o].join(`
`)},hg=e=>({company:`
      name: String!
      domainName: String
      address: String
      employees: Int
      linkedinLink: String
      xLink: String
      annualRecurringRevenue: Float
      idealCustomerProfile: Boolean
      position: Float
    `,person:`
      firstName: String
      lastName: String
      email: String
      phone: String
      city: String
      jobTitle: String
      linkedinLink: String
      xLink: String
      avatarUrl: String
      position: Float
      companyId: ID
    `,opportunity:`
      name: String!
      amount: Float
      closeDate: DateTime
      stage: String
      probability: Float
      position: Float
      companyId: ID
      personId: ID
    `,note:`
      title: String
      body: String
      position: Float
    `,task:`
      title: String
      body: String
      dueAt: DateTime
      status: String
      position: Float
      assigneeId: ID
    `,attachment:`
      name: String!
      fullPath: String!
      type: String!
      size: Int
    `,favorite:`
      position: Float!
      recordId: ID!
      objectName: String!
      folderId: ID
    `,favoriteFolder:`
      name: String!
      position: Float!
    `})[e]||"",Ep=(e,t=!1)=>{let n=i=>t?i.replace(/!$/gm,""):i;return{company:n(`
      name: String!
      domainName: String
      address: String
      employees: Int
      linkedinLink: String
      xLink: String
      annualRecurringRevenue: Float
      idealCustomerProfile: Boolean
      position: Float
    `),person:n(`
      firstName: String
      lastName: String
      email: String
      phone: String
      city: String
      jobTitle: String
      linkedinLink: String
      xLink: String
      avatarUrl: String
      position: Float
      companyId: ID
    `),opportunity:n(`
      name: String!
      amount: Float
      closeDate: DateTime
      stage: String
      probability: Float
      position: Float
      companyId: ID
      personId: ID
    `),note:n(`
      title: String
      body: String
      position: Float
    `),task:n(`
      title: String
      body: String
      dueAt: DateTime
      status: String
      position: Float
      assigneeId: ID
    `),attachment:n(`
      name: String!
      fullPath: String!
      type: String!
      size: Int
    `),favorite:n(`
      position: Float!
      recordId: ID!
      objectName: String!
      folderId: ID
    `),favoriteFolder:n(`
      name: String!
      position: Float!
    `)}[e]||""},gg=e=>({company:`
      name: StringFilter
      domainName: StringFilter
    `,person:`
      firstName: StringFilter
      lastName: StringFilter
      email: StringFilter
      companyId: IDFilter
    `,opportunity:`
      name: StringFilter
      stage: StringFilter
      companyId: IDFilter
      personId: IDFilter
    `,note:`
      title: StringFilter
    `,task:`
      title: StringFilter
      status: StringFilter
      assigneeId: IDFilter
    `,attachment:`
      name: StringFilter
      type: StringFilter
    `,favorite:`
      recordId: IDFilter
      objectName: StringFilter
      folderId: IDFilter
    `,favoriteFolder:`
      name: StringFilter
    `})[e]||"",vp=()=>{let e=mg(),t=yp(),n=Tp(),r={Query:{health:()=>({status:"ok",timestamp:new Date().toISOString(),environment:"workers"}),version:()=>"1.0.0",...n.Query,...t.Query},Mutation:{...t.Mutation}};return ji({typeDefs:e,resolvers:r})};var qL={schema:new it({query:new ne({name:"Query",fields:{_empty:{type:X,resolve:()=>null}}})}),enableIntrospection:!1,maxFields:100,maxRootResolvers:20,renderGraphiQL:!1,environment:"development"},bp=e=>({maxFields:e.GRAPHQL_MAX_FIELDS?parseInt(e.GRAPHQL_MAX_FIELDS,10):100,maxRootResolvers:e.GRAPHQL_MAX_ROOT_RESOLVERS?parseInt(e.GRAPHQL_MAX_ROOT_RESOLVERS,10):20,renderGraphiQL:e.ENABLE_GRAPHIQL==="true",enableIntrospection:e.ENVIRONMENT!=="production",environment:e.ENVIRONMENT||"development"}),yg=e=>({onParse:({params:t,context:n})=>{if(!e||n.user)return;let r=typeof t.source=="string"?t.source:t.source.body??"";if(r.includes("__schema")||r.includes("__type")||r.includes("__typename"))throw new g("Introspection is disabled",{extensions:{code:"FORBIDDEN"}})}}),Tg=e=>({onParse:({params:t})=>{let n=typeof t.source=="string"?t.source:t.source.body??"",r=n.match(/\w+\s*[({]/g)||[];if(r.length>e.maxFields)throw new g(`Query exceeds maximum field limit (${e.maxFields})`,{extensions:{code:"QUERY_COMPLEXITY_EXCEEDED",maxFields:e.maxFields,actualFields:r.length}});let o=/(query|mutation)\s*\{([^}]+)\}/gi.exec(n);if(o){let s=(o[2].match(/\w+\s*[({:]/g)||[]).length;if(s>e.maxRootResolvers)throw new g(`Query exceeds maximum root resolver limit (${e.maxRootResolvers})`,{extensions:{code:"QUERY_COMPLEXITY_EXCEEDED",maxRootResolvers:e.maxRootResolvers,actualRootResolvers:s}})}}}),Eg=()=>{let e=new WeakMap,t=new lt({level:"info",service:"graphql"});return{onRequest:({request:n})=>{e.set(n,Date.now())},onResponse:({request:n})=>{let r=e.get(n)??Date.now(),i=Date.now()-r;t.info("graphql_request",{method:n.method,url:n.url,duration:i})}}},vg=()=>{let e=new lt({level:"error",service:"graphql"});return{onResultProcess:({result:t})=>{if(Symbol.asyncIterator in t)return;let n=t;if(n.errors&&n.errors.length>0)for(let r of n.errors)e.error("graphql_error",void 0,{message:r.message,code:r.extensions?.code,path:r.path})}}},Np=e=>{let t=[vg(),Tg({maxFields:e.maxFields,maxRootResolvers:e.maxRootResolvers})];return e.environment==="production"&&t.push(yg(!0)),e.environment==="development"&&t.push(Eg()),t};var bg=(e,t)=>up({schema:e,graphqlEndpoint:"/graphql",landingPage:!1,graphiql:t?.renderGraphiQL?{title:"Twenty CRM GraphQL API"}:!1,plugins:Np({schema:e,enableIntrospection:t?.enableIntrospection??!1,maxFields:t?.maxFields??100,maxRootResolvers:t?.maxRootResolvers??20,renderGraphiQL:t?.renderGraphiQL??!1,environment:t?.environment??"production"}),context:async n=>{let{requestContext:r,env:i}=n;return{workspaceId:r.workspaceId||"",userId:r.userId,db:i.DB,requestId:r.requestId}},fetchAPI:{Request,Response},cors:!1,batching:{limit:10}});var Ng=()=>ji({typeDefs:`
      type Query {
        """
        Health check query
        """
        health: HealthStatus!

        """
        Get current API version
        """
        version: String!
      }

      type HealthStatus {
        status: String!
        timestamp: String!
        environment: String
      }
    `,resolvers:{Query:{health:()=>({status:"ok",timestamp:new Date().toISOString(),environment:"workers"}),version:()=>"1.0.0"}}}),xp=e=>{let t=e,n=t.GRAPHQL_MAX_FIELDS??"100",r=t.GRAPHQL_MAX_ROOT_RESOLVERS??"20",i=t.ENABLE_GRAPHIQL??"true",o=e.ENVIRONMENT??"development",s=bp({GRAPHQL_MAX_FIELDS:n,GRAPHQL_MAX_ROOT_RESOLVERS:r,ENABLE_GRAPHIQL:i,ENVIRONMENT:o}),a;try{a=vp()}catch(c){console.error("Failed to create workspace schema, using placeholder:",c),a=Ng()}return bg(a,s)};var Ip=e=>{let n={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},r=(o=>typeof o=="string"?o==="*"?()=>o:s=>o===s?s:null:typeof o=="function"?o:s=>o.includes(s)?s:null)(n.origin),i=(o=>typeof o=="function"?o:Array.isArray(o)?()=>o:()=>[])(n.allowMethods);return async function(s,a){function c(u,f){s.res.headers.set(u,f)}let l=await r(s.req.header("origin")||"",s);if(l&&c("Access-Control-Allow-Origin",l),n.credentials&&c("Access-Control-Allow-Credentials","true"),n.exposeHeaders?.length&&c("Access-Control-Expose-Headers",n.exposeHeaders.join(",")),s.req.method==="OPTIONS"){n.origin!=="*"&&c("Vary","Origin"),n.maxAge!=null&&c("Access-Control-Max-Age",n.maxAge.toString());let u=await i(s.req.header("origin")||"",s);u.length&&c("Access-Control-Allow-Methods",u.join(","));let f=n.allowHeaders;if(!f?.length){let d=s.req.header("Access-Control-Request-Headers");d&&(f=d.split(/\s*,\s*/))}return f?.length&&(c("Access-Control-Allow-Headers",f.join(",")),s.res.headers.append("Vary","Access-Control-Request-Headers")),s.res.headers.delete("Content-Length"),s.res.headers.delete("Content-Type"),new Response(null,{headers:s.res.headers,status:204,statusText:"No Content"})}await a(),n.origin!=="*"&&s.header("Vary","Origin",{append:!0})}};var xg=["http://localhost:3000","http://localhost:3001","http://127.0.0.1:3000","http://127.0.0.1:3001"],Sp=async(e,t)=>{let n=e.env.FRONTEND_URL,r=e.env.ENVIRONMENT||"development",i=[...xg];return n&&i.push(n),r==="development"&&i.push("http://localhost:*"),Ip({origin:o=>{if(!o)return"*";if(i.includes(o)||r==="development"&&o.includes("localhost"))return o;for(let s of i)if(s.includes("*")&&new RegExp("^"+s.replace("*",".*")+"$").test(o))return o;return""},allowHeaders:["Content-Type","Authorization","X-Requested-With","X-Request-Id","X-Workspace-Id","Apollo-Require-Preflight"],allowMethods:["GET","POST","PUT","PATCH","DELETE","OPTIONS"],exposeHeaders:["X-Request-Id","X-Response-Time"],credentials:!0,maxAge:86400})(e,t)};var ra=class e extends Error{constructor(t,n,r=500,i){super(n),this.name="ApiError",this.code=t,this.statusCode=r,this.details=i}static badRequest(t,n){return new e("BAD_REQUEST",t,400,n)}static unauthorized(t="Unauthorized"){return new e("UNAUTHORIZED",t,401)}static forbidden(t="Forbidden"){return new e("FORBIDDEN",t,403)}static notFound(t="Resource"){return new e("NOT_FOUND",`${t} not found`,404)}static conflict(t,n){return new e("CONFLICT",t,409,n)}static tooManyRequests(t="Too many requests",n){return new e("TOO_MANY_REQUESTS",t,429,{retryAfter:n})}static internal(t="Internal server error"){return new e("INTERNAL_ERROR",t,500)}static serviceUnavailable(t="Service unavailable"){return new e("SERVICE_UNAVAILABLE",t,503)}},wp=(e,t)=>{let n=t.get("requestId")||"unknown",r=t.get("workspaceId"),i=Cr(n,r),o=500,s="INTERNAL_ERROR",a="An unexpected error occurred",c;if(e instanceof ra?(o=e.statusCode,s=e.code,a=e.message,c=e.details):e instanceof SyntaxError?(o=400,s="INVALID_JSON",a="Invalid JSON in request body"):e instanceof TypeError&&(o=500,s="TYPE_ERROR",a=t.env.ENVIRONMENT==="development"?e.message:"Type error occurred"),o>=500?i.error(`Server error: ${e.message}`,e,{code:s,statusCode:o}):o>=400&&i.warn(`Client error: ${e.message}`,{code:s,statusCode:o}),t.req.path.includes("/graphql")||t.req.header("Content-Type")?.includes("application/graphql")){let f={data:null,errors:[{message:a,extensions:{code:s,details:t.env.ENVIRONMENT==="development"?c:void 0,requestId:n}}]};return t.json(f,o)}let u={success:!1,error:{code:s,message:a,details:t.env.ENVIRONMENT==="development"?c:void 0,requestId:n}};return t.json(u,o)};var Ig=e=>{if(!e)return null;let[t,n]=e.split(" ");return t!=="Bearer"||!n?null:n},Sg=e=>{try{let[,t]=e.split(".");if(!t)return null;let n=t.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(n))}catch{return null}},wg=async(e,t)=>{try{let[n,r,i]=e.split(".");if(!n||!r||!i)return!1;let o=new TextEncoder,s=o.encode(t),a=await crypto.subtle.importKey("raw",s,{name:"HMAC",hash:"SHA-256"},!1,["verify"]),c=i.replace(/-/g,"+").replace(/_/g,"/"),l=Uint8Array.from(atob(c),d=>d.charCodeAt(0)),u=o.encode(`${n}.${r}`);return await crypto.subtle.verify("HMAC",a,l,u)}catch{return!1}},Og=e=>{let t=Math.floor(Date.now()/1e3);return e.exp<t},Op=async(e,t)=>{let n=e.req.header("Authorization"),r=Ig(n);if(!r)return t();let i=Sg(r);if(!i)return e.json({error:"Invalid token",message:"The provided token is malformed"},401);if(Og(i))return e.json({error:"Token expired",message:"The provided token has expired"},401);let o=e.env.JWT_SECRET;return o&&!await wg(r,o)?e.json({error:"Invalid signature",message:"Token signature verification failed"},401):i.type!=="ACCESS"?e.json({error:"Invalid token type",message:"An access token is required"},401):(e.set("workspaceId",i.workspaceId),e.set("userId",i.sub),t())};var _p=async e=>{let t=Date.now();try{return(await e.prepare("SELECT 1 as ok").first())?.ok===1?{status:"pass",latency:Date.now()-t}:{status:"fail",error:"Unexpected query result"}}catch(n){return{status:"fail",latency:Date.now()-t,error:n instanceof Error?n.message:"Unknown error"}}},Rp=async e=>{let t=Date.now();try{let n=`health_check_${Date.now()}`;await e.put(n,"ok",{expirationTtl:60});let r=await e.get(n);return await e.delete(n),r==="ok"?{status:"pass",latency:Date.now()-t}:{status:"fail",error:"KV read/write mismatch"}}catch(n){return{status:"fail",latency:Date.now()-t,error:n instanceof Error?n.message:"Unknown error"}}},Ap=async e=>{let t=Date.now();try{return await e.list({limit:1}),{status:"pass",latency:Date.now()-t}}catch(n){return{status:"fail",latency:Date.now()-t,error:n instanceof Error?n.message:"Unknown error"}}},Ir=new Bn;Ir.get("/",e=>e.json({status:"ok",timestamp:new Date().toISOString()}));Ir.get("/ready",async e=>{let[t,n,r]=await Promise.all([_p(e.env.DB),Rp(e.env.CACHE_STORE),Ap(e.env.FILES)]),i={database:t,cache:n,storage:r},o=Object.values(i).filter(l=>l.status==="fail"),s="healthy";o.length===Object.keys(i).length?s="unhealthy":o.length>0&&(s="degraded");let a=e.env,c={status:s,timestamp:new Date().toISOString(),version:a.VERSION||"unknown",checks:i};return e.json(c,s==="unhealthy"?503:200)});Ir.get("/detailed",async e=>{let t=Date.now(),[n,r,i]=await Promise.all([_p(e.env.DB),Rp(e.env.CACHE_STORE),Ap(e.env.FILES)]),o={database:n,cache:r,storage:i},s=Object.values(o).filter(l=>l.status==="fail"),a="healthy";s.length===Object.keys(o).length?a="unhealthy":s.length>0&&(a="degraded");let c=e.env;return e.json({status:a,timestamp:new Date().toISOString(),version:c.VERSION||"unknown",environment:e.env.ENVIRONMENT||"development",region:c.CF_REGION||"unknown",totalLatency:Date.now()-t,checks:o})});var _g=()=>{let e=new Bn;return e.onError(wp),e.use("*",Fa),e.use("*",Sp),e.route("/health",Ir),e.get("/healthz",t=>t.json({status:"ok"})),e.all("/graphql",Op,async t=>{let n=t.get("requestId")||crypto.randomUUID(),r=t.get("workspaceId"),i=t.get("userId"),o=Ca(n,t.env);return o.workspaceId=r,o.userId=i,await xp(t.env).fetch(t.req.raw,{request:t.req.raw,requestContext:o,env:t.env})}),e.get("/api/v1/*",async t=>t.json({error:"Not implemented",message:"REST API endpoints are not yet configured"},501)),e.notFound(t=>t.json({error:"Not Found",message:`Route ${t.req.method} ${t.req.path} not found`,path:t.req.path},404)),e},Dp=_g();import{DurableObject as Rg}from"cloudflare:workers";var ia=class extends Rg{constructor(){super(...arguments);this.sessions=new Map}async fetch(n){let r=new URL(n.url);return n.headers.get("Upgrade")==="websocket"?this.handleWebSocketUpgrade(n):r.pathname==="/broadcast"&&n.method==="POST"?this.handleBroadcast(n):new Response("Not Found",{status:404})}async handleWebSocketUpgrade(n){let r=new WebSocketPair,[i,o]=Object.values(r);return this.ctx.acceptWebSocket(o),this.sessions.set(o,new Set),new Response(null,{status:101,webSocket:i})}async webSocketMessage(n,r){try{let i=JSON.parse(r);switch(i.type){case"subscribe":this.handleSubscribe(n,i.topic);break;case"unsubscribe":this.handleUnsubscribe(n,i.topic);break;case"ping":n.send(JSON.stringify({type:"pong"}));break;default:n.send(JSON.stringify({type:"error",error:`Unknown message type: ${i.type}`}))}}catch{n.send(JSON.stringify({type:"error",error:"Invalid message format"}))}}async webSocketClose(n,r,i){this.sessions.delete(n)}async webSocketError(n,r){this.sessions.delete(n)}handleSubscribe(n,r){if(!r){n.send(JSON.stringify({type:"error",error:"Topic required for subscribe"}));return}let i=this.sessions.get(n);i&&(i.add(r),n.send(JSON.stringify({type:"subscription",topic:r,data:{subscribed:!0}})))}handleUnsubscribe(n,r){if(!r){n.send(JSON.stringify({type:"error",error:"Topic required for unsubscribe"}));return}let i=this.sessions.get(n);i&&(i.delete(r),n.send(JSON.stringify({type:"subscription",topic:r,data:{subscribed:!1}})))}async handleBroadcast(n){try{let{topic:r,payload:i}=await n.json(),o=0;for(let[s,a]of this.sessions)a.has(r)&&(s.send(JSON.stringify({type:"subscription",topic:r,data:i})),o++);return new Response(JSON.stringify({success:!0,broadcastCount:o}),{headers:{"Content-Type":"application/json"}})}catch{return new Response(JSON.stringify({error:"Invalid broadcast request"}),{status:400,headers:{"Content-Type":"application/json"}})}}};var $t=ua("worker"),gk={async fetch(e,t,n){let r={...n,props:{}};return Dp.fetch(e,t,r)},async scheduled(e,t,n){switch($t.info("Scheduled event triggered",{scheduledTime:e.scheduledTime,cron:e.cron}),e.cron){case"*/5 * * * *":$t.info("Running email sync polling");break;case"0 * * * *":$t.info("Running hourly maintenance");break;case"0 0 * * *":$t.info("Running daily cleanup");break;default:$t.warn("Unknown cron trigger",{cron:e.cron})}},async queue(e,t,n){$t.info("Processing queue batch",{messageCount:e.messages.length,queue:e.queue});for(let r of e.messages)try{let i=r.body;$t.debug("Processing message",{id:r.id,type:i.type}),r.ack()}catch(i){$t.error("Failed to process message",i,{messageId:r.id}),r.retry()}}};export{ia as WorkspaceRealtimeHub,gk as default};
//# sourceMappingURL=worker.js.map
